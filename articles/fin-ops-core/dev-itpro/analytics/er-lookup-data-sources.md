---
title: Konfigurere opslagsdatakilder til at bruge ER-programspecifikke parametre
description: I dette emne forklares det, hvordan du kan konfigurere opslagsdatakilder i elektroniske rapporteringsformater (ER) til at bruge ER-programspecifikke parametre.
author: NickSelin
manager: AnnBe
ms.date: 04/02/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, EROperationDesigner, ERLookupDesigner, ERComponentLookupStructureEditing
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: Release 8.1.3
ms.openlocfilehash: 542580c859759c25da84589ec82495eb72bbcbe5
ms.sourcegitcommit: 74f5b04b482b2ae023c728e0df0eb78305493c6a
ms.translationtype: HT
ms.contentlocale: da-DK
ms.lasthandoff: 04/02/2021
ms.locfileid: "5853515"
---
# <a name="configure-lookup-data-sources-to-use-er-application-specific-parameters"></a><span data-ttu-id="fea90-103">Konfigurere opslagsdatakilder til at bruge ER-programspecifikke parametre</span><span class="sxs-lookup"><span data-stu-id="fea90-103">Configure Lookup data sources to use ER application-specific parameters</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="fea90-104">De ER-programspecifikke parametre til [Elektronisk rapportering](general-electronic-reporting.md) gør det muligt for digt at konfigurere datafiltreringen i et ER-format, så den er baseret på et sæt abstrakte regler.</span><span class="sxs-lookup"><span data-stu-id="fea90-104">The [Electronic reporting (ER)](general-electronic-reporting.md) application-specific parameters feature lets you configure data filtering in an ER format so that it's based on a set of abstract rules.</span></span> <span data-ttu-id="fea90-105">Dette sæt regler kan konfigureres til at bruge de datakilder af typen **Opslag**, der er tilgængelige i et ER-format.</span><span class="sxs-lookup"><span data-stu-id="fea90-105">This set of rules can be configured to use the data source of the **Lookup** type that is available in an ER format.</span></span> <span data-ttu-id="fea90-106">Du kan derefter angive de rigtige regler ud over ER-komponentdesigneren ved hjælp af den brugergrænseflade (UI), der genereres automatisk på basis af indstillingerne for datakilden **Opslag** for det tilsvarende ER-format og de aktuelle oplysninger om den juridiske enhed.</span><span class="sxs-lookup"><span data-stu-id="fea90-106">You can then specify real rules beyond the ER components designers by using the user interface (UI) that is automatically generated based on the settings of the **Lookup** data source of the corresponding ER format and the current legal entity data.</span></span> <span data-ttu-id="fea90-107">I den sidste ende får du adgang til de angivne regler i ER-formatets **Opslag**-datakilde, når dette ER-format udføres.</span><span class="sxs-lookup"><span data-stu-id="fea90-107">Eventually, the specified rules will be accessed by the ER format's **Lookup** data source when this ER format is executed.</span></span>

> [!NOTE]
> <span data-ttu-id="fea90-108">Brug de konfigurerede datakilder i det redigerbare ER-format for at angive, hvilke programdata der skal bruges til at konfigurere rigtige regler.</span><span class="sxs-lookup"><span data-stu-id="fea90-108">Use the configured data sources of the editable ER format to specify what application data is used to configure real rules.</span></span>

<span data-ttu-id="fea90-109">Brug [ER-operationsdesigneren](general-electronic-reporting.md#building-a-format-that-uses-a-data-model-as-a-base) til at få datakilden af **Opslag**-typen ind i dit ER-format.</span><span class="sxs-lookup"><span data-stu-id="fea90-109">Use the [ER Operations designer](general-electronic-reporting.md#building-a-format-that-uses-a-data-model-as-a-base) to bring a data source of the **Lookup** type in to your ER format.</span></span> <span data-ttu-id="fea90-110">Datakilden skal konfigureres til at beskrive, hvordan abstrakte regler ser ud, herunder følgende:</span><span class="sxs-lookup"><span data-stu-id="fea90-110">The data source must be configured to describe how your abstract rules look, including the following:</span></span>

   - <span data-ttu-id="fea90-111">Parametersættet for en bestemt datatype, hvis værdi er leveret til angivelse af en enkelt regel.</span><span class="sxs-lookup"><span data-stu-id="fea90-111">The parameter set of certain data type whose value is provided to specify a single rule.</span></span>
   - <span data-ttu-id="fea90-112">Værditypen for en bestemt datatype, der returneres af en enkelt regel, når denne regel blandt andet betragtes som den mest relevante.</span><span class="sxs-lookup"><span data-stu-id="fea90-112">The value type of certain data type that is returned by a single rule when this rule is considered the most appropriate among others.</span></span>

<span data-ttu-id="fea90-113">Du kan konfigurere følgende typer **Opslag**-datakilder afhængigt af den type værdi, der returneres af en konfigureret regel:</span><span class="sxs-lookup"><span data-stu-id="fea90-113">You can configure the following types of **Lookup** data sources depending on the type of value that is returned by any configured rule:</span></span>

   - <span data-ttu-id="fea90-114">Brug typen **Datamodel\Opslag**, når en modelfasttekstværdi skal returneres.</span><span class="sxs-lookup"><span data-stu-id="fea90-114">Use the **Data model\Lookup** type when a model enumeration value must be returned.</span></span>
   - <span data-ttu-id="fea90-115">Brug **Dynamics 365 Operations\Opslag**-typen, når en programfasttekstværdi eller en [udvidet datatype](../extensibility/extensible-edts.md) for en programværdi skal returneres.</span><span class="sxs-lookup"><span data-stu-id="fea90-115">Use the **Dynamics 365 Operations\Lookup** type when an application enumeration value or an application [extended data type](../extensibility/extensible-edts.md) value must be returned.</span></span>
   - <span data-ttu-id="fea90-116">Brug typen **Formatfasttekst\Opslag**, når en formatfasttekstværdi skal returneres.</span><span class="sxs-lookup"><span data-stu-id="fea90-116">Use the **Format enumeration\Lookup** type when a format enumeration value must be returned.</span></span>

<span data-ttu-id="fea90-117">I følgende illustration vises, hvordan en formatfasttekst kan konfigureres i ER-eksempelformat.</span><span class="sxs-lookup"><span data-stu-id="fea90-117">The following illustration shows how a format enumeration can be configured in the sample ER format.</span></span>

   ![Visning af en formatfasttekst som grundlag for den konfigurerede opslagsdatakilde](./media/er-lookup-data-sources-img1.gif)

<span data-ttu-id="fea90-119">I følgende illustration vises de formatkomponenter, der er konfigureret til at rapportere forskellige typer moms i en anden sektion af en genereret rapport.</span><span class="sxs-lookup"><span data-stu-id="fea90-119">The following illustration shows the format components that were configured to report different type of taxes in a different section of a generated report.</span></span>

   ![Viser formatsektionerne for at rapportere forskellige typer moms separat](./media/er-lookup-data-sources-img2.png)

<span data-ttu-id="fea90-121">I følgende illustration vises, hvordan ER-operationsdesigneren tillader tilføjelse af en datakilde af typen **Formatfasttekst\Opslag**.</span><span class="sxs-lookup"><span data-stu-id="fea90-121">The following illustration shows how the ER Operations designer allows the addition of a data source of the **Format enumeration\Lookup** type.</span></span>  <span data-ttu-id="fea90-122">Den tilføjede datakilde er konfigureret som en returnering af en værdi af `List of taxation levels`-formatfasttekst.</span><span class="sxs-lookup"><span data-stu-id="fea90-122">The added data source is configured as returning a value of the `List of taxation levels` format enumeration.</span></span>

   ![Tilføjelse af en ER-datakilde af typen Formatfasttekst\Opslag](./media/er-lookup-data-sources-img3.gif)

<span data-ttu-id="fea90-124">I følgende illustration vises, hvordan den tilføjede datakilde er konfigureret til at bruge feltet **Kode** i **Model.Data.Tax**-postlisten for **Model**-datakilden som en parameter, der skal angives for hver konfigureret regel.</span><span class="sxs-lookup"><span data-stu-id="fea90-124">The following illustration shows how the added data source is configured to use the **Code** field of the **Model.Data.Tax** record list of the **Model** data source as a parameter that must be specified for every configured rule.</span></span>

![Konfigurere parametre for den tilføjede datakilde for typen Formatfasttekst\Opslag](./media/er-lookup-data-sources-img4.gif)

<span data-ttu-id="fea90-126">Den tilføjede `Model.Data.Tax`-datakilde er konfigureret til at angive en momskode for hver konfigureret regel ved at åbne poster i **TaxTable**-programtabellen.</span><span class="sxs-lookup"><span data-stu-id="fea90-126">The added `Model.Data.Tax` data source is configured to specify a tax code for every configured rule by accessing records of the **TaxTable** application table.</span></span>

   ![Gennemgang af enkeltfirmas opslagsdatakilde for typen Formatfasttekst\Opslag](./media/er-lookup-data-sources-img5.gif)

<span data-ttu-id="fea90-128">Du kan oprette opslagsregler for det valgte ER-format i brugergrænsefladen, der automatisk justeres efter strukturen i den konfigurerede datakilde.</span><span class="sxs-lookup"><span data-stu-id="fea90-128">You can set up the lookup rules for the selected ER format by using the UI that is automatically aligned with the structure of the configured data source.</span></span> <span data-ttu-id="fea90-129">I øjeblikket kræver denne brugergrænseflade, at du for hver regel både angiver den returnerede værdi som `List of taxation levels`-formatfasttekstværdi og momskoden som en parameter.</span><span class="sxs-lookup"><span data-stu-id="fea90-129">Currently, this UI requires that for each rule, you specify the returned value as the `List of taxation levels` format enumeration value as well as the tax code as a parameter.</span></span>

   ![Konfigurere regler for den konfigurerede datakilde](./media/er-lookup-data-sources-img6.gif)

<span data-ttu-id="fea90-131">I følgende illustration vises, hvordan `Model.Data.Summary.LevelByLookup`-datakilden for typen **Beregnet felt** kan konfigureres til at kalde den konfigurerede **Opslag**-datakilde, der leverer de påkrævede parametre.</span><span class="sxs-lookup"><span data-stu-id="fea90-131">The following illustration shows how the `Model.Data.Summary.LevelByLookup` data source of the **Calculated field** type can be configured to call the configured **Lookup** data source providing the required parameters.</span></span> <span data-ttu-id="fea90-132">For at behandle dette kald under kørslen gennemgår ER listen over konfigurerede regler i den definerede rækkefølge for at finde den første regel, der opfylder de leverede betingelser.</span><span class="sxs-lookup"><span data-stu-id="fea90-132">To process this call at runtime, ER goes through the list of configured rules in the defined sequence to locate the first rule that satisfies the provided conditions.</span></span> <span data-ttu-id="fea90-133">I dette eksempel er det reglen, der indeholder den momskode, der svarer til den angivne momskode.</span><span class="sxs-lookup"><span data-stu-id="fea90-133">In this example, it's the rule that contains the tax code that matches the provided one.</span></span> <span data-ttu-id="fea90-134">Som følge heraf findes den mest relevante regel, og den fasttekstværdi, der er konfigureret for den fundne regel, returneres af denne datakilde.</span><span class="sxs-lookup"><span data-stu-id="fea90-134">As the result, the most appropriate rule is found and the enumeration value that is configured for the found rule is returned by this data source.</span></span>

> [!NOTE]
> <span data-ttu-id="fea90-135">En undtagelse opstår, når der ikke findes nogen gældende regel.</span><span class="sxs-lookup"><span data-stu-id="fea90-135">An exception is thrown when no applicable rule is found.</span></span> <span data-ttu-id="fea90-136">Du kan forhindre disse undtagelser ved at konfigurere flere regler i slutningen af regellisten, så du kan håndtere sager, når der ikke er angivet en konfigureret værdi.</span><span class="sxs-lookup"><span data-stu-id="fea90-136">To prevent these exceptions, configure additional rules at the end of the rules list to handle cases when a non-configured value or no value is provided.</span></span> <span data-ttu-id="fea90-137">Brug indstillingerne **\*Ikke tom\*** og **\*Tom\*** i overensstemmelse hermed.</span><span class="sxs-lookup"><span data-stu-id="fea90-137">Use the **\*Not blank**\* and **\*Blank**\* options accordingly.</span></span>  
>
> ![Tilføje en datakilde for at kalde den konfigurerede opslagsdatakilde](./media/er-lookup-data-sources-img7.png)

<span data-ttu-id="fea90-139">Når du angiver indstillingen **På tværs af firma** til **Ja** for den opslagsdatakilde, der kan redigeres, føjer du en ny påkrævet **Firma**-parameter til parametersættet for denne datakilde.</span><span class="sxs-lookup"><span data-stu-id="fea90-139">When you set the **Cross-company** option to **Yes** for the editable lookup data source, you add a new required **Company** parameter to the set of parameters of this data source.</span></span> <span data-ttu-id="fea90-140">Værdien af parameteren **Firma** skal angives ved kørsel, når opslagsdatakilden kaldes.</span><span class="sxs-lookup"><span data-stu-id="fea90-140">The value of the **Company** parameter must be specified at runtime when the lookup data source is called.</span></span> <span data-ttu-id="fea90-141">Når firmakoden angives under kørslen, bruges de regler, der er konfigureret for dette firma, til at finde den regel, der passer bedst, og den tilsvarende værdi returneres.</span><span class="sxs-lookup"><span data-stu-id="fea90-141">When the company code is specified at runtime, the rules configured for this company are used to find the most appropriate rule, and the corresponding value is returned.</span></span> <span data-ttu-id="fea90-142">I følgende illustration vises, hvordan du kan gøre dette, og hvordan parametersættet for den redigerbare datakilde ændres.</span><span class="sxs-lookup"><span data-stu-id="fea90-142">The following illustration shows how you can do this and how the set of parameters of the editable data source is changed.</span></span>

   ![Gennemgang af flere firmaers opslagsdatakilde for typen Formatfasttekst\Opslag](./media/er-lookup-data-sources-img8.gif)

> [!NOTE]
> <span data-ttu-id="fea90-144">Vælg hvert firma separat for at konfigurere regelsættet for denne opslagsdatakilde i det redigerbare ER-format.</span><span class="sxs-lookup"><span data-stu-id="fea90-144">Select every company seperately to configure the set of rules for this lookup data source of the editable ER format.</span></span> <span data-ttu-id="fea90-145">En undtagelse opstår under kørslen, når opslag på tværs af firmaer kaldes med koden for det firma, som opslagsindstillingen ikke er fuldført for.</span><span class="sxs-lookup"><span data-stu-id="fea90-145">An exception is thrown at runtime when the cross-company lookup is called with the code of the company for which the lookup setting was not completed.</span></span>
>
> <span data-ttu-id="fea90-146">Sørg for at give tilladelser til en bruger, der kører ER-formatet med datakilden **Opslag** på tværs af firmaer, for at få adgang til data fra alle de firmaer, der findes i området for denne datakilde.</span><span class="sxs-lookup"><span data-stu-id="fea90-146">Make sure that you grant permissions for a user who runs the ER format with the cross-company **Lookup** data source to access the data of every company that is in scope of this data source.</span></span> <span data-ttu-id="fea90-147">Ellers sker der en undtagelse på kørselstidspunktet.</span><span class="sxs-lookup"><span data-stu-id="fea90-147">Otherwise, an exception is thrown at runtime.</span></span>

<span data-ttu-id="fea90-148">Fra og med version 10.0.19 er de udvidede funktioner i **Opslag**-datakilderne tilgængelige.</span><span class="sxs-lookup"><span data-stu-id="fea90-148">Starting in version 10.0.19, the extended capabilities of the **Lookup** data sources are available.</span></span> <span data-ttu-id="fea90-149">Når du angiver indstillingen **Udvidet** til **Ja** for den opslagsdatakilde, der kan redigeres, konverteres den konfigurerede opslagsdatakilde til den strukturerede datakilde, der indeholder de ekstra egenskaber, så det konfigurerede sæt regler analyseres.</span><span class="sxs-lookup"><span data-stu-id="fea90-149">When you set the **Extended** option to **Yes** for the editable lookup data source, the configured lookup data source is transformed to the structured data source that offers the additional capabilities to analyze the configured set of rules.</span></span> <span data-ttu-id="fea90-150">Følgende illustration viser denne transformation.</span><span class="sxs-lookup"><span data-stu-id="fea90-150">The following illustration shows this transformation.</span></span>

   ![Gennemgang af struktureret opslagsdatakilde for typen Formatfasttekst\Opslag](./media/er-lookup-data-sources-img9.gif)

- <span data-ttu-id="fea90-152">Underelementet **Opslag** er designet som en funktion til at finde den mest relevante regel fra sættet af konfigurerbare regler baseret på de angivne parametre.</span><span class="sxs-lookup"><span data-stu-id="fea90-152">The **Lookup** sub-item is designed as a function to find the most appropriate rule from the set of configurable rules based on the provided set of parameters.</span></span>
- <span data-ttu-id="fea90-153">Underelementet **IsLookupResultSet** er designet som en funktion til at acceptere den angivne værdi af den grundlæggende fasttekstdatakilde og returnere den *Booleske* værdi af **Sand**, når regelsættet indeholder mindst én regel, som den angivne fasttekstværdi er konfigureret som en returværdi for.</span><span class="sxs-lookup"><span data-stu-id="fea90-153">The **IsLookupResultSet** sub-item is designed as a function to accept the provided value of the base enumeration data source and return the *Boolean* value of **True** when the set of rules contain at least one rule for which the provided enumeration value was configured as a returned value.</span></span> <span data-ttu-id="fea90-154">Denne funktion returnerer den *Booleske* værdi af **Falsk**, når der ikke er konfigureret regler for returnering af den angivne fasttekstværdi.</span><span class="sxs-lookup"><span data-stu-id="fea90-154">This function returns the *Boolean* value of **False** when there are no rules configured to return the provided enumeration value.</span></span>
- <span data-ttu-id="fea90-155">Underelementet **Indstilling** er designet som en funktion, der returnerer sættet med konfigurerede regler som poster på en postliste.</span><span class="sxs-lookup"><span data-stu-id="fea90-155">The **Setting** sub-item is designed as a function that returns the set of configured rules as records of a record list.</span></span> <span data-ttu-id="fea90-156">De returnerede værdier og parametersættet i de konfigurerede regler præsenteres i alle returnerede poster som felter af de relevante datatyper:</span><span class="sxs-lookup"><span data-stu-id="fea90-156">The returned values and the set of parameters of the configured rules are presented in every returned record as fields of the relevant data types:</span></span>

    - <span data-ttu-id="fea90-157">Den returnerede værdi vises som feltet **Opslagsresultat**.</span><span class="sxs-lookup"><span data-stu-id="fea90-157">The returned value is presented as the **Lookup result** field.</span></span>
    - <span data-ttu-id="fea90-158">De konfigurerede parametre vises som felter med navne på parametre (**Kode**-felt i dette eksempel).</span><span class="sxs-lookup"><span data-stu-id="fea90-158">The configured parameters are presented as fields having names of parameters (**Code** field in this example).</span></span>

<span data-ttu-id="fea90-159">Du kan finde flere oplysninger om, hvordan du konfigurerer **Opslag**-datakilden, i [Konfigurere ER-formater til at bruge parametre, der er angivet for hver juridiske enhed](er-app-specific-parameters-configure-format.md).</span><span class="sxs-lookup"><span data-stu-id="fea90-159">For more information about to how configure the **Lookup** data source, see [Configure ER formats to use parameters that are specified per legal entity](er-app-specific-parameters-configure-format.md).</span></span> <span data-ttu-id="fea90-160">Du kan få mere at vide om, hvordan du konfigurerer opslagsreglerne, i [Konfigurere parametrene for et ER-format pr. juridiske enhed](er-app-specific-parameters-set-up.md).</span><span class="sxs-lookup"><span data-stu-id="fea90-160">To learn how to set the Lookup rules, see [Set up the parameters of an ER format per legal entity](er-app-specific-parameters-set-up.md).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="fea90-161">Yderligere ressourcer</span><span class="sxs-lookup"><span data-stu-id="fea90-161">Additional resources</span></span>

[<span data-ttu-id="fea90-162">Konfigurere ER-formater til at bruge de parametre, der er angivet for den enkelte juridiske enhed</span><span class="sxs-lookup"><span data-stu-id="fea90-162">Configure ER formats to use parameters that are specified per legal entity</span></span>](er-app-specific-parameters-configure-format.md)

[<span data-ttu-id="fea90-163">Konfigurere parametrene for et ER-format for hver juridisk enhed</span><span class="sxs-lookup"><span data-stu-id="fea90-163">Set up the parameters of an ER format per legal entity</span></span>](er-app-specific-parameters-set-up.md)
