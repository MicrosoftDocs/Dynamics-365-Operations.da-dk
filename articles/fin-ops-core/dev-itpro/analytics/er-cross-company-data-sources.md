---
title: Datakilder på tværs af firma i elektronisk rapportering (ER)
description: I dette emne beskrives, hvordan du kan bruge datakilder på tværs af firmaer i elektronisk rapportering (ER).
author: NickSelin
manager: AnnBe
ms.date: 05/25/2018
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERModelMappingDesigner, ERFormatMappingLegalEntityFilterTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-04-01
ms.dyn365.ops.version: Release 8.0
ms.openlocfilehash: 9eee9ba70e800c78622b774d8140b104fa0ad911
ms.sourcegitcommit: 6cb174d1ec8b55946dca4db03d6a3c3f4c6fa2df
ms.translationtype: HT
ms.contentlocale: da-DK
ms.lasthandoff: 03/09/2021
ms.locfileid: "5562256"
---
# <a name="cross-company-data-sources-in-electronic-reporting-er"></a><span data-ttu-id="5b1b4-103">Datakilder på tværs af firma i elektronisk rapportering (ER)</span><span class="sxs-lookup"><span data-stu-id="5b1b4-103">Cross-company data sources in Electronic reporting (ER)</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="5b1b4-104">Du kan designe ER-formater for at oprette udgående dokumenter i forskellige formater.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-104">You can design Electronic reporting (ER) formats to generate outgoing documents in various formats.</span></span> <span data-ttu-id="5b1b4-105">Når et dokument er oprettet, kalder et ER-format datakilder, der er konfigureret i en tilsvarende ER-modeltilknytning.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-105">When a document is generated, an ER format calls data sources that were configured in a corresponding ER model mapping.</span></span> <span data-ttu-id="5b1b4-106">Hvis du vil konfigurere adgang til tabeller i programmet for at hente poster, kan du bruge ER-datakilder af typen **Tabelposter**.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-106">To configure access to application tables for record retrieval, you can use ER data sources of the **Table records** type.</span></span> <span data-ttu-id="5b1b4-107">Når adgangstabellen er en delt tabel (dvs. en tabel, hvor data gemmes uden et firma-id), returnerer datakilden alle poster.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-107">When the accessing table is a shared table (that is, a table where data is saved without a company identifier), this data source returns all records.</span></span> <span data-ttu-id="5b1b4-108">Når adgangstabellen er en firmaafhængig tabel (dvs. en tabel, hvor data gemmes pr. firma), returnerer denne datakilde kun de poster, der er gemt for det aktuelle firma (dvs. den firmakontekst, som ER-formatet kører under).</span><span class="sxs-lookup"><span data-stu-id="5b1b4-108">When the accessing table is a company-dependent table (that is, a table where data is saved per company), this data source returns only the records that have been saved for the current company (that is, the company context that the ER format is running under).</span></span>

<span data-ttu-id="5b1b4-109">Hver datakilde af typen **Tabelposter** i en modeltilknytning kan nu markeres som en datakilde på tværs af firmaer.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-109">Every data source of the **Table records** type in a model mapping can be now marked as a cross-company data source.</span></span> <span data-ttu-id="5b1b4-110">Derfor kan du bruge datakilder af typen **Tabelposter** til at få adgang til data på tværs af firmaer i programtabeller.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-110">Therefore, you can use data sources of the **Table records** type to access cross-company data in application tables.</span></span>

<span data-ttu-id="5b1b4-111">Hvis du markerer en datakilde som værende på tværs af firmaer, bruges følgende funktionsmåde:</span><span class="sxs-lookup"><span data-stu-id="5b1b4-111">If you mark a data source as cross-company, the following behavior occurs:</span></span>

- <span data-ttu-id="5b1b4-112">Hvis en datakilde refererer til en delt tabel undtagen CompanyInfo, returnerer datakilden alle poster, der findes i referencetabellen.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-112">For a data source that refers to any shared table except CompanyInfo, the data source returns all records that exist in the referenced table.</span></span> 
- <span data-ttu-id="5b1b4-113">Hvis en datakilde refererer til tabellen CompanyInfo, også selvom CompanyInfo er en delt tabel, returnerer datakilden de poster, der indeholder identifikatoren for et firma, fra det angivne område.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-113">For a data source that refers to the CompanyInfo table, even though CompanyInfo is a shared table, the data source returns the records that contain the identifier of a company from the defined scope.</span></span>
- <span data-ttu-id="5b1b4-114">Hvis tabellen er firmaafhængig, returnerer datakilden posterne fra den referencetabel, der indeholder id'et for et firma, fra det angivne område.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-114">For any company-dependent table, the data source returns the records of the referenced table that contain the identifier of a company from the defined scope.</span></span>

<span data-ttu-id="5b1b4-115">I dialogboksen til systemforespørgsel, når indstillingen **Spørg efter forespørgsel** er aktiveret for alle datakilder, der er markeret som værende på tværs af firmaer, kan du manuelt vælge et eller flere firmaer, der skal medtages, under fanen **Regnskabsafgrænsning**.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-115">In the system query dialog box, when the **Ask for query** option is turned on for any data source that is marked as cross-company, you can manually select one or more companies to include on the **Company range** tab.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="5b1b4-116">Ligesom andre filtre bevares firmafilteret som den sidste anvendte værdi for forespørgsler, når du kører et ER-format.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-116">Like other filters, the company filter is persisted as a last-used value for queries when you run an ER format.</span></span> <span data-ttu-id="5b1b4-117">Filteret ændres ikke automatisk, hvis du ændrer værdien på tværs af firmaer for en datakilde.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-117">The filter isn't automatically changed if you change the cross-company value for a data source.</span></span> <span data-ttu-id="5b1b4-118">Hvis du vil bruge en anden på tværs af firmaer-værdi til en anden datakilde, skal du slette den tilsvarende brugerspecifikke markering.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-118">To use a different cross-company value for another data source, delete the corresponding user-specific selection.</span></span>

<span data-ttu-id="5b1b4-119">For hver datakilde, der er markeret som værende på tværs af firmaer, kan du vælge de poster, du vil, ved hjælp af **FILTER**- og **WHERE**-funktionerne i ER-udtryk.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-119">For every data source that is marked as cross-company, you can select the records that you want by using the **FILTER** and **WHERE** functions in ER expressions.</span></span> <span data-ttu-id="5b1b4-120">Feltet **dataAreaID** kan også bruges som firma-id.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-120">The **dataAreaID** field can also be used as a company identifier.</span></span> <span data-ttu-id="5b1b4-121">I øjeblikket er feltet **dataAreaID** begrænset til følgende typer betingelser, når **FILTER**-funktionen anvendes:</span><span class="sxs-lookup"><span data-stu-id="5b1b4-121">Currently, the **dataAreaID** field is limited to the following types of conditions when the **FILTER** function is used:</span></span>

- <span data-ttu-id="5b1b4-122">Kun de betingelser, der har en enkelt **dataAreaID**-feltsammenligning, understøttes.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-122">Only conditions that have a single **dataAreaID** field comparison are supported.</span></span>
- <span data-ttu-id="5b1b4-123">Der tillades kun sammenligninger med udtryk, der ikke afhænger af listeelementer i poster.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-123">Only comparisons that have expressions that don't depend on records list items are allowed.</span></span>

<span data-ttu-id="5b1b4-124">Derfor er følgende udtryk gyldigt.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-124">Therefore, the following expression is valid.</span></span>

```ER Expression
FILTER (MyTable, MyTable.dataAreaID = $StringUserInputParameter)
While shown below expressions will not pass the validation:
FILTER (MyTable, MyTable.dataAreaID = MyTable2RecordsList.MyField)
FILTER (MyTable, 
    OR(
        MyTable.dataAreaID = $StringUserInputParameter1,
        MyTable.dataAreaID = $StringUserInputParameter2
    )
)
```

<span data-ttu-id="5b1b4-125">Området indeholder som standard alle firmaer i det aktuelle program.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-125">By default, the scope includes all companies of the current application.</span></span> <span data-ttu-id="5b1b4-126">Det kan dog være begrænset.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-126">However, it can be restricted.</span></span> <span data-ttu-id="5b1b4-127">Du kan begrænse omfanget af dataadgang på tværs af firmaer for et enkelt ER-format ved at tildele et bestemt organisationshierarki til formatet.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-127">To restrict the scope of cross-company data access for a single ER format, assign a specific organization hierarchy to the format.</span></span> <span data-ttu-id="5b1b4-128">Når et hierarki er defineret for et ER-format, returneres kun poster for juridiske enheder, der vises i det tildelte hierarki, selvom formatet kalder datakilder på tværs af firmaer.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-128">When a hierarchy is defined for an ER format, only records for legal entities that are presented in the assigned hierarchy are returned, even though the format calls cross-company data sources.</span></span> <span data-ttu-id="5b1b4-129">Når en reference til et hierarki, der ikke længere findes, er defineret for et ER-format, anvendes standardområdet, og formatet kalder datakilder på tværs af firmaer.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-129">When a reference to a hierarchy that no longer exists is defined for an ER format, the default scope is applied, and the format calls cross-company data sources.</span></span> <span data-ttu-id="5b1b4-130">I denne situation returneres poster for alle firmaer i programmet.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-130">In this situation, records for all application companies are returned.</span></span>

<span data-ttu-id="5b1b4-131">Bemærk, at når indstillingen **Brug kladde** er aktiveret for den tildelte til et enkelt organisationshierarki for ER-formatet, bruges de juridiske enheder fra kladdeversionen af dette hierarki, til at identificere området for datakilder på tværs af firmaer.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-131">Note that when the **Use draft** option is turned on for the assigned to a single ER format organization hierarchy, the legal entities from the draft version of this hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="5b1b4-132">Hvis kladdeversionen ikke findes, bruges de juridiske enheder fra den senest udgivne version af dette organisationshierarki, til denne.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-132">If the draft version does not exist, the legal entities from the last published version of this organization hierarchy will be used for this.</span></span>

<span data-ttu-id="5b1b4-133">Bemærk, at når indstillingen **Brug kladde** er deaktiveret for den tildelte til et enkelt organisationshierarki for ER-formatet, bruges de juridiske enheder fra den senest udgivne version af dette organisationshierarki, til at identificere området for datakilder på tværs af firmaer.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-133">Note that when the **Use draft** option is turned off for the assigned to a single ER format organization hierarchy, the legal entities from the last published version of this organization hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="5b1b4-134">Ikrafttrædelsesdatoer for organisationshierarkier understøttes endnu ikke i ER-strukturen.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-134">Date effectiveness of organization hierarchies is not supported yet in the ER framework.</span></span>

<span data-ttu-id="5b1b4-135">Hierarkiet kan tildeles til et format på en bestemt side, der kan åbnes fra ER-arbejdsområdet eller ved hjælp af menupunktet **Virksomhedsadministration \> \> Elektronisk rapportering** Filter med juridisk enhed for formater.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-135">The hierarchy can be assigned to a format in a specific page that can be accessed from the ER workspace or by using the **Organization administration \> Electronic reporting \> Legal entity filter for formats** menu item.</span></span> <span data-ttu-id="5b1b4-136">For at få adgang til siden skal rettigheden **Vedligehold filtre med juridisk enhed for formater** (ERMaintainFormatMappingLegalEntityFilters) være tildelt til en bruger.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-136">To access the page, the **Maintain legal entity filters for format** privilege (ERMaintainFormatMappingLegalEntityFilters) must be granted to a user.</span></span> <span data-ttu-id="5b1b4-137">Områdebegrænsningen for hierarkibaserede juridiske enheder for formatet anvendes sammen med den begrænsning, som brugeren manuelt kan angive i dialogboksen til systemforespørgsler.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-137">The scope restriction of hierarchy-based legal entities for the format is applied in addition to the restriction that the user can manually specify in the system query dialog box.</span></span> <span data-ttu-id="5b1b4-138">Skæringspunktet mellem disse begrænsninger bruges, når formatet køres.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-138">The intersection of these restrictions is used when the format is run.</span></span>

<span data-ttu-id="5b1b4-139">Hvis du vil vide mere om denne funktion, kan du afspille opgaveguiden **ER Åbne poster for firmaafhængige tabeller i en tilstand på tværs af firmaer**, som er en del af forretningsprocessen 7.5.4.3 Anskaffe/udarbejde komponenter til it-servicer og -løsninger (10677), og som kan hentes fra [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span><span class="sxs-lookup"><span data-stu-id="5b1b4-139">To learn more about this feature, play the task guide, **ER Access records of company dependent tables in cross-company mode**, which is part of the 7.5.4.3 Acquire/Develop IT service/solution components (10677) business process, and can be downloaded from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span></span> <span data-ttu-id="5b1b4-140">Denne opgaveguide fører dig gennem processen med at konfigurere en ER-modeltilknytning og et ER-format for at få adgang til programtabeller i på tværs af firmaer-tilstand.</span><span class="sxs-lookup"><span data-stu-id="5b1b4-140">This task guide walks you through the process of configuring an ER model mapping and ER format to access application tables in cross-company mode.</span></span>

<span data-ttu-id="5b1b4-141">Hent følgende filer for at fuldføre opgaveguiden:</span><span class="sxs-lookup"><span data-stu-id="5b1b4-141">Download the following files to complete the task guide:</span></span>

- [<span data-ttu-id="5b1b4-142">ER-modelkonfiguration - CrossCompanyDataAccessModel.xml</span><span class="sxs-lookup"><span data-stu-id="5b1b4-142">ER model configuration - CrossCompanyDataAccessModel.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)
- [<span data-ttu-id="5b1b4-143">ER-formatkonfiguration - CrossCompanyDataAccessFormat.xml</span><span class="sxs-lookup"><span data-stu-id="5b1b4-143">ER format configuration - CrossCompanyDataAccessFormat.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]