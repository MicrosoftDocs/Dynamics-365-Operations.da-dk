---
title: Formeldesigner i elektronisk rapportering (ER)
description: Dette emne indeholder oplysninger om brugen af formeldesigneren i elektronisk rapportering (ER).
author: NickSelin
manager: kfend
ms.date: 12/05/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.custom: 58771
ms.assetid: 24223e13-727a-4be6-a22d-4d427f504ac9
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 1384307182e44fe7771ad6244eca6784434827f1
ms.sourcegitcommit: 6cb174d1ec8b55946dca4db03d6a3c3f4c6fa2df
ms.translationtype: HT
ms.contentlocale: da-DK
ms.lasthandoff: 03/09/2021
ms.locfileid: "5568745"
---
# <a name="formula-designer-in-electronic-reporting-er"></a><span data-ttu-id="5a772-103">Formeldesigner i elektronisk rapportering (ER)</span><span class="sxs-lookup"><span data-stu-id="5a772-103">Formula designer in Electronic reporting (ER)</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="5a772-104">Dette emne beskriver, hvordan du bruger formeldesigneren i elektronisk rapportering (ER).</span><span class="sxs-lookup"><span data-stu-id="5a772-104">This topic explains how to use the formula designer in Electronic reporting (ER).</span></span> <span data-ttu-id="5a772-105">Når du designer et format til et bestemt elektronisk dokument i ER, kan du bruge formler til at transformere data, så de opfylder kravene til dokumentets udførelse og formatering.</span><span class="sxs-lookup"><span data-stu-id="5a772-105">When you design a format for a specific electronic document in ER, you can use formulas to transform data so that it meets the requirements for the document's fulfillment and formatting.</span></span> <span data-ttu-id="5a772-106">Disse formler ligner formler i Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="5a772-106">These formulas resemble formulas in Microsoft Excel.</span></span> <span data-ttu-id="5a772-107">Forskellige typer funktioner understøttes i formlerne: tekst, dato og klokkeslæt, matematisk logik, oplysninger samt funktioner til konvertering af datatypen og også andre forretningsdomænespecifikke funktioner.</span><span class="sxs-lookup"><span data-stu-id="5a772-107">Various types of functions are supported in the formulas: text, date and time, mathematical, logical, information, and data type conversion functions, and also other, business domain–specific functions.</span></span>

## <a name="formula-designer-overview"></a><span data-ttu-id="5a772-108">Oversigt over formeldesigner</span><span class="sxs-lookup"><span data-stu-id="5a772-108">Formula designer overview</span></span>

<span data-ttu-id="5a772-109">Elektronisk rapportering (ER) understøtter formeldesigneren.</span><span class="sxs-lookup"><span data-stu-id="5a772-109">ER supports the formula designer.</span></span> <span data-ttu-id="5a772-110">Derfor kan du på designtidspunktet konfigurere udtryk, der kan bruges til følgende opgaver under kørsel:</span><span class="sxs-lookup"><span data-stu-id="5a772-110">Therefore, at design time, you can configure expressions that can be used for the following tasks at runtime:</span></span>

- <span data-ttu-id="5a772-111">Konverter data, der modtages fra en programdatabase, og som skal angives i en ER-datamodel, der er designet til at være datakilde for ER-formater.</span><span class="sxs-lookup"><span data-stu-id="5a772-111">Transform data that is received from an application database and that should be entered in an ER data model that is designed to be a data source for ER formats.</span></span> <span data-ttu-id="5a772-112">(F.eks. kan disse transformeringer kan omfatte filtrering, gruppering og datatypekonvertering).</span><span class="sxs-lookup"><span data-stu-id="5a772-112">(For example, these transformations might include filtering, grouping, and data type conversion.)</span></span>
- <span data-ttu-id="5a772-113">Formatere de data, der skal sendes til et genereret elektroniske dokument i overensstemmelse med det layout og betingelserne for et bestemt ER-format.</span><span class="sxs-lookup"><span data-stu-id="5a772-113">Format data that must be sent to a generating electronic document in accordance with the layout and conditions of a specific ER format.</span></span> <span data-ttu-id="5a772-114">(Formatering kan f.eks. udføres i overensstemmelse med det ønskede sprog eller kultur eller kodning).</span><span class="sxs-lookup"><span data-stu-id="5a772-114">(For example, the formatting might be done in accordance with the requested language or culture, or the encoding).</span></span>
- <span data-ttu-id="5a772-115">Styre processen til oprettelse af elektroniske dokumenter.</span><span class="sxs-lookup"><span data-stu-id="5a772-115">Control the process of creating electronic documents.</span></span> <span data-ttu-id="5a772-116">(F.eks. kan udtrykkene aktivere eller deaktivere outputtet af bestemte elementer i formatet, afhængigt af behandlingen af data.</span><span class="sxs-lookup"><span data-stu-id="5a772-116">(For example, the expressions can enable or disable the output of specific elements of the format, depending on processing data.</span></span> <span data-ttu-id="5a772-117">De kan også afbryde processen med oprettelse af dokumentet eller udløse meddelelser til brugere).</span><span class="sxs-lookup"><span data-stu-id="5a772-117">They can also interrupt the document creation process or throw messages to users.)</span></span>

<span data-ttu-id="5a772-118">Du kan åbne siden **Formeldesigner**, når du udfører en af følgende handlinger:</span><span class="sxs-lookup"><span data-stu-id="5a772-118">You can open the **Formula designer** page when you perform any of the following actions:</span></span>

- <span data-ttu-id="5a772-119">Binder datakildeelementer til datamodelkomponenter.</span><span class="sxs-lookup"><span data-stu-id="5a772-119">Bind data source items to data model components.</span></span>
- <span data-ttu-id="5a772-120">Binder datakildeelementer til formatkomponenter.</span><span class="sxs-lookup"><span data-stu-id="5a772-120">Bind data source items to format components.</span></span>
- <span data-ttu-id="5a772-121">Vedligeholder beregnede felter som en del af datakilder.</span><span class="sxs-lookup"><span data-stu-id="5a772-121">Complete maintenance of calculated fields that are part of data sources.</span></span>
- <span data-ttu-id="5a772-122">Definerer synlighedsbetingelser for brugerinputparametre.</span><span class="sxs-lookup"><span data-stu-id="5a772-122">Define the visibility conditions for user input parameters.</span></span>
- <span data-ttu-id="5a772-123">Designer formatets transformeringer.</span><span class="sxs-lookup"><span data-stu-id="5a772-123">Design a format's transformations.</span></span>
- <span data-ttu-id="5a772-124">Definerer aktivering af betingelserne for formatets komponenter.</span><span class="sxs-lookup"><span data-stu-id="5a772-124">Define the enabling conditions for the format's components.</span></span>
- <span data-ttu-id="5a772-125">Definerer filnavne til formatets FILE-komponenter.</span><span class="sxs-lookup"><span data-stu-id="5a772-125">Define the file names for the format's FILE components.</span></span>
- <span data-ttu-id="5a772-126">Definerer betingelserne for proceskontrolvalideringer.</span><span class="sxs-lookup"><span data-stu-id="5a772-126">Define the conditions for process control validations.</span></span>
- <span data-ttu-id="5a772-127">Definerer meddelelsestekst for proceskontrolvalideringer.</span><span class="sxs-lookup"><span data-stu-id="5a772-127">Define the message text for process control validations.</span></span>

## <a name="data-binding"></a><a name="Binding"></a><span data-ttu-id="5a772-128">Databinding</span><span class="sxs-lookup"><span data-stu-id="5a772-128">Data binding</span></span>

<span data-ttu-id="5a772-129">ER-formeldesigneren kan bruges til at definere et udtryk, der transformerer data, der er modtaget fra datakilder, så data kan angives i dataforbrugeren på følgende måde på kørselstidspunktet:</span><span class="sxs-lookup"><span data-stu-id="5a772-129">The ER formula designer can be used to define an expression that transforms data that is received from data sources, so that the data can be entered in the data consumer in the following ways at runtime:</span></span>

- <span data-ttu-id="5a772-130">Fra programdatakilder og kørselsparametre til en ER-datamodel</span><span class="sxs-lookup"><span data-stu-id="5a772-130">From application data sources and runtime parameters to an ER data model</span></span>
- <span data-ttu-id="5a772-131">Fra en ER-datamodel til et ER-format</span><span class="sxs-lookup"><span data-stu-id="5a772-131">From an ER data model to an ER format</span></span>
- <span data-ttu-id="5a772-132">Fra programdatakilder og kørselsparametre til et ER-format</span><span class="sxs-lookup"><span data-stu-id="5a772-132">From application data sources and runtime parameters to an ER format</span></span>

<span data-ttu-id="5a772-133">I følgende illustration vises et udtryk af denne type design.</span><span class="sxs-lookup"><span data-stu-id="5a772-133">The following illustration shows the design of an expression of this type.</span></span> <span data-ttu-id="5a772-134">I dette eksempel afrunder udtrykket værdien af feltet **Intrastat.AmountMST** i Intrastat-tabellen til to decimaler og returnerer den afrundede værdi.</span><span class="sxs-lookup"><span data-stu-id="5a772-134">In this example, the expression rounds the value of the **Intrastat.AmountMST** field in the Intrastat table to two decimal places and then returns the rounded value.</span></span>

<span data-ttu-id="5a772-135">[![Udtrykket databinding](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span><span class="sxs-lookup"><span data-stu-id="5a772-135">[![Data binding expression](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span></span>

<span data-ttu-id="5a772-136">I følgende illustration vises, hvordan et udtryk af denne type kan bruges.</span><span class="sxs-lookup"><span data-stu-id="5a772-136">The following illustration shows how an expression of this type can be used.</span></span> <span data-ttu-id="5a772-137">I dette eksempel er resultatet af det designede udtryk angivet i **Transaction.InvoicedAmount**-komponenten af **momsrapporteringsmodellen**.</span><span class="sxs-lookup"><span data-stu-id="5a772-137">In this example, the result of the designed expression is entered in the **Transaction.InvoicedAmount** component of the **Tax reporting model** data model.</span></span>

<span data-ttu-id="5a772-138">[![Udtrykket databinding anvendes](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span><span class="sxs-lookup"><span data-stu-id="5a772-138">[![Data binding expression being used](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span></span>

<span data-ttu-id="5a772-139">På kørselstidspunktet afrunder den designede formel `ROUND (Intrastat.AmountMST, 2)` værdien af feltet **AmountMST** for hver post i Intrastattabellen til to decimaler.</span><span class="sxs-lookup"><span data-stu-id="5a772-139">At runtime, the designed formula, `ROUND (Intrastat.AmountMST, 2)`, rounds the value of the **AmountMST** field for each record in the Intrastat table to two decimal places.</span></span> <span data-ttu-id="5a772-140">Den indsætter derefter den afrundede værdi i komponenten **Transaction.InvoicedAmount** i datamodellen **Momsrapportering**.</span><span class="sxs-lookup"><span data-stu-id="5a772-140">It then enters the rounded value in the **Transaction.InvoicedAmount** component of the **Tax reporting** data model.</span></span>

## <a name="data-formatting"></a><a name="Transformation"></a><span data-ttu-id="5a772-141">Dataformatering</span><span class="sxs-lookup"><span data-stu-id="5a772-141">Data formatting</span></span>

<span data-ttu-id="5a772-142">ER-formeldesigneren kan bruges til at definere et udtryk, der formaterer data, der er modtaget fra datakilder, så data kan sendes som en del af det genererende elektroniske dokument.</span><span class="sxs-lookup"><span data-stu-id="5a772-142">The ER formula designer can be used to define an expression that formats data that is received from data sources, so that the data can be sent as part of the generating electronic document.</span></span> <span data-ttu-id="5a772-143">Du har muligvis formatering, der skal anvendes som en typisk regel, der skal genbruges til et format.</span><span class="sxs-lookup"><span data-stu-id="5a772-143">You might have formatting that must be applied as a typical rule that should be reused for a format.</span></span> <span data-ttu-id="5a772-144">I så fald kan du introducere denne formatering én gang i formatkonfigurationen, som en navngivet transformering, der har et formateringsudtryk.</span><span class="sxs-lookup"><span data-stu-id="5a772-144">In this case, you can introduce that formatting one time in the format configuration, as a named transformation that has a formatting expression.</span></span> <span data-ttu-id="5a772-145">Denne navngivne transformation kan sammenkædes med mange formatkomponenter, hvor outputtet skal været formateret i henhold til det formateringsudtryk, du oprettede.</span><span class="sxs-lookup"><span data-stu-id="5a772-145">This named transformation can then be linked to many format components where the output must be formatted according to the formatting expression that you created.</span></span>

<span data-ttu-id="5a772-146">I følgende illustration vises designet af en transformation af denne type.</span><span class="sxs-lookup"><span data-stu-id="5a772-146">The following illustration shows the design of a transformation of this type.</span></span> <span data-ttu-id="5a772-147">Dette eksempel på **TrimmedString**-transformation afkorter indgående data i af datatypen *Streng* ved at fjerne foranstillede og efterstillede mellemrum.</span><span class="sxs-lookup"><span data-stu-id="5a772-147">In this example, the **TrimmedString** transformation truncates incoming data of the *String* data type by removing leading and trailing spaces.</span></span> <span data-ttu-id="5a772-148">Derefter returneres den afkortede strengværdi.</span><span class="sxs-lookup"><span data-stu-id="5a772-148">It then returns the truncated string value.</span></span>

<span data-ttu-id="5a772-149">[![Transformation](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span><span class="sxs-lookup"><span data-stu-id="5a772-149">[![Transformation](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span></span>

<span data-ttu-id="5a772-150">I følgende illustration vises, hvordan en transformation af denne type kan bruges.</span><span class="sxs-lookup"><span data-stu-id="5a772-150">The following illustration shows how a transformation of this type can be used.</span></span> <span data-ttu-id="5a772-151">I dette eksempel sender flere komponenter tekst som output til det generere elektroniske dokument på kørselstidspunktet.</span><span class="sxs-lookup"><span data-stu-id="5a772-151">In this example, several format components send text as output to the generating electronic document at runtime.</span></span> <span data-ttu-id="5a772-152">Alle disse formatkomponenter refererer til transformationen **TrimmedString** efter navn.</span><span class="sxs-lookup"><span data-stu-id="5a772-152">All these format components refer to the **TrimmedString** transformation by name.</span></span>

<span data-ttu-id="5a772-153">[![Transformation, der bruges](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span><span class="sxs-lookup"><span data-stu-id="5a772-153">[![Transformation being used](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span></span>

<span data-ttu-id="5a772-154">Når formatkomponenter refererer til **TrimmedString-**-transformation (for eksempel **partyName**-komponenten i den foregående illustration), sendes tekst som output for at generere det elektroniske dokument.</span><span class="sxs-lookup"><span data-stu-id="5a772-154">When format components, such as the **partyName** component in the preceding illustration, refer to the **TrimmedString** transformation, the transformation sends text as output to the generating electronic document.</span></span> <span data-ttu-id="5a772-155">Denne tekst indeholder ikke foranstillede eller efterstillede mellemrum.</span><span class="sxs-lookup"><span data-stu-id="5a772-155">This text doesn't include leading and trailing spaces.</span></span>

<span data-ttu-id="5a772-156">Hvis du har en formatering, der skal anvendes individuelt, kan den indføres som et individuelt udtryk for binding af en bestemt formatkomponent.</span><span class="sxs-lookup"><span data-stu-id="5a772-156">If you have formatting that must be applied individually, you can introduce that formatting as an individual expression of a binding of a specific format component.</span></span> <span data-ttu-id="5a772-157">I følgende illustration vises et udtryk af denne type.</span><span class="sxs-lookup"><span data-stu-id="5a772-157">The following illustration shows an expression of this type.</span></span> <span data-ttu-id="5a772-158">I dette eksempel er **partyType**-formatkomponenten bundet til datakilden via et udtryk, der konverterer indgående data fra feltet **Model.Company.RegistrationType** i datakilden til stor bogstavtekst.</span><span class="sxs-lookup"><span data-stu-id="5a772-158">In this example, the **partyType** format component is bound to the data source via an expression that converts incoming data from the **Model.Company.RegistrationType** field in the data source to uppercase text.</span></span> <span data-ttu-id="5a772-159">Udtrykket sender derefter teksten som output til det elektroniske dokument.</span><span class="sxs-lookup"><span data-stu-id="5a772-159">The expression then sends that text as output to the electronic document.</span></span>

<span data-ttu-id="5a772-160">[![Anvende formatering på en enkelt komponent](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span><span class="sxs-lookup"><span data-stu-id="5a772-160">[![Applying formatting to an individual component](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span></span>

## <a name="process-flow-control"></a><a name="Validation"></a><span data-ttu-id="5a772-161">Kontrol af procesforløb</span><span class="sxs-lookup"><span data-stu-id="5a772-161">Process flow control</span></span>

<span data-ttu-id="5a772-162">ER-formeldesigneren kan bruges til at definere udtryk, der styrer procesforløbet under generering af elektroniske dokumenter.</span><span class="sxs-lookup"><span data-stu-id="5a772-162">The ER formula designer can be used to define expressions that control the process flow of generating electronic documents.</span></span> <span data-ttu-id="5a772-163">Du kan udføre følgende opgaver:</span><span class="sxs-lookup"><span data-stu-id="5a772-163">You can perform the following tasks:</span></span>

- <span data-ttu-id="5a772-164">Definer betingelser, der bestemmer, hvornår en proces til oprettelse af dokumentet skal stoppes.</span><span class="sxs-lookup"><span data-stu-id="5a772-164">Define conditions that determine when a document creation process must be stopped.</span></span>
- <span data-ttu-id="5a772-165">Angiv udtryk, der opretter enten meddelelser til slutbrugeren om stoppede processer eller udløser en kørselslogbesked om, at processen fortsætter med oprettelse af rapporter.</span><span class="sxs-lookup"><span data-stu-id="5a772-165">Specify expressions that either create messages for the user about stopped processes or throw execution log messages about the continuing process of report generation.</span></span>
- <span data-ttu-id="5a772-166">Angiv filnavne til oprettelse af elektroniske dokumenter, og kontrollér betingelserne for deres oprettelse.</span><span class="sxs-lookup"><span data-stu-id="5a772-166">Specify the file names of generating electronic documents, and control the conditions of their creation.</span></span>

<span data-ttu-id="5a772-167">Hver regel i kontrol af procesforløb udformet som en enkelt validering.</span><span class="sxs-lookup"><span data-stu-id="5a772-167">Each rule of the process flow control is designed as an individual validation.</span></span> <span data-ttu-id="5a772-168">I følgende illustration vises en validering af denne type.</span><span class="sxs-lookup"><span data-stu-id="5a772-168">The following illustration shows a validation of this type.</span></span> <span data-ttu-id="5a772-169">Her er en forklaring af konfigurationen i dette eksempel:</span><span class="sxs-lookup"><span data-stu-id="5a772-169">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="5a772-170">Valideringen evalueres, når **INSTAT**-noden oprettes under generering af XML-filen.</span><span class="sxs-lookup"><span data-stu-id="5a772-170">The validation is evaluated when the **INSTAT** node is created during generation of the XML file.</span></span>
- <span data-ttu-id="5a772-171">Hvis listen over transaktioner er tom, stopper valideringen kørselsprocessen og returnerer **FALSE**.</span><span class="sxs-lookup"><span data-stu-id="5a772-171">If the list of transactions is empty, the validation stops the execution process and returns **FALSE**.</span></span>
- <span data-ttu-id="5a772-172">Valideringen returnerer en fejlmeddelelse, der indeholder teksten til etiketten for SYS70894 på brugerens foretrukne sprog.</span><span class="sxs-lookup"><span data-stu-id="5a772-172">The validation returns an error message that includes the text of label SYS70894 in the user's preferred language.</span></span>

<span data-ttu-id="5a772-173">[![Validering](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span><span class="sxs-lookup"><span data-stu-id="5a772-173">[![Validation](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span></span>

<span data-ttu-id="5a772-174">ER-formeldesigneren bruges også til at generere et filnavn til et genererende elektronisk dokument og til at styre processen til oprettelse af en fil.</span><span class="sxs-lookup"><span data-stu-id="5a772-174">The ER formula designer can also be used to generate a file name for a generating electronic document and to control the file creation process.</span></span> <span data-ttu-id="5a772-175">I følgende illustration vises designet af en kontrol af procesforløb af denne type.</span><span class="sxs-lookup"><span data-stu-id="5a772-175">The following illustration shows the design of a process flow control of this type.</span></span> <span data-ttu-id="5a772-176">Her er en forklaring af konfigurationen i dette eksempel:</span><span class="sxs-lookup"><span data-stu-id="5a772-176">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="5a772-177">Listen over poster fra datakilden **model. Intrastat-** er opdelt i batches.</span><span class="sxs-lookup"><span data-stu-id="5a772-177">The list of records from the **model.Intrastat** data source is divided into batches.</span></span> <span data-ttu-id="5a772-178">Hver batch indeholder op til 1000 poster.</span><span class="sxs-lookup"><span data-stu-id="5a772-178">Each batch contains up to 1,000 records.</span></span>
- <span data-ttu-id="5a772-179">Output opretter en zip-fil, der indeholder en fil i XML-format for hver batch, der blev oprettet.</span><span class="sxs-lookup"><span data-stu-id="5a772-179">The output creates a zip file that contains one file in XML format for every batch that was created.</span></span>
- <span data-ttu-id="5a772-180">Et udtryk returnerer et filnavn til generering af elektroniske dokumenter ved at sammenkæde filnavnet og filtypenavnet.</span><span class="sxs-lookup"><span data-stu-id="5a772-180">An expression returns a file name for generating electronic documents by concatenating the file name and the file name extension.</span></span> <span data-ttu-id="5a772-181">For den anden batch og alle efterfølgende batches indeholder filnavnet batch-ID som et suffiks.</span><span class="sxs-lookup"><span data-stu-id="5a772-181">For the second batch and all subsequent batches, the file name contains the batch ID as a suffix.</span></span>
- <span data-ttu-id="5a772-182">Et udtryk aktiverer (returnerer **TRUE**) processen med en filoprettelse for de eneste batches, der indeholder mindst én post.</span><span class="sxs-lookup"><span data-stu-id="5a772-182">An expression enables (by returning **TRUE**) the file creation process for batches that contain at least one record.</span></span>

<span data-ttu-id="5a772-183">[![Kontrol af procesforløb](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span><span class="sxs-lookup"><span data-stu-id="5a772-183">[![Process flow control](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span></span>

## <a name="document-content-control"></a><a name="Enabled"></a><span data-ttu-id="5a772-184">Kontrol af dokumentindhold</span><span class="sxs-lookup"><span data-stu-id="5a772-184">Document content control</span></span>

<span data-ttu-id="5a772-185">ER-formeldesigneren kan bruges til at konfigurere udtryk, der styrer, hvilke data der indgår i genererede elektroniske dokumenter på kørselstidspunktet.</span><span class="sxs-lookup"><span data-stu-id="5a772-185">The ER formula designer can be used to configure expressions that control what data will be put into generated electronic documents at runtime.</span></span> <span data-ttu-id="5a772-186">Udtrykkene kan aktivere eller deaktivere outputtet af bestemte elementer i formatet, afhængigt af behandlingen af data og den konfigurerede logik.</span><span class="sxs-lookup"><span data-stu-id="5a772-186">The expressions can enable or disable the output of specific elements of the format, depending on processing data and configured logic.</span></span> <span data-ttu-id="5a772-187">Disse udtryk kan angives for et enkelt formatelement i feltet **Aktiveret** under fanen **Tilknytning** på siden **Operationsdesigner**.</span><span class="sxs-lookup"><span data-stu-id="5a772-187">These expressions can be entered for a single format element in the **Enabled** field on the **Mapping** tab of the **Operations designer** page.</span></span> <span data-ttu-id="5a772-188">Du kan angive udtrykkene som en logik betingelse, der returnerer en *Boolesk* værdi:</span><span class="sxs-lookup"><span data-stu-id="5a772-188">You can enter the expressions as a logic condition that returns a *Boolean* value:</span></span>

- <span data-ttu-id="5a772-189">Hvis betingelsen returnerer **Sand**, køres det aktuelle formatelement.</span><span class="sxs-lookup"><span data-stu-id="5a772-189">If the condition returns **True**, the current format element is run.</span></span>
- <span data-ttu-id="5a772-190">Hvis betingelsen returnerer **Falsk**, springes det aktuelle formatelement over.</span><span class="sxs-lookup"><span data-stu-id="5a772-190">If the condition returns **False**, the current format element is skipped.</span></span>

<span data-ttu-id="5a772-191">I følgende illustration vises udtryk af denne type.</span><span class="sxs-lookup"><span data-stu-id="5a772-191">The following illustration shows expressions of this type.</span></span> <span data-ttu-id="5a772-192">(Version 11.12.11 af formatkonfigurationen **ISO20022-kreditoverførsel (nr.)**, der leveres af Microsoft, bruges som eksempel.) Formatkomponenten **XMLheader** er konfigureret til at beskrive strukturen i kreditoverførselsmeddelelsen i henhold til ISO20022 XML-meddelelsesstandarderne.</span><span class="sxs-lookup"><span data-stu-id="5a772-192">(Version 11.12.11 of the **ISO20022 Credit transfer (NO)** format configuration that is provided by Microsoft is used as an example.) The **XMLHeader** format component is configured to describe the structure of the credit transfer message according to the ISO 20022 XML message standards.</span></span> <span data-ttu-id="5a772-193">Formatkomponenten **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** er konfigureret til at føje **Ustrd**-XML-elementet til den genererede meddelelse, og til at placere remitteringsoplysningerne i et ustruktureret format som tekst i følgende XML-elementer:</span><span class="sxs-lookup"><span data-stu-id="5a772-193">The **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** format component is configured to add the **Ustrd** XML element to the generated message and to put the remittance information in an unstructured format as text of the following XML elements:</span></span>

- <span data-ttu-id="5a772-194">**PaymentNotes**-komponenten bruges til at generere tekst på betalingsnoter.</span><span class="sxs-lookup"><span data-stu-id="5a772-194">The **PaymentNotes** component is used to generate the text of payment notes.</span></span>
- <span data-ttu-id="5a772-195">**DelimitedSequence**-komponenten genererer kommaseparerede fakturanumre, der bruges til at afstemme den aktuelle kreditoverførsel.</span><span class="sxs-lookup"><span data-stu-id="5a772-195">The **DelimitedSequence** component generates comma-separated invoice numbers that are used to settle the current credit transfer.</span></span>

<span data-ttu-id="5a772-196">[![Komponenterne PaymentNotes and DelimitedSequence](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span><span class="sxs-lookup"><span data-stu-id="5a772-196">[![PaymentNotes and DelimitedSequence components](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="5a772-197">Komponenterne **PaymentNotes** og **DelimitedSequence** er markeret med et spørgsmålstegn.</span><span class="sxs-lookup"><span data-stu-id="5a772-197">The **PaymentNotes** and **DelimitedSequence** components are labeled by using a question mark.</span></span> <span data-ttu-id="5a772-198">Et spørgsmålstegn angiver, at brugen af en komponent er betinget.</span><span class="sxs-lookup"><span data-stu-id="5a772-198">A question mark indicates that the use of a component is conditional.</span></span> <span data-ttu-id="5a772-199">I dette tilfælde er brugen af komponenterne baseret på følgende kriterier:</span><span class="sxs-lookup"><span data-stu-id="5a772-199">In this case, use of the components is based on the following criteria:</span></span>
>
> - <span data-ttu-id="5a772-200">Udtrykket `@.PaymentsNotes <> ""` er defineret for komponeneten **PaymentNote** og gør det muligt at udfylde XML-elementet (ved at returnere **SANDT**) **Ustrd** med teksten for betalingsnoter, hvis teksten til den aktuelle kreditoverførsel ikke er tom.</span><span class="sxs-lookup"><span data-stu-id="5a772-200">The `@.PaymentsNotes <> ""` expression that is defined for the **PaymentNotes** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with the text of payment notes, if that text isn't blank for the current credit transfer.</span></span>
>
>    <span data-ttu-id="5a772-201">[![Udtryk for komponenten PaymentNotes](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span><span class="sxs-lookup"><span data-stu-id="5a772-201">[![Expression for the PaymentNotes component](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span></span>
>
> - <span data-ttu-id="5a772-202">Udtrykket `@.PaymentsNotes = ""`, som er defineret for komponenten **DelimitedSequence**, gør det muligt at udfylde XML-elementet (ved at returnere **SANDT**) **Ustrd** med en kommasepareret liste med fakturanumre, der bruges til at afstemme den aktuelle kreditoverførsel, såfremt teksten på betalingsnoter til denne kreditoverførsel er tom.</span><span class="sxs-lookup"><span data-stu-id="5a772-202">The `@.PaymentsNotes = ""` expression that is defined for the **DelimitedSequence** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with a comma-separated list of the invoice numbers that are used to settle the current credit transfer, if the text of payment notes for that credit transfer is blank.</span></span>
>
>    <span data-ttu-id="5a772-203">[![Udtryk for komponenten DelimitedSequence](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span><span class="sxs-lookup"><span data-stu-id="5a772-203">[![Expression for the DelimitedSequence component](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span></span>
> 
> <span data-ttu-id="5a772-204">Baseret på denne indstilling vil den genererede meddelelse for hver debitorbetaling, XML-elementet **Ustrd**, indeholde enten tekst med betalingsnoter eller, når denne tekst er tom, kommasepareret liste med fakturanumre, som bruges til at afstemme denne betaling.</span><span class="sxs-lookup"><span data-stu-id="5a772-204">Based on this setup, the message that is generated for each debtor payment, the **Ustrd** XML element, will contain either the text of payment notes or, when that text is blank, a comma-separated list of the invoice numbers that are used to settle the payment.</span></span>

## <a name="validation-of-configured-formulas"></a><a name="TestFormula"></a><span data-ttu-id="5a772-205">Validering af konfigurerede formler</span><span class="sxs-lookup"><span data-stu-id="5a772-205">Validation of configured formulas</span></span>

<span data-ttu-id="5a772-206">På siden **Formeldesigner** skal du vælge **Test** for at validere, hvordan den konfigurerede formel fungerer.</span><span class="sxs-lookup"><span data-stu-id="5a772-206">On the **Formula designer** page, select **Test** to validate how the configured formula works.</span></span>

<span data-ttu-id="5a772-207">[![Valg af test til validering af en formel](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span><span class="sxs-lookup"><span data-stu-id="5a772-207">[![Selecting Test to validate a forumula](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span></span>

<span data-ttu-id="5a772-208">Når værdierne for formelargumenter er påkrævede, kan du åbne dialogboksen **Testudtryk** fra siden **Formeldesigner**.</span><span class="sxs-lookup"><span data-stu-id="5a772-208">When the values of formula arguments are required, you can open the **Test expression** dialog box from the **Formula designer** page.</span></span> <span data-ttu-id="5a772-209">I de fleste tilfælde skal disse argumenter defineres manuelt, fordi de konfigurerede bindinger ikke køres på designtidspunktet.</span><span class="sxs-lookup"><span data-stu-id="5a772-209">In most cases, these arguments must be manually defined, because the configured bindings aren't run at design time.</span></span> <span data-ttu-id="5a772-210">Fanen **Testresultat** på siden **Formeldesigner** viser resultatet fra kørslen af den konfigurerede formel.</span><span class="sxs-lookup"><span data-stu-id="5a772-210">The **Test result** tab on the **Formula designer** page shows the result from execution of the configured formula.</span></span>

<span data-ttu-id="5a772-211">Følgende eksempel viser, hvordan du kan teste den formel, der er konfigureret for domænet for udenrigshandel, for at sikre, at Intrastat-varekoden kun indeholder cifre.</span><span class="sxs-lookup"><span data-stu-id="5a772-211">The following example shows how you can test the formula that is configured for the foreign trade domain to make sure that the Intrastat commodity code contains only digits.</span></span>

<span data-ttu-id="5a772-212">Når du tester denne formel, kan du bruge dialogboksen **Testudtryk** til at angive værdien af Intrastat-varekoden til test.</span><span class="sxs-lookup"><span data-stu-id="5a772-212">When you test this formula, you can use the **Test expression** dialog box to specify the value of the Intrastat commodity code for testing.</span></span>

<span data-ttu-id="5a772-213">[![Angiv Intrastat-varekoden til test](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span><span class="sxs-lookup"><span data-stu-id="5a772-213">[![Specifying the Intrastat commodity code for testing](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span></span>

<span data-ttu-id="5a772-214">Når du har angivet Intrastat-varekoden og valgt **OK**, viser fanen **Testresultater** på siden **Formeldesigner** resultatet af kørslen af den konfigurerede formel.</span><span class="sxs-lookup"><span data-stu-id="5a772-214">After you specify the Intrastat commodity code and select **OK**, the **Test result** tab on the **Formula designer** page shows the result of execution of the configured formula.</span></span> <span data-ttu-id="5a772-215">Du kan derefter vurdere, om resultatet er acceptabelt.</span><span class="sxs-lookup"><span data-stu-id="5a772-215">You can then evaluate whether the result is acceptable.</span></span> <span data-ttu-id="5a772-216">Hvis resultatet ikke er acceptabelt, kan du opdatere formlen og teste den igen.</span><span class="sxs-lookup"><span data-stu-id="5a772-216">If the result isn't acceptable, you can update the formula and test it again.</span></span>

<span data-ttu-id="5a772-217">[![Testresultat](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span><span class="sxs-lookup"><span data-stu-id="5a772-217">[![Test result](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span></span>

<span data-ttu-id="5a772-218">Nogle formler kan ikke testes på designtidspunktet.</span><span class="sxs-lookup"><span data-stu-id="5a772-218">Some formulas can't be tested at design time.</span></span> <span data-ttu-id="5a772-219">For eksempel kan en formel returnere et resultat af en datatype, der ikke kan vises under fanen **Testresultater**. I dette tilfælde får du vist en fejlmeddelelse, der anfører, at formlen ikke kan testes.</span><span class="sxs-lookup"><span data-stu-id="5a772-219">For example, a formula might return a result of a data type that can't be shown on the **Test result** tab. In this case, you receive an error message that states that the formula can't be tested.</span></span>

<span data-ttu-id="5a772-220">[![Fejlmeddelelse](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span><span class="sxs-lookup"><span data-stu-id="5a772-220">[![Error message](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="5a772-221">Yderligere ressourcer</span><span class="sxs-lookup"><span data-stu-id="5a772-221">Additional resources</span></span>

- [<span data-ttu-id="5a772-222">Oversigt over elektronisk rapportering</span><span class="sxs-lookup"><span data-stu-id="5a772-222">Electronic Reporting overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="5a772-223">Formelsprog i elektronisk rapportering</span><span class="sxs-lookup"><span data-stu-id="5a772-223">Electronic reporting formula language</span></span>](er-formula-language.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]