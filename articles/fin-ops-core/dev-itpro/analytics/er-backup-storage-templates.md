---
title: Sikkerhedskopilager til ER-skabeloner
description: I dette emne forklares det, hvordan du bruger sikkerhedskopilageret for elektroniske rapporter (ER) til genoprettelse af skabeloner.
author: NickSelin
manager: AnnBe
ms.date: 04/29/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERWorkspace, ERSolutionTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Operations
ms.custom: 27621
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-08-13
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: 2e399290153c2c63ac1c02f0f9cdb956ff5031e5
ms.sourcegitcommit: 5de75c61c33e57c813944f1ab6100aceb020d432
ms.translationtype: HT
ms.contentlocale: da-DK
ms.lasthandoff: 04/29/2020
ms.locfileid: "3321660"
---
# <a name="backup-storage-of-er-templates"></a><span data-ttu-id="d387b-103">Sikkerhedskopilager til ER-skabeloner</span><span class="sxs-lookup"><span data-stu-id="d387b-103">Backup storage of ER templates</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="d387b-104">[Oversigten over Elektronisk rapportering (ER)](general-electronic-reporting.md) gør det muligt for erhversbrugere at konfigurere formater for udgående dokumenter i overensstemmelse med de lovgivningsmæssige krav i forskellige lande og områder.</span><span class="sxs-lookup"><span data-stu-id="d387b-104">The [Electronic reporting (ER) overview](general-electronic-reporting.md) lets business users configure formats for outbound documents according to the legal requirements of various countries and regions.</span></span> <span data-ttu-id="d387b-105">Konfigurerede ER-formater kan bruge foruddefinerede skabeloner til at oprette udgående dokumenter i forskellige formater, f.eks. Microsoft Excel-projektmapper, Microsoft Word-dokumenter eller PDF-dokumenter.</span><span class="sxs-lookup"><span data-stu-id="d387b-105">Configured ER formats can use predefined templates to generate outbound documents in various formats, such as Microsoft Excel workbooks, Microsoft Word documents, or PDF documents.</span></span> <span data-ttu-id="d387b-106">Skabelonerne er fyldt med data, som det konfigurerede dataflow til genererede dokumenter kræver.</span><span class="sxs-lookup"><span data-stu-id="d387b-106">The templates are filled with data that the configured dataflow for generated documents requires.</span></span>

<span data-ttu-id="d387b-107">Hvert konfigureret format kan udgives som en del af en ER-løsning.</span><span class="sxs-lookup"><span data-stu-id="d387b-107">Each configured format can be published as part of an ER solution.</span></span> <span data-ttu-id="d387b-108">Hver ER-løsning kan eksporteres fra én forekomst af Finance and Operations og importeres til en anden forekomst.</span><span class="sxs-lookup"><span data-stu-id="d387b-108">Each ER solution can be exported from one instance of Finance and Operations and imported into another instance.</span></span>

<span data-ttu-id="d387b-109">ER-strukturen bruger [Konfigurere dokumentstyring](../../fin-ops/organization-administration/configure-document-management.md) til at bevare de krævede skabeloner for den aktuelle Finance and Operations-forekomst.</span><span class="sxs-lookup"><span data-stu-id="d387b-109">The ER framework uses the [Configure document management](../../fin-ops/organization-administration/configure-document-management.md) to keep the required templates for the current Finance and Operations instance.</span></span> <span data-ttu-id="d387b-110">Afhængigt af indstillingerne for ER-strukturen kan der vælges et Microsoft Azure Blob-lager eller en Microsoft SharePoint-mappe som fysisk primær lagringslokation for skabeloner.</span><span class="sxs-lookup"><span data-stu-id="d387b-110">Depending on the settings of the ER framework, Microsoft Azure Blob storage or a Microsoft SharePoint folder can be selected as the physical primary storage location for templates.</span></span> <span data-ttu-id="d387b-111">(Yderligere oplysninger finder du under [Konfigurer den Elektroniske rapporteringsstruktur (ER)](electronic-reporting-er-configure-parameters.md).) Tabellen DocuValue indeholder en individuel post for hver skabelon.</span><span class="sxs-lookup"><span data-stu-id="d387b-111">(For more information, see [Configure the Electronic reporting (ER) framework](electronic-reporting-er-configure-parameters.md).) The DocuValue table holds an individual record for each template.</span></span> <span data-ttu-id="d387b-112">I hver post indeholder feltet **AccessInformation** stien til en skabelonfil, der er placeret på den konfigurerede lagerlokation.</span><span class="sxs-lookup"><span data-stu-id="d387b-112">In each record, the **AccessInformation** field stores the path of a template file that is located in the configured storage location.</span></span>

<span data-ttu-id="d387b-113">Når du administrerer dine Finance and Operations-forekomster, kan du vælge at flytte den aktuelle forekomst til en anden lokation.</span><span class="sxs-lookup"><span data-stu-id="d387b-113">When you manage your Finance and Operations instances, you might decide to migrate the current instance to another location.</span></span> <span data-ttu-id="d387b-114">Du kan f.eks. flytte produktionsforekomsten til et nyt sandkassemiljø.</span><span class="sxs-lookup"><span data-stu-id="d387b-114">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="d387b-115">Hvis du har konfigureret ER-strukturen til at gemme skabeloner i blob-lageret, henviser DocuValue-tabellen i det nye sandkassemiljø til forekomsten af blob-lager i produktionsmiljøet.</span><span class="sxs-lookup"><span data-stu-id="d387b-115">If you configured the ER framework to store templates in Blob storage, the DocuValue table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="d387b-116">Men der er ikke adgang til denne forekomst fra sandkassemiljøet, fordi overførselsprocessen ikke understøtter overflytning af artefakter i blob-lageret.</span><span class="sxs-lookup"><span data-stu-id="d387b-116">However, this instance can't be accessed from the sandbox environment, because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="d387b-117">Hvis du derfor forsøger at køre et ER-format, der bruger en skabelon til at generere forretningsdokumenter, indtræffer der en undtagelse, og du får besked om den manglende skabelon.</span><span class="sxs-lookup"><span data-stu-id="d387b-117">Therefore, if you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="d387b-118">Du bliver også guidet til at bruge ER-oprydningsværktøjet til at slette og derefter importere den ER-formatkonfiguration, der indeholder skabelonen, igen.</span><span class="sxs-lookup"><span data-stu-id="d387b-118">You're also guided to use the ER cleanup tool to delete and then re-import the ER format configuration that contains the template.</span></span> <span data-ttu-id="d387b-119">Da du kan have flere ER-formatkonfigurationer, kan denne proces være tidskrævende.</span><span class="sxs-lookup"><span data-stu-id="d387b-119">Because you might have several ER format configurations, this process can be time consuming.</span></span>

<span data-ttu-id="d387b-120">Funktionen sikkerhedskopilager for ER-skabeloner kan hjælpe dig med at oprette dine skabeloner, så de altid er tilgængelige til oprettelse af forretningsdokumenter.</span><span class="sxs-lookup"><span data-stu-id="d387b-120">The Backup storage of ER templates feature can help you make your templates so that they are always available to generate business documents.</span></span>

> [!NOTE]
> <span data-ttu-id="d387b-121">Denne funktion kan kun bruges, når blob-lagerstedet er valgt som fysisk lagerplacering for ER-skabeloner.</span><span class="sxs-lookup"><span data-stu-id="d387b-121">This feature can be used only when Blob storage has been selected as the physical storage location for ER templates.</span></span>

## <a name="automated-recovery-and-notification"></a><span data-ttu-id="d387b-122">Automatiseret genoprettelse og besked</span><span class="sxs-lookup"><span data-stu-id="d387b-122">Automated recovery and notification</span></span>

<span data-ttu-id="d387b-123">I forbindelse med denne funktion gemmes hver skabelon for en ny ER-formatkonfiguration i det aktuelle miljø automatisk på sikkerhedskopiens lagerplacering for skabeloner (ERDocuDatabaseStorage-databasetabellen), når følgende hændelser indtræffer:</span><span class="sxs-lookup"><span data-stu-id="d387b-123">For this feature, every template of a new ER format configuration in the current environment is automatically saved to the backup storage location for templates (the ERDocuDatabaseStorage database table) when the following events occur:</span></span>

- <span data-ttu-id="d387b-124">Du importerer en ny ER-formatkonfiguration, der indeholder en skabelon.</span><span class="sxs-lookup"><span data-stu-id="d387b-124">You import a new ER format configuration that contains a template.</span></span>
- <span data-ttu-id="d387b-125">Du fuldfører kladdeversionen af en ER-formatkonfiguration, der indeholder en skabelon.</span><span class="sxs-lookup"><span data-stu-id="d387b-125">You complete the draft version of an ER format configuration that contains a template.</span></span>

<span data-ttu-id="d387b-126">Sikkerhedskopier af skabeloner overflyttes til en ny forekomst af Finance and Operations som en del af programdatabasen.</span><span class="sxs-lookup"><span data-stu-id="d387b-126">Backup copies of templates are migrated to a new instance of Finance and Operations as part of the application database.</span></span>

<span data-ttu-id="d387b-127">Hvis der kræves en skabelon med et ER-format til generering af udgående dokumenter til at behandle leverandørbetalinger, herunder generering af betalingsadviseringer og kontrolrapporter, men den ønskede skabelon ikke findes på den primære lagringsplacering, indtræffer følgende hændelser:</span><span class="sxs-lookup"><span data-stu-id="d387b-127">If a template of an ER format is required for generation of outbound documents, to process vendor payments including generation of payment advice and control reports, for example, but the required template isn't found in the primary storage location, the following events occur:</span></span>

- <span data-ttu-id="d387b-128">Hvis skabelonen er tilgængelig på lagerstedets sikkerhedskopiplacering, hentes den automatisk fra sikkerhedskopiplaceringen, gendannes til den primære lagringsplacering og bruges til den aktuelle kørsel.</span><span class="sxs-lookup"><span data-stu-id="d387b-128">If the template is available in the backup storage location, it is automatically taken from the backup storage location, restored to the primary storage location, and used for the current execution.</span></span>
- <span data-ttu-id="d387b-129">Alle brugere, der er tildelt rollen som **Udvikler til elektronisk rapportering** eller **Systemadministrator**, får besked om det manglende skabelonproblem via Handlingscenter.</span><span class="sxs-lookup"><span data-stu-id="d387b-129">Every user who is assigned to the **Electronic reporting developer** or **System administrator** role is notified about the missing template issue through the Action center.</span></span> <span data-ttu-id="d387b-130">Den viste meddelelse afhænger af værdien i parameteren **Kør automatisk proceduren for gendannelse af de brudte skabeloner i batch**:</span><span class="sxs-lookup"><span data-stu-id="d387b-130">The message that appears depends on the value of the **Automatically run the procedure of restoring the broken templates in batch** parameter:</span></span>

    - <span data-ttu-id="d387b-131">Hvis denne parameter er angivet til **Fra**, anbefaler meddelelsen, at du starter batchprocessen for automatisk at løse lignende problemer for andre ER-formatkonfigurationsskabeloner.</span><span class="sxs-lookup"><span data-stu-id="d387b-131">If this parameter is set to **Off**, the message recommends that you start the batch process to automatically fix similar issues for other ER format configuration templates.</span></span> <span data-ttu-id="d387b-132">Meddelelsen indeholder et link, som du kan bruge til at starte batchprocessen.</span><span class="sxs-lookup"><span data-stu-id="d387b-132">The message includes a link that you can use to start the batch process.</span></span>
    - <span data-ttu-id="d387b-133">Hvis denne parameter er angivet til **Til**, giver meddelelsen dig besked om, at der er fundet et problem med manglende skabeloner, og at en ny batchproces, **Gendan brudte skabeloner fra intern databasesikkerhedskopi**, automatisk er planlagt.</span><span class="sxs-lookup"><span data-stu-id="d387b-133">If this parameter is set to **On**, the message notifies you that a missing templates issue has been discovered, and that a new batch process, **Restore broken templates from internal database backup**, has been automatically scheduled.</span></span> <span data-ttu-id="d387b-134">Denne batchproces retter automatisk lignende problemer i forbindelse med andre skabeloner.</span><span class="sxs-lookup"><span data-stu-id="d387b-134">This batch process will automatically fix similar issues for other templates.</span></span>

<span data-ttu-id="d387b-135">Hvis du vil opsætte parameteren **Kør automatisk proceduren for gendannelse af de brudte skabeloner i batch**, skal du fuldføre følgende trin:</span><span class="sxs-lookup"><span data-stu-id="d387b-135">To set up the he **Automatically run the procedure of restoring the broken templates in batch** parameter, complete the following steps:</span></span>

1. <span data-ttu-id="d387b-136">I Finance and Operations skal du åbne siden **Organisationsadministration \> Elektronisk rapportering \> Konfigurationer**.</span><span class="sxs-lookup"><span data-stu-id="d387b-136">In Finance and Operations, open the **Organization administration \> Electronic reporting \> Configurations page**.</span></span>
2. <span data-ttu-id="d387b-137">På siden **Konfigurationer** i handlingsruden skal du under fanen **Konfigurationer** i gruppen **Avancerede indstillinger** vælge **Brugerparametre**.</span><span class="sxs-lookup"><span data-stu-id="d387b-137">On the **Configurations** page, on the Action Pane, on the **Configurations** tab, in the **Advanced settings** group, select **User parameters**.</span></span>
3. <span data-ttu-id="d387b-138">I dialogboksen **Brugerparametre** skal du angive den påkrævede værdi for parameteren **Kør automatisk proceduren for gendannelse af de brudte skabeloner i batch**.</span><span class="sxs-lookup"><span data-stu-id="d387b-138">In the **User parameters** dialog box, set the required value for the **Automatically run the procedure of restoring the broken templates in batch** parameter.</span></span>

> [!NOTE]
> <span data-ttu-id="d387b-139">Denne parameter er defineret som programbruger og logføres firmaspecifikt.</span><span class="sxs-lookup"><span data-stu-id="d387b-139">This parameter is defined as application user and logged company specific.</span></span>

![Siden ER-konfigurationer](./media/GER-BackupTemplates-1.png)

<span data-ttu-id="d387b-141">I følgende illustration vises et eksempel på den meddelelse, der vises, når parameteren **Kør automatisk proceduren for gendannelse af de brudte skabeloner i batch** er angivet til **Til**.</span><span class="sxs-lookup"><span data-stu-id="d387b-141">The following illustration shows an example of the message that appears when the **Automatically run the procedure of restoring the broken templates in batch** parameter is set to **On**.</span></span>

![Siden Kreditorbetalingskladde](./media/GER-BackupTemplates-2.png)

<span data-ttu-id="d387b-143">Følgende illustration viser batchprocessen **Gendan brudte skabeloner fra intern databasesikkerhedskopi** på siden **Batchjob**.</span><span class="sxs-lookup"><span data-stu-id="d387b-143">The following illustration shows the **Restore broken templates from internal database backup** batch process on the **Batch job** page.</span></span>

![Siden Batchjob](./media/GER-BackupTemplates-3.png)

<span data-ttu-id="d387b-145">Udførelsesloggen for den fuldførte batchproces **Gendan brudte skabeloner fra intern databasesikkerhedskopi** indeholder oplysninger om de skabeloner, der er blevet gendannet fra sikkerhedskopiplaceringen til det primære lagringssted.</span><span class="sxs-lookup"><span data-stu-id="d387b-145">The execution log of the completed **Restore broken templates from internal database backup** batch process includes information about the templates that have been restored from the backup storage location to the primary storage location.</span></span>

![Siden Batchjobhistorik](./media/GER-BackupTemplates-4.png)

<span data-ttu-id="d387b-147">Processen til automatisk oprettelse af sikkerhedskopier af skabeloner, der er placeret i ER-formatkonfigurationer, er som standard aktiveret.</span><span class="sxs-lookup"><span data-stu-id="d387b-147">By default, the process of automatically creating backup copies of templates that reside in ER format configurations is turned on.</span></span> <span data-ttu-id="d387b-148">Hvis du ikke længere vil oprette sikkerhedskopier af skabeloner, skal du angive indstillingen **Stop med at oprette sikkerhedskopier af skabelon** til **Ja** under fanen **Vedhæftede filer** på siden **Parametre til elektronisk rapportering**.</span><span class="sxs-lookup"><span data-stu-id="d387b-148">To stop making backup copies of templates, set the **Stop making backup copies of template** option to **Yes** on the **Attachments** tab of the **Electronic reporting parameters** page.</span></span> <span data-ttu-id="d387b-149">Du kan åbne denne side fra arbejdsområdet **Elektronisk rapportering**.</span><span class="sxs-lookup"><span data-stu-id="d387b-149">You can open this page from the **Electronic reporting** workspace.</span></span>

<span data-ttu-id="d387b-150">Hvis du angiver indstillingen **Stop med at oprette sikkerhedskopier af skabeloner** til **Ja** og ikke vil beholde de sikkerhedskopier, der tidligere er oprettet af skabeloner, skal du vælge **Ryd op i sikkerhedskopilager** på siden **Parametre til elektronisk rapportering**.</span><span class="sxs-lookup"><span data-stu-id="d387b-150">If you set the **Stop making backup copies of templates** option to **Yes** and don't want to keep the backup copies that were previously made of templates, select **Clean up backup storage** on the **Electronic reporting parameters** page.</span></span>

<span data-ttu-id="d387b-151">Hvis du har opgraderet miljøet til Finance and Operations version 10.0.5 (oktober 2019) og vil overflytte til et nyt miljø, der indeholder ER-formatkonfigurationer, der kan køres, skal du vælge **Udfyld sikkerhedskopilager** på siden **Parametre til elektronisk rapportering**, før overførslen sker.</span><span class="sxs-lookup"><span data-stu-id="d387b-151">If you upgraded your environment to Finance and Operations version 10.0.5 (October 2019) and want to migrate to a new environment that includes ER format configurations that can be run, select **Fill in backup storage** on the **Electronic reporting parameters** page before the migration occurs.</span></span> <span data-ttu-id="d387b-152">Denne knap starter processen med at tage sikkerhedskopier af alle tilgængelige skabeloner, så de kan gemmes på ER-sikkerhedskopiplaceringen for skabeloner.</span><span class="sxs-lookup"><span data-stu-id="d387b-152">This button starts the process of making backup copies of all available templates, so that they can be stored in the ER backup storage location for templates.</span></span>

![Siden Parametre til elektronisk rapportering](./media/GER-BackupTemplates-5.png)

## <a name="manual-recovery"></a><span data-ttu-id="d387b-154">Manuel gendannelse</span><span class="sxs-lookup"><span data-stu-id="d387b-154">Manual recovery</span></span>

<span data-ttu-id="d387b-155">Gå til **Organisationsadministration** \> **Elektronisk rapportering** \> **Gendan brudte skabeloner** for at starte processen med at gendanne ER-skabeloner fra sikkerhedskopiplaceringen til den primære lagerplacering.</span><span class="sxs-lookup"><span data-stu-id="d387b-155">Go to **Organization administration** \> **Electronic reporting** \> **Restore broken templates** to manually initiate the process of restoring ER templates from the backup storage location to the primary storage location.</span></span> <span data-ttu-id="d387b-156">Før du starter denne proces kan du på siden **Gendan brudte skabeloner** angive, om den skal udføres interaktivt, eller om batchprocessen skal planlægges for dette.</span><span class="sxs-lookup"><span data-stu-id="d387b-156">Before you start this process, on the **Restore broken templates** page you can specify whether it will be performed interactively, or the batch process will be scheduled for this.</span></span>

## <a name="supported-deployments"></a><span data-ttu-id="d387b-157">Understøttede installationer</span><span class="sxs-lookup"><span data-stu-id="d387b-157">Supported deployments</span></span>

<span data-ttu-id="d387b-158">I Finance and Operations version 10.0.5 er funktionen Sikkerhedskopilager til ER-skabeloner kun tilgængelig i skyinstallationer.</span><span class="sxs-lookup"><span data-stu-id="d387b-158">In Finance and Operations version 10.0.5, the Backup storage of ER templates feature is available only in cloud deployments.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="d387b-159">Yderligere ressourcer</span><span class="sxs-lookup"><span data-stu-id="d387b-159">Additional resources</span></span>

[<span data-ttu-id="d387b-160">Oversigt over elektronisk rapportering (ER)</span><span class="sxs-lookup"><span data-stu-id="d387b-160">Electronic reporting (ER) overview</span></span>](general-electronic-reporting.md)

[<span data-ttu-id="d387b-161">Konfigurer den Elektroniske rapporteringsstruktur (ER)</span><span class="sxs-lookup"><span data-stu-id="d387b-161">Configure the Electronic reporting (ER) framework</span></span>](electronic-reporting-er-configure-parameters.md)
