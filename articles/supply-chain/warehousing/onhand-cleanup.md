---
title: Job til oprydning i disponible poster til lokationsstyring
description: Dette emne beskriver jobbet til oprydning i disponible poster, som hjælper med at forbedre systemets ydeevne ved at identificere og slette relaterede, men unødvendige poster.
author: perlynne
manager: tfehr
ms.date: 04/23/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: SysOperationTemplateForm
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2020-04-03
ms.dyn365.ops.version: Release 10.0.12
ms.openlocfilehash: 9d01c577fc33564d3517d242e9b01f73cc8e079c
ms.sourcegitcommit: a36a4f9915ae3eb36bf8220111cf1486387713d9
ms.translationtype: HT
ms.contentlocale: da-DK
ms.lasthandoff: 10/16/2020
ms.locfileid: "4015935"
---
# <a name="warehouse-management-on-hand-entries-cleanup-job"></a><span data-ttu-id="ec7f9-103">Job til oprydning i disponible poster til lokationsstyring</span><span class="sxs-lookup"><span data-stu-id="ec7f9-103">Warehouse management on-hand entries cleanup job</span></span>

<span data-ttu-id="ec7f9-104">Ydeevnen af forespørgsler, der bruges til at beregne den disponible lagerbeholdning, påvirkes af antallet af poster i de tabeller, der er involveret.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-104">The performance of queries that are used to calculate on-hand inventory is affected by the number of records in the tables that are involved.</span></span> <span data-ttu-id="ec7f9-105">Én måde at forbedre ydeevnen på er at reducere antallet af poster, som databasen skal overveje.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-105">One way to help improve the performance is to reduce the number of records that the database must consider.</span></span>

<span data-ttu-id="ec7f9-106">Dette emne beskriver jobbet til oprydning i disponible poster, som sletter unødvendige poster i tabellerne InventSum og WHSInventReserve.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-106">This topic describes the on-hand entries cleanup job, which deletes unneeded records in the InventSum and WHSInventReserve tables.</span></span> <span data-ttu-id="ec7f9-107">Disse tabeller bruges til opbevaring af beholdningsoplysninger for varer, der er aktiveret til behandling i lokationstyring.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-107">These tables store on-hand information for items that are enabled for warehouse management processing.</span></span> <span data-ttu-id="ec7f9-108">(Disse varer kaldes WHS-varer). Sletning af disse poster kan forbedre ydeevnen for beregninger af den disponible lagerbeholdning betydeligt.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-108">(These items are referred to as WHS items.) Deletion of these records can significantly improve the performance of on-hand calculations.</span></span>

## <a name="what-the-cleanup-job-does"></a><span data-ttu-id="ec7f9-109">Dette gør oprydningsjobbet</span><span class="sxs-lookup"><span data-stu-id="ec7f9-109">What the cleanup job does</span></span>

<span data-ttu-id="ec7f9-110">Jobbet til opryding i disponible poster sletter eventuelle poster i tabellen WHSInventReserve og InventSum, hvor alle feltværdier er *0* (nul).</span><span class="sxs-lookup"><span data-stu-id="ec7f9-110">The on-hand entries cleanup job deletes any records in the WHSInventReserve and InventSum tables where all the field values are *0* (zero).</span></span> <span data-ttu-id="ec7f9-111">Disse poster kan slettes, fordi de ikke bidrager til oplysninger om den disponible lagerbeholdning.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-111">These records can be deleted because they don't contribute to the on-hand information.</span></span> <span data-ttu-id="ec7f9-112">Jobbet sletter kun poster, der er under **Lokations** -niveauet.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-112">The job deletes only records that are below the **Location** level.</span></span>

<span data-ttu-id="ec7f9-113">Hvis negativt fysisk lager er tilladt, kan oprydningsjobbet måske ikke slette alle de relevante poster.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-113">If negative physical inventory is allowed, the cleanup job might not be able to delete all the relevant entries.</span></span> <span data-ttu-id="ec7f9-114">Grunden til denne begrænsning er, at jobbet skal tillade et særligt scenarie, hvor en nummerplade har flere serienumre, og et af disse serienumre er blevet negative.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-114">The reason for this limitation is that the job must allow for a special scenario where a license plate has multiple serial numbers, and one of those serial numbers has become negative.</span></span> <span data-ttu-id="ec7f9-115">For eksempel vil systemet blive sat til nul disponibel på nummerpladeniveau, når en nummerplade har +1 stk. af serienummer 1 og -1 stk. af serienummer 2.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-115">For example, the system will have zero on hand at the license plate level when a license plate has +1 pcs of serial number 1 and –1 pcs of serial number 2.</span></span> <span data-ttu-id="ec7f9-116">I dette særlige scenarie foretager jobbet en bredde-først-sletning, hvor det forsøger at slette fra lavere niveauer først.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-116">For this special scenario, the job does a breadth-first deletion, where it tries to delete from lower levels first.</span></span>

## <a name="schedule-and-configure-the-cleanup-job"></a><span data-ttu-id="ec7f9-117">Planlægge og konfigurere odprydningsjobbet</span><span class="sxs-lookup"><span data-stu-id="ec7f9-117">Schedule and configure the cleanup job</span></span>

<span data-ttu-id="ec7f9-118">Oprydningsjobbet for disponible poster finder du i **Lagerstyring \> Periodiske opgaver \> Oprydning \> Oprydning i disponible poster til lokationsstyring**.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-118">The on-hand entries cleanup job is available at **Inventory management \> Periodic tasks \> Clean up \> Warehouse management on-hand entries cleanup**.</span></span> <span data-ttu-id="ec7f9-119">Brug standardindstillingerne for jobbet til at styre omfanget af og planen for kørsel af jobbet.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-119">Use the standard job settings to control the scope and schedule for running the job.</span></span> <span data-ttu-id="ec7f9-120">Desuden findes der følgende indstillinger:</span><span class="sxs-lookup"><span data-stu-id="ec7f9-120">In addition, the following settings are provided:</span></span>

- <span data-ttu-id="ec7f9-121">**Slet, hvis der ikke er opdateret i så mange dage** – Angiv det mindste antal dage, jobbet skal vente, før det sletter en disponibel post, der er faldet til nul antal.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-121">**Delete if not updated for this many days** – Enter the minimum number of days that the job should wait before it deletes an on-hand entry that has dropped to zero quantity.</span></span> <span data-ttu-id="ec7f9-122">Brug denne indstilling til at reducere risikoen for at slette de disponible poster, der stadig bruges.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-122">Use this setting to help reduce the risk of deleting on-hand entries that are still being used.</span></span> <span data-ttu-id="ec7f9-123">Hvis oprydningen skal finde sted så hurtigt som muligt, skal du enten indtaste *0* (nul) eller lade feltet være tomt.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-123">If you want cleanup to occur as soon as possible, either enter *0* (zero) or leave the field blank.</span></span>
- <span data-ttu-id="ec7f9-124">**Maksimal kørselstid (timer)** – Angiv den maksimale kørselstid for oprydningsjobbet i timer.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-124">**Maximum execution time (hours)** – Enter the maximum execution time of the cleanup job, in hours.</span></span> <span data-ttu-id="ec7f9-125">Hvis jobbet ikke fuldføres indenfor dette tidsrum, gemmes det arbejde, det har fuldført indtil nu, og lukkes derefter.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-125">If the job isn't completed before this time passes, it will save the work that it has completed so far and then close itself.</span></span> <span data-ttu-id="ec7f9-126">Denne funktion er især relevant for implementeringer, der krævet stort lager.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-126">This capability is especially relevant for implementations that have high inventory use.</span></span> <span data-ttu-id="ec7f9-127">I disse tilfælde bør du planlægge, at jobbet skal køres på tidspunkter, hvor systembelastningen er så lille som muligt.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-127">In these cases, you should schedule the job to run at times when the system load is as light as possible.</span></span> <span data-ttu-id="ec7f9-128">Hvis du vil have, at batchjobbet skal fortsætte med at køre, indtil det er fuldført, skal du enten indtaste *0* (nul) eller lade feltet være tomt.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-128">If you want the batch job to continue to run until it's completed, either enter *0* (zero) or leave the field blank.</span></span> <span data-ttu-id="ec7f9-129">Denne indstilling er kun tilgængelig, hvis den relaterede funktion er [aktiveret i systemet](#max-execution-time).</span><span class="sxs-lookup"><span data-stu-id="ec7f9-129">This setting is available only if the related feature has been [turned on in your system](#max-execution-time).</span></span>

<span data-ttu-id="ec7f9-130">Selvom du kan køre jobbet inden for normal arbejdstid, anbefales det, at du kører det uden for arbejdstiden.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-130">Although you can run the job during regular business hours, we recommend that you run it outside working hours.</span></span> <span data-ttu-id="ec7f9-131">På denne måde er du med til at forhindre konflikter, der kan opstå, hvis en bruger arbejder med en post, der også ryddes op i.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-131">In this way, you help prevent conflicts that can occur if a user is working with a record that is also being cleaned up.</span></span>

<span data-ttu-id="ec7f9-132">Hvis jobbet forsøger at slette en post for en vare, mens den pågældende post bruges af en anden bruger, opstår der en deadlock-fejl for enten oprydningsjobbet eller brugeren.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-132">If the job tries to delete a record for an item while that record is being used by another user, a deadlock error occurs for either the cleanup job or the user.</span></span>

<span data-ttu-id="ec7f9-133">Når jobbet kører, har det en commit size (mængde af reserveret virtuel hukommelse) på 100.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-133">When the job runs, it has a commit size of 100.</span></span> <span data-ttu-id="ec7f9-134">Det vil med andre ord forsøge at "committe" én gang for hver 100-sletning.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-134">In other words, it will try to commit one time for every 100 deletions.</span></span> <span data-ttu-id="ec7f9-135">Men da visse sletninger er sætbaserede, kan der være situationer, hvor der kan slettes mere end 100 poster i samme transaktion.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-135">However, because some deletions are set-based, there might be scenarios where more than 100 records can be deleted in the same transaction.</span></span> <span data-ttu-id="ec7f9-136">Derfor kan låseeskaleringer undertiden stadigvæk forekomme.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-136">Therefore, lock escalations can still sometimes occur.</span></span>

## <a name="possible-user-impact"></a><span data-ttu-id="ec7f9-137">Mulig brugereffekt</span><span class="sxs-lookup"><span data-stu-id="ec7f9-137">Possible user impact</span></span>

<span data-ttu-id="ec7f9-138">Brugere kan blive påvirket, hvis jobbet til oprydning af disponible poster sletter alle poster for et givet niveau (f.eks. nummerpladeniveauet).</span><span class="sxs-lookup"><span data-stu-id="ec7f9-138">Users might be affected if the on-hand entries cleanup job deletes all the records for a given level (such as the license plate level).</span></span> <span data-ttu-id="ec7f9-139">I dette tilfælde kan det ske, at funktionaliteten til visning af dette lager, som tidligere var direkte tilgængelig på nummerpladen, ikke fungerer som forventet, da de relevante disponible poster ikke længere er tilgængelige.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-139">In this case, the functionality for seeing that inventory was previously available on hand at a license plate might not work as expected, because the relevant on-hand entries are no longer available.</span></span> <span data-ttu-id="ec7f9-140">(Denne funktion kontrollerer betingelsen **Antal \<\> 0** i indstillingerne for **Dimensionsvisning** , når brugerne får vist oplysninger om den disponible beholdning.) Den forbedring af ydeevnen, som oprydningsjobbet skal give, skulle dog kompensere for dette mindre funktionalitetstab.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-140">(That functionality checks the condition **Quantity \<\> 0** in the **Dimension display** settings when users view on-hand information.) However, the performance improvement that the cleanup job provides should make up for this small loss in functionality.</span></span>

## <a name="make-the-maximum-execution-time-setting-available"></a><a name="max-execution-time"></a><span data-ttu-id="ec7f9-141">Gøre indstillingen for den maksimale kørselstid tilgængelig</span><span class="sxs-lookup"><span data-stu-id="ec7f9-141">Make the Maximum execution time setting available</span></span>

<span data-ttu-id="ec7f9-142">Som standard er indstillingen for **Maksimal kørselstid** ikke tilgængelig.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-142">By default, the **Maximum execution time** setting isn't available.</span></span> <span data-ttu-id="ec7f9-143">Hvis du vil anvende den, skal du bruge [funktionsstyring](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) for at aktivere den relaterede funktion i systemet.</span><span class="sxs-lookup"><span data-stu-id="ec7f9-143">If you want to use it, you must use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the related feature in your system.</span></span> <span data-ttu-id="ec7f9-144">I arbejdsområdet **Funktionsstyring** vises funktionen på følgende måde:</span><span class="sxs-lookup"><span data-stu-id="ec7f9-144">In the **Feature management** workspace, the feature is listed in the following way:</span></span>

- <span data-ttu-id="ec7f9-145">**Modul:** *Lokationsstyring*</span><span class="sxs-lookup"><span data-stu-id="ec7f9-145">**Module:** *Warehouse management*</span></span>
- <span data-ttu-id="ec7f9-146">**Funktionsnavn:** *Den maksimale kørselstid for job til oprydning i disponible poster til lokationsstyring*</span><span class="sxs-lookup"><span data-stu-id="ec7f9-146">**Feature name:** *Maximum execution time for the warehouse management on-hand entries cleanup job*</span></span>
