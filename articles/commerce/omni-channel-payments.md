---
title: Oversigt over omni-kanalbetalinger
description: Dette emne giver en oversigt over omni-kanalbetalinger i Dynamics 365 Commerce.
author: rubendel
manager: AnnBe
ms.date: 09/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.search.scope: Operations, Retail
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: AX 8.1.3
ms.openlocfilehash: 80eaf36fb382e0ebe0a66383ea17ab76faa07dfa
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: da-DK
ms.lasthandoff: 10/13/2020
ms.locfileid: "4411201"
---
# <a name="omni-channel-payments-overview"></a><span data-ttu-id="b932a-103">Oversigt over omni-kanalbetalinger</span><span class="sxs-lookup"><span data-stu-id="b932a-103">Omni-channel payments overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="b932a-104">Dette emne giver en oversigt over omni-kanalbetalinger i Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="b932a-104">This topic provides an overview of omni-channel payments in Dynamics 365 Commerce.</span></span> <span data-ttu-id="b932a-105">Det indeholder en omfattende liste over understøttede scenarier, oplysninger om funktionalitet, opsætning og fejlfinding samt beskrivelser af nogle typiske problemer.</span><span class="sxs-lookup"><span data-stu-id="b932a-105">It includes a comprehensive list of supported scenarios, information about functionality, setup, and troubleshooting, and descriptions of some typical issues.</span></span>

## <a name="key-terms"></a><span data-ttu-id="b932a-106">Vigtige termer</span><span class="sxs-lookup"><span data-stu-id="b932a-106">Key terms</span></span>

| <span data-ttu-id="b932a-107">Periode</span><span class="sxs-lookup"><span data-stu-id="b932a-107">Term</span></span> | <span data-ttu-id="b932a-108">Beskrivelse</span><span class="sxs-lookup"><span data-stu-id="b932a-108">Description</span></span> |
|---|---|
| <span data-ttu-id="b932a-109">Tokenet</span><span class="sxs-lookup"><span data-stu-id="b932a-109">Token</span></span> | <span data-ttu-id="b932a-110">En datastreng, som en betalingsprocessor har som reference.</span><span class="sxs-lookup"><span data-stu-id="b932a-110">A string of data that a payment processor provides as a reference.</span></span> <span data-ttu-id="b932a-111">Tokens kan repræsentere betalingskortnumre, betalingsgodkendelser og tidligere betalingsregistreringer.</span><span class="sxs-lookup"><span data-stu-id="b932a-111">Tokens can represent payment card numbers, payment authorizations, and previous payment captures.</span></span> <span data-ttu-id="b932a-112">Tokens er vigtige, fordi de er med til at holde følsomme data ude af POS-systemet (Point of Sale).</span><span class="sxs-lookup"><span data-stu-id="b932a-112">Tokens are important because they help keep sensitive data out of the point of sale (POS) system.</span></span> <span data-ttu-id="b932a-113">De kaldes undertiden også *referencer*.</span><span class="sxs-lookup"><span data-stu-id="b932a-113">They are sometimes also referred to as *references*.</span></span> |
| <span data-ttu-id="b932a-114">Korttoken</span><span class="sxs-lookup"><span data-stu-id="b932a-114">Card token</span></span> | <span data-ttu-id="b932a-115">Et token, som en betalingsprocessor leverer med henblik på lagring i POS-systemet.</span><span class="sxs-lookup"><span data-stu-id="b932a-115">A token that a payment processor provides for storage in the POS system.</span></span> <span data-ttu-id="b932a-116">Et korttoken kan kun bruges af den handlende, der modtager det.</span><span class="sxs-lookup"><span data-stu-id="b932a-116">A card token can be used only by the merchant who receives it.</span></span> <span data-ttu-id="b932a-117">Korttokens kaldes undertiden også *kortreferencer*.</span><span class="sxs-lookup"><span data-stu-id="b932a-117">Card tokens are sometimes also referred to as *card references*.</span></span> |
| <span data-ttu-id="b932a-118">Godkendelsestoken</span><span class="sxs-lookup"><span data-stu-id="b932a-118">Authorization (auth) token</span></span> | <span data-ttu-id="b932a-119">Et entydigt id, som en betalingsproces indeholder som en del af det svar, der sendes til et POS-system, når POS-systemet foretager en anmodning om godkendelse.</span><span class="sxs-lookup"><span data-stu-id="b932a-119">A unique ID that a payment process provides as part of the response that it sends to a POS system after the POS system makes an authorization request.</span></span> <span data-ttu-id="b932a-120">Et godkendelsestoken kan bruges senere, hvis processoren kaldes for at udføre handlinger, f.eks. tilbageførsel eller annullering af godkendelsen.</span><span class="sxs-lookup"><span data-stu-id="b932a-120">An authorization token can be used later if the processor is called to perform actions such as reversing or voiding the authorization.</span></span> <span data-ttu-id="b932a-121">Men det bruges ofte til at registrere midler, når en ordre er opfyldt, eller en transaktion afsluttes.</span><span class="sxs-lookup"><span data-stu-id="b932a-121">However, it's most often used to capture funds when an order is fulfilled or a transaction is finalized.</span></span> <span data-ttu-id="b932a-122">Godkendelsestokens kaldes undertiden også *godkendelsesreferencer*.</span><span class="sxs-lookup"><span data-stu-id="b932a-122">Authorization tokens are sometimes also referred to as *authorization references*.</span></span> |
| <span data-ttu-id="b932a-123">Registreringstoken</span><span class="sxs-lookup"><span data-stu-id="b932a-123">Capture token</span></span> | <span data-ttu-id="b932a-124">En reference, som en betalingsprocessor leverer til et POS-system, når en betaling er fuldført eller registreret.</span><span class="sxs-lookup"><span data-stu-id="b932a-124">A reference that a payment processor provides to a POS system when a payment is finalized or captured.</span></span> <span data-ttu-id="b932a-125">Registreringstokenet kan derefter bruges til at henvise til betalingsregistreringen i efterfølgende handlinger, f.eks. refusionsanmodninger.</span><span class="sxs-lookup"><span data-stu-id="b932a-125">The capture token can then be used to reference the payment capture in subsequent operations, such as refund requests.</span></span> | 
| <span data-ttu-id="b932a-126">Der findes ikke et kort</span><span class="sxs-lookup"><span data-stu-id="b932a-126">Card not present</span></span> | <span data-ttu-id="b932a-127">En betegnelse, der henviser til betalingstransaktioner, hvor der ikke bruges et fysisk kort.</span><span class="sxs-lookup"><span data-stu-id="b932a-127">A term that refers to payment transactions where a physical card isn't presented.</span></span> <span data-ttu-id="b932a-128">Disse transaktioner kan f.eks. forekomme i e-handels- eller callcenterscenarier.</span><span class="sxs-lookup"><span data-stu-id="b932a-128">For example, these transactions can occur in e-commerce or call center scenarios.</span></span> <span data-ttu-id="b932a-129">Ved disse transaktioner angives betalingsrelaterede oplysninger manuelt på et e-handelswebsted, i et callcenterflow eller på en POS- eller betalingsterminal.</span><span class="sxs-lookup"><span data-stu-id="b932a-129">For these transactions, the payment-related information is manually entered on an e-commerce website, in a call center flow, or on the POS or payment terminal.</span></span> |
| <span data-ttu-id="b932a-130">Der findes et kort</span><span class="sxs-lookup"><span data-stu-id="b932a-130">Card present</span></span> | <span data-ttu-id="b932a-131">Et udtryk, der henviser til betalingstransaktioner, hvor der vises et fysisk kort, som bruges på en betalingsterminal, der er forbundet til Microsoft Dynamics 365 POS-systemet.</span><span class="sxs-lookup"><span data-stu-id="b932a-131">A term that refers to payment transactions where a physical card is presented and used on a payment terminal that is connected to the Microsoft Dynamics 365 POS system.</span></span> |

## <a name="overview"></a><span data-ttu-id="b932a-132">Overblik</span><span class="sxs-lookup"><span data-stu-id="b932a-132">Overview</span></span>

<span data-ttu-id="b932a-133">Generelt beskriver begrebet *omni-kanalbetalinger* muligheden for at oprette en ordre i én kanal og udføre den i en anden kanal.</span><span class="sxs-lookup"><span data-stu-id="b932a-133">In general, the term *omni-channel payments* describes the ability to create an order in one channel and fulfill it in another channel.</span></span> <span data-ttu-id="b932a-134">Nøglen til understøttelse af omni-kanalbetalinger er at opbevare betalingsoplysninger sammen med resten af ordredetaljerne og derefter bruge disse betalingsoplysninger, når ordren tilbagekaldes eller behandles i en anden kanal.</span><span class="sxs-lookup"><span data-stu-id="b932a-134">The key to omni-channel payment support is preserving payment details together with the rest of the order details, and then using those payment details when the order is recalled or processed in another channel.</span></span> <span data-ttu-id="b932a-135">Et klassisk eksempel er scenariet "Køb online, og afhent i butikken".</span><span class="sxs-lookup"><span data-stu-id="b932a-135">A classic example is the "Buy online, pick up in store" scenario.</span></span> <span data-ttu-id="b932a-136">I dette scenario tilføjes betalingsoplysningerne, når ordren oprettes online.</span><span class="sxs-lookup"><span data-stu-id="b932a-136">In this scenario, the payment details are added when the order is created online.</span></span> <span data-ttu-id="b932a-137">De kaldes derefter ved POS for at debitere kundens betalingskort på afhentningstidspunktet.</span><span class="sxs-lookup"><span data-stu-id="b932a-137">They are then recalled at the POS to charge the customer's payment card at the time of pickup.</span></span> 

<span data-ttu-id="b932a-138">Alle de scenarier, der er beskrevet i dette emne, kan implementeres ved hjælp af standard-SDK'et (Software Development Kit), der leveres med Commerce.</span><span class="sxs-lookup"><span data-stu-id="b932a-138">All the scenarios that are described in this topic can be implemented by using the standard Payments software development kit (SDK) that is provided with Commerce.</span></span> <span data-ttu-id="b932a-139">[Dynamics 365-betalingsconnector til Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) indeholder en out-of-box-implementering af hvert af de scenarier, der beskrives her.</span><span class="sxs-lookup"><span data-stu-id="b932a-139">The [Dynamics 365 Payment Connector for Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) provides an out-of-box implementation of every scenario that is described here.</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="b932a-140">Forudsætninger</span><span class="sxs-lookup"><span data-stu-id="b932a-140">Prerequisites</span></span>

<span data-ttu-id="b932a-141">Alle de scenarie, der beskrives i dette emne, kræver en betalingsconnector, der understøtter omni-kanalbetalinger.</span><span class="sxs-lookup"><span data-stu-id="b932a-141">Every scenario that is described in this topic requires a payment connector that supports omni-channel payments.</span></span> <span data-ttu-id="b932a-142">Adyen out-of-box-connectoren kan også bruges, fordi den understøtter de scenarier, der stilles til rådighed via betalings-SDK'et.</span><span class="sxs-lookup"><span data-stu-id="b932a-142">The out-of-box Adyen connector can also be used, because it supports the scenarios that are made available through the Payments SDK.</span></span> <span data-ttu-id="b932a-143">Yderligere oplysninger om, hvordan du implementerer betalingsconnectorer og om Retail SDK generelt, finder du på [Startside for detail for professionelle it-folk og udviklere](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span><span class="sxs-lookup"><span data-stu-id="b932a-143">For more information about how to implement payment connectors, and about the Retail SDK in general, visit the [Retail for IT pros and developers home page](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span></span>

#### <a name="supported-versions"></a><span data-ttu-id="b932a-144">Understøttede versioner</span><span class="sxs-lookup"><span data-stu-id="b932a-144">Supported versions</span></span>

<span data-ttu-id="b932a-145">De funktioner til omni-kanalbetaling, der er beskrevet i dette emne, blev udgivet som en del af Microsoft Dynamics 365 for Retail version 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="b932a-145">The omni-channel payment capabilities that are described in this topic were released as part of Microsoft Dynamics 365 for Retail version 8.1.3.</span></span> 

#### <a name="card-present-and-card-not-present-connectors"></a><span data-ttu-id="b932a-146">Connectorerne "Der findes et kort" og "Der findes ikke et kort"</span><span class="sxs-lookup"><span data-stu-id="b932a-146">"Card present" and "card not present" connectors</span></span>

<span data-ttu-id="b932a-147">Betalings-SDK'et er baseret på to sæt API'er (Application Programming Interfaces) til betalinger.</span><span class="sxs-lookup"><span data-stu-id="b932a-147">The Payments SDK relies on two sets of application programming interfaces (APIs) for payments.</span></span> <span data-ttu-id="b932a-148">Det første sæt API'er hedder **iPaymentProcessor**.</span><span class="sxs-lookup"><span data-stu-id="b932a-148">The first set of APIs is named **iPaymentProcessor**.</span></span> <span data-ttu-id="b932a-149">Det bruges til at implementere "Der findes ikke et kort"-betalingsconnectorer, der kan bruges i callcentre og med Microsoft Dynamics e-handelsplatformen.</span><span class="sxs-lookup"><span data-stu-id="b932a-149">It's used to implement "card not present" payment connectors that can be used in call centers and with the Microsoft Dynamics e-Commerce platform.</span></span> <span data-ttu-id="b932a-150">Yderligere oplysninger om **iPaymentProcessor**-grænsefladen finder du i dette whitepaper [Implementering af en betalingsconnector og betalingsenhed](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf), som dækker betalinger.</span><span class="sxs-lookup"><span data-stu-id="b932a-150">For more information about the **iPaymentProcessor** interface, see the [Implement a payment connector and a payment device](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) white paper, which covers payments.</span></span> 

<span data-ttu-id="b932a-151">Det andet sæt API'er hedder **iNamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="b932a-151">The second set of APIs is named **iNamedRequestHandler**.</span></span> <span data-ttu-id="b932a-152">Det understøtter implementering af "Der findes et kort"-betalingsintegrationer, der bruger en betalingsterminal.</span><span class="sxs-lookup"><span data-stu-id="b932a-152">It supports the implementation of "card present" payment integrations that use a payment terminal.</span></span> <span data-ttu-id="b932a-153">Du kan finde flere oplysninger om **iNamedRequestHandler**-grænsefladen under [Oprette integration af betaling for en betalingsterminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span><span class="sxs-lookup"><span data-stu-id="b932a-153">For more information about the **iNamedRequestHandler** interface, see [Create a payment integration for a payment terminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span></span> 

### <a name="setup-and-configuration"></a><span data-ttu-id="b932a-154">Installation og konfiguration</span><span class="sxs-lookup"><span data-stu-id="b932a-154">Setup and configuration</span></span>

<span data-ttu-id="b932a-155">Der kræves følgende komponenter og opsætningstrin:</span><span class="sxs-lookup"><span data-stu-id="b932a-155">The following components and setup steps are required:</span></span>

- <span data-ttu-id="b932a-156">**eCommerce-integration** : Der kræves integration med Commerce for at understøtte scenarier, hvor en ordre stammer fra en onlinebutik.</span><span class="sxs-lookup"><span data-stu-id="b932a-156">**eCommerce integration:** An integration with Commerce is required to support scenarios where an order originates in an online storefront.</span></span> <span data-ttu-id="b932a-157">Yderligere oplysninger om SDK'et til Retail E-commerce finder du i [SDK'et (Software Development Kit) til Retail E-commerce](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span><span class="sxs-lookup"><span data-stu-id="b932a-157">For more information about the Retail e-Commerce SDK, see [e-Commerce platform software development kit (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span></span> <span data-ttu-id="b932a-158">I et demomiljø understøtter referencebutikken omni-kanalbetalingsscenarier.</span><span class="sxs-lookup"><span data-stu-id="b932a-158">In a demo environment, the reference storefront supports omni-channel payment scenarios.</span></span> 
- <span data-ttu-id="b932a-159">**Konfiguration af onlinebetalinger:** Konfigurationen af onlinekanalen skal indeholde en betalingsconnector, der er opdateret til at understøtte omni-kanalbetalinger.</span><span class="sxs-lookup"><span data-stu-id="b932a-159">**Online payments configuration:** The setup of the online channel must include a payment connector that has been updated to support omni-channel payments.</span></span> <span data-ttu-id="b932a-160">Alternativt kan der bruges en out-of-box-betalingsconnector.</span><span class="sxs-lookup"><span data-stu-id="b932a-160">Alternatively, the out-of-box payment connector can be used.</span></span> <span data-ttu-id="b932a-161">Du kan finde oplysninger om, hvordan du konfigurerer Adyen-betalingsconnectoren til onlinebutikker, i [Betalingsconnector til Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span><span class="sxs-lookup"><span data-stu-id="b932a-161">For information about how to configure the Adyen payment connector for online stores, see [Adyen payment connector](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span></span> <span data-ttu-id="b932a-162">Ud over de trin til eCommerce-opsætning, der er beskrevet i dette emne, skal indstillingen **Tillad lagring af betalingsoplysninger under e-handel**-parameteren sættes til **True** i indstillingerne for Adyen-connectoren.</span><span class="sxs-lookup"><span data-stu-id="b932a-162">In addition to the eCommerce setup steps that are described in that topic, the **Allow saving payment information in e-commerce** parameter must be set to **True** in the settings for the Adyen connector.</span></span> 
- <span data-ttu-id="b932a-163">**Konfiguration af omni-kanalbetalinger**: Gå i administrationen til **Retail og Commerce \> Konfiguration af hovedkontor \> Parametre \> Delte parametre for Commerce**.</span><span class="sxs-lookup"><span data-stu-id="b932a-163">**Omni-channel payments configuration:** In the back office, go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="b932a-164">Indstil derefter **Brug omni-kanalbetalinger** til **Ja** under fanen **Omni-kanalbetalinger**.</span><span class="sxs-lookup"><span data-stu-id="b932a-164">Then, on the **Omni-channel payments** tab, set the **Use omni-channel payments** option to **Yes**.</span></span> <span data-ttu-id="b932a-165">I Commerce version 10.0.12 og nyere findes denne indstilling i arbejdsområdet **Funktionsstyring**.</span><span class="sxs-lookup"><span data-stu-id="b932a-165">In Commerce versions 10.0.12 and later, this setting is in the **Feature Management** workspace.</span></span> <span data-ttu-id="b932a-166">Vælg funktionen **Omni-kanalbetalinger**, og klik på **Aktivér nu**.</span><span class="sxs-lookup"><span data-stu-id="b932a-166">Select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="b932a-167">**Betalingstjenester:** Callcenteret bruger standardbetalingsconnectoren på siden **Betalingstjenester** til at behandle betalinger.</span><span class="sxs-lookup"><span data-stu-id="b932a-167">**Payment services:** The call center uses the default payment connector on the **Payment services** page to process payments.</span></span> <span data-ttu-id="b932a-168">For at understøtte scenarier som f.eks. "Køb i callcenter, og afhent i butik" skal denne standardbetalingsconnector være Adyen-betalingsconnectoren eller en betalingsconnector, der opfylder implementeringskravene til omni-kanalbetalinger.</span><span class="sxs-lookup"><span data-stu-id="b932a-168">To support scenarios such as "Buy in call center, pick up in store," this default payment connector must be the Adyen payment connector or a payment connector that meets the implementation requirements for omni-channel payments.</span></span>
- <span data-ttu-id="b932a-169">**Autorisationskodetjeneste**: Betalinger via en betalingsterminal skal være konfigureret i oversigtspanelet **Autorisationskodetjeneste** i hardwareprofilen.</span><span class="sxs-lookup"><span data-stu-id="b932a-169">**EFT service:** Payments through a payment terminal must be set up on the **EFT service** FastTab of the hardware profile.</span></span> <span data-ttu-id="b932a-170">Adyen-connectoren understøtter omni-kanalbetalingsscenarier out of the box.</span><span class="sxs-lookup"><span data-stu-id="b932a-170">The Adyen connector supports omni-channel payments scenarios out of the box.</span></span> <span data-ttu-id="b932a-171">Andre betalingsconnectorer, der understøtter **iNamedRequestHandler**-grænsefladen, kan også bruges, hvis de understøtter omni-kanalbetalinger.</span><span class="sxs-lookup"><span data-stu-id="b932a-171">Other payment connectors that support the **iNamedRequestHandler** interface can also be used if they support omni-channel payments.</span></span>
- <span data-ttu-id="b932a-172">**Tilgængelighed af betalingsconnector:** Når en ordre tilbagekaldes, omfatter de betalingsmiddellinjer, der tilbagekaldes sammen med ordren, navnet på den betalingsconnector, der blev brugt til at oprette de godkendelser, der er knyttet til den pågældende ordre.</span><span class="sxs-lookup"><span data-stu-id="b932a-172">**Payment connector availability:** When an order is recalled, the payment tender lines that are recalled together with the order include the name of the payment connector that was used to create the authorizations that are associated with that order.</span></span> <span data-ttu-id="b932a-173">Når ordren er opfyldt, forsøger betalings-SDK'et at bruge den samme connector, som blev brugt til at oprette den oprindelige godkendelse.</span><span class="sxs-lookup"><span data-stu-id="b932a-173">When the order is fulfilled, the Payments SDK tries to use the same connector that was used to create the original authorization.</span></span> <span data-ttu-id="b932a-174">Derfor skal en betalingsconnector med de samme forhandleregenskaber være tilgængelig for registrering.</span><span class="sxs-lookup"><span data-stu-id="b932a-174">Therefore, a payment connector that has the same merchant properties must be available for capture.</span></span> 
- <span data-ttu-id="b932a-175">**Korttyper:** Hvis omni-kanalscenarierne skal fungere korrekt, skal hver kanal have samme opsætning for betalingsmiddeltyper, der kan bruges til omni-kanalen.</span><span class="sxs-lookup"><span data-stu-id="b932a-175">**Card types:** For omni-channel scenarios to work properly, each channel must have the same setup for tender types that can be used for omni-channel.</span></span> <span data-ttu-id="b932a-176">Denne opsætning omfatter betalingsmetode-id'er og korttype-id'er.</span><span class="sxs-lookup"><span data-stu-id="b932a-176">This setup includes payment method IDs and card type IDs.</span></span> <span data-ttu-id="b932a-177">Hvis betalingsmiddeltypen **Kort** f.eks. har id'et **2** i opsætningen af onlinebutikken, skal det have samme id i opsætningen af detailbutikken.</span><span class="sxs-lookup"><span data-stu-id="b932a-177">For example, if the **Cards** tender type has an ID of **2** in the online store setup, it should have the same ID in the retail store setup.</span></span> <span data-ttu-id="b932a-178">Det samme krav gælder for korttype-id'er.</span><span class="sxs-lookup"><span data-stu-id="b932a-178">The same requirement applies to card type IDs.</span></span> <span data-ttu-id="b932a-179">Hvis kortnummer **12** er indstillet til **Visa** i onlinebutikken, skal det samme id defineres for detailbutikken.</span><span class="sxs-lookup"><span data-stu-id="b932a-179">If card number **12** is set to **VISA** in the online store, the same ID should be set up for the retail store.</span></span> 
- <span data-ttu-id="b932a-180">Retail Modern POS til Windows eller Android med indbygget hardwarestation -eller-</span><span class="sxs-lookup"><span data-stu-id="b932a-180">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="b932a-181">Modern POS til iOS eller Cloud POS med tilsluttet delt hardwarestation.</span><span class="sxs-lookup"><span data-stu-id="b932a-181">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

### <a name="basic-principle-supporting-omni-channel-payments"></a><span data-ttu-id="b932a-182">Grundlæggende princip, der understøtter omni-kanalbetalinger</span><span class="sxs-lookup"><span data-stu-id="b932a-182">Basic principle supporting omni-channel payments</span></span>

<span data-ttu-id="b932a-183">Betalingsconnectorer og betalingsprocessorer bruger tokens, eller referencer, til at henvise til de interaktioner, der er relateret til kortbetalinger.</span><span class="sxs-lookup"><span data-stu-id="b932a-183">Payment connectors and payment processors use tokens, or references, to reference interactions that are related to card payments.</span></span> <span data-ttu-id="b932a-184">Når der f.eks. anmodes om en betalingsgodkendelse, gives der en reference til den pågældende godkendelse.</span><span class="sxs-lookup"><span data-stu-id="b932a-184">For example, when a payment authorization is requested, a reference to that authorization is provided.</span></span> <span data-ttu-id="b932a-185">Derfor kan der senere refereres til godkendelsen, når der registreres midler på tidspunktet for opfyldelsen.</span><span class="sxs-lookup"><span data-stu-id="b932a-185">Therefore, the authorization can be referenced later, when funds are captured at the time of fulfillment.</span></span> <span data-ttu-id="b932a-186">Denne godkendelse er entydig for den handlende, betalingsconnectoren og processoren.</span><span class="sxs-lookup"><span data-stu-id="b932a-186">This authorization is unique to the merchant, payment connector, and processor.</span></span> 

<span data-ttu-id="b932a-187">Hvis en ordre, der er oprettet online, plukkes i butikken, skal de samme betalingsoplysninger tilbagekaldes og bruges.</span><span class="sxs-lookup"><span data-stu-id="b932a-187">If an order that was created online is being picked up in the store, the same payment details for that order must be recalled and used.</span></span> <span data-ttu-id="b932a-188">Når de oprindelige oplysninger angives som en del af anmodningen om at registrere en betaling i forhold til den oprindelige godkendelse, vil betalingsprocessoren kunne håndtere anmodningen og registrere betalingen.</span><span class="sxs-lookup"><span data-stu-id="b932a-188">When the original details are provided as part of the request to capture a payment against the original authorization, the payment processor will be able to handle the request and capture the payment.</span></span> 

<span data-ttu-id="b932a-189">For at henvise korrekt til onlineordren skal der også være en "Der findes ikke et kort"-betalingsconnector, der understøtter den samme processor.</span><span class="sxs-lookup"><span data-stu-id="b932a-189">To correctly reference the online order, a "card not present" payment connector that supports the same processor must also be available.</span></span> <span data-ttu-id="b932a-190">På denne måde kan POS-systemet have én processor til "Der findes et kort"-betalinger, men det kan også have adgang til andre betalingsconnectorer, så det kan opfylde ordrer, der oprettes i andre kanaler ved hjælp af andre betalingsprocessorer.</span><span class="sxs-lookup"><span data-stu-id="b932a-190">In this way, the POS system can have one processor for "card present" payments, but it can also have access to other payment connectors so that it can fulfill orders that are created in other channels by using different payment processors.</span></span> 

## <a name="supported-scenarios"></a><span data-ttu-id="b932a-191">Understøttede scenarier</span><span class="sxs-lookup"><span data-stu-id="b932a-191">Supported scenarios</span></span>

<span data-ttu-id="b932a-192">Følgende scenarier til omni-kanalbetaling understøttes:</span><span class="sxs-lookup"><span data-stu-id="b932a-192">The following omni-channel payment scenarios are supported:</span></span>

- <span data-ttu-id="b932a-193">Køb online, afhent i butikken</span><span class="sxs-lookup"><span data-stu-id="b932a-193">Buy online, pick up in store</span></span>
- <span data-ttu-id="b932a-194">Køb i callcenter, og afhent i butik</span><span class="sxs-lookup"><span data-stu-id="b932a-194">Buy in call center, pick up in store</span></span>
- <span data-ttu-id="b932a-195">Køb i butik A, og afhent i butik B</span><span class="sxs-lookup"><span data-stu-id="b932a-195">Buy in store A, pick up in store B</span></span>
- <span data-ttu-id="b932a-196">Køb i butik A, og levér til kunde</span><span class="sxs-lookup"><span data-stu-id="b932a-196">Buy in store A, ship to customer</span></span>

    > [!NOTE]
    > <span data-ttu-id="b932a-197">Betalinger, der foretages i callcenteret, som er knyttet til betalingsfunktionen "Normal", skal markeres som **Forudbetaling** = **Ja**, hvis de skal afspejles i det forfaldne beløb ved tilbagekald af ordren i POS.</span><span class="sxs-lookup"><span data-stu-id="b932a-197">Payments made in the call center that map to the "Normal" payment function must be marked as **Prepay** = **Yes** to be reflected in the amount due when recalling the order in the POS.</span></span> <span data-ttu-id="b932a-198">Ikke-forudbetalte betalinger af typen "Normal" genkendes ikke, når ordren tilbagekaldes i POS.</span><span class="sxs-lookup"><span data-stu-id="b932a-198">Non-prepay payments of type "Normal" are not recognized when the order is recalled in POS.</span></span> 

<span data-ttu-id="b932a-199">Variationer af disse scenarier understøttes også.</span><span class="sxs-lookup"><span data-stu-id="b932a-199">Variations of these scenarios are also supported.</span></span> <span data-ttu-id="b932a-200">En onlineordre kan f.eks. indeholde både linjer, der skal afsendes til kunden, og de linjer, der skal afhentes i en butik.</span><span class="sxs-lookup"><span data-stu-id="b932a-200">For example, an online order might include both lines that will be shipped to the customer and lines that will be picked up in a store.</span></span> <span data-ttu-id="b932a-201">Alle indstillinger for ordreopfyldning understøttes via omni-kanalbetalinger.</span><span class="sxs-lookup"><span data-stu-id="b932a-201">All order fulfillment options are supported via omni-channel payments.</span></span> 

<span data-ttu-id="b932a-202">I følgende afsnit beskrives trinnene for hvert scenarie, og hvordan du kan køre scenariet ved hjælp af demonstrationsdata.</span><span class="sxs-lookup"><span data-stu-id="b932a-202">The following sections describe the steps for each scenario and show how to run the scenario by using demo data.</span></span> 

### <a name="buy-online-pick-up-in-store"></a><span data-ttu-id="b932a-203">Køb online, afhent i butikken</span><span class="sxs-lookup"><span data-stu-id="b932a-203">Buy online, pick up in store</span></span>

<span data-ttu-id="b932a-204">Før du går i gang, skal du kontrollere, at følgende forudsætninger er opfyldt:</span><span class="sxs-lookup"><span data-stu-id="b932a-204">Before you start, make sure that the following prerequisites are in place:</span></span>

- <span data-ttu-id="b932a-205">Du har en referencebutik, hvor Adyen-connectoren er konfigureret.</span><span class="sxs-lookup"><span data-stu-id="b932a-205">You have a reference storefront where the Adyen connector is configured.</span></span>
- <span data-ttu-id="b932a-206">Indstillingen **Omni-kanalbetalinger** på siden **Delte parametre for Commerce** er angivet til **Sand**.</span><span class="sxs-lookup"><span data-stu-id="b932a-206">The **Omni-channel payments** option on the **Commerce shared parameters** page is set to **True**.</span></span> <span data-ttu-id="b932a-207">I senere versioner flyttes denne indstilling til arbejdsområdet **Funktionsstyring**, hvor du kan vælge funktionen **Omni-kanalbetalinger** og klikke på **Aktivér nu**.</span><span class="sxs-lookup"><span data-stu-id="b932a-207">In later versions this settng is moved to the **Feature Management** workspace where you can select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="b932a-208">Adyen-betalingsconnectoren er konfigureret til Houston POS-kasseapparatet.</span><span class="sxs-lookup"><span data-stu-id="b932a-208">The Adyen payment connector is configured for the Houston POS register.</span></span>
- <span data-ttu-id="b932a-209">Retail Modern POS til Windows eller Android med indbygget hardwarestation -eller-</span><span class="sxs-lookup"><span data-stu-id="b932a-209">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="b932a-210">Modern POS til iOS eller Cloud POS med tilsluttet delt hardwarestation.</span><span class="sxs-lookup"><span data-stu-id="b932a-210">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

<span data-ttu-id="b932a-211">Følg disse trin for at køre scenariet.</span><span class="sxs-lookup"><span data-stu-id="b932a-211">Follow these steps to run the scenario.</span></span>

1. <span data-ttu-id="b932a-212">I referencebutikken kan du oprette en ordre for afhentning i butikken.</span><span class="sxs-lookup"><span data-stu-id="b932a-212">In the reference storefront, create an order for in-store pickup.</span></span> <span data-ttu-id="b932a-213">Sørg for at vælge butikken **Houston**.</span><span class="sxs-lookup"><span data-stu-id="b932a-213">Be sure to select the **Houston** store.</span></span> 
2. <span data-ttu-id="b932a-214">Gennemgå trinnene til udtjekning, og betal med et prøvekreditkortnummer.</span><span class="sxs-lookup"><span data-stu-id="b932a-214">Go through the checkout steps, and pay by using a test credit card number.</span></span> <span data-ttu-id="b932a-215">Du kan finde prøvekreditkortnumre på [siden med Adyen-prøvekortnumre](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span><span class="sxs-lookup"><span data-stu-id="b932a-215">You can find test credit card numbers on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span></span>
3. <span data-ttu-id="b932a-216">I Commerce kan du bruge batchjobbet **Synkroniser ordrer** og **P-001**-distributionsplanen til at oprette ordrerne i administrationen.</span><span class="sxs-lookup"><span data-stu-id="b932a-216">In Commerce, use the **Synchronize orders** batch job and the **P-001** distribution schedule to create the orders in the back office.</span></span>
4. <span data-ttu-id="b932a-217">Vælg handlingen **Ordrer til afhentning** på velkomstsiden i POS for at se ordrerne til afhentning i butik.</span><span class="sxs-lookup"><span data-stu-id="b932a-217">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
5. <span data-ttu-id="b932a-218">Vælg en eller flere linjer fra den ordre, der blev oprettet i referencebutikken, og vælg derefter **Hent**.</span><span class="sxs-lookup"><span data-stu-id="b932a-218">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="b932a-219">Ordren hentes fra administrationskontoret.</span><span class="sxs-lookup"><span data-stu-id="b932a-219">The order is retrieved from the back office.</span></span> 

6. <span data-ttu-id="b932a-220">Når ordrelinjeoplysningerne er hentet fra kontoret, og der er registreret en kortbetaling, der kan bruges til omni-kanal, får du besked om, at der findes en betalingsmetode.</span><span class="sxs-lookup"><span data-stu-id="b932a-220">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
7. <span data-ttu-id="b932a-221">Vælg **Brug tilgængelig betalingsmetode** til at fuldføre transaktionen ved hjælp af de kortdetaljer, der blev angivet i referencebutikken.</span><span class="sxs-lookup"><span data-stu-id="b932a-221">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="b932a-222">Ordrelinjerne indlæses på transaktionssiden, og den forfaldne saldo er 0 (nul).</span><span class="sxs-lookup"><span data-stu-id="b932a-222">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span> 

8. <span data-ttu-id="b932a-223">Vælg fanen **Betalinger** for at få vist den betalingsmiddellinje, der blev hentet fra onlineordren.</span><span class="sxs-lookup"><span data-stu-id="b932a-223">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
9. <span data-ttu-id="b932a-224">Vælg en betalingsmåde for at fuldføre transaktionen.</span><span class="sxs-lookup"><span data-stu-id="b932a-224">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-call-center-pick-up-in-store"></a><span data-ttu-id="b932a-225">Køb i callcenter, og afhent i butik</span><span class="sxs-lookup"><span data-stu-id="b932a-225">Buy in call center, pick up in store</span></span>

1. <span data-ttu-id="b932a-226">På siden **Kundeservice** i Commerce skal du angive **Karen Berg** i søgepanelet og derefter vælge **Søg**.</span><span class="sxs-lookup"><span data-stu-id="b932a-226">In Commerce, on the **Customer service** page, enter **Karen Berg** in the search bar, and then select **Search**.</span></span> 
3. <span data-ttu-id="b932a-227">Vælg **Karen Berg** i søgeresultaterne.</span><span class="sxs-lookup"><span data-stu-id="b932a-227">Select **Karen Berg** in the search results.</span></span>
4. <span data-ttu-id="b932a-228">Når Karen er indlæst på siden **Kundeservice**, skal du vælge **Ny salgsordre**.</span><span class="sxs-lookup"><span data-stu-id="b932a-228">After Karen is loaded onto the **Customer service** page, select **New sales order**.</span></span>
5. <span data-ttu-id="b932a-229">Vælg **Hoved** på siden for den nye salgsordre for at få vist ordrehovedet.</span><span class="sxs-lookup"><span data-stu-id="b932a-229">On the new sales order page, select **Header** to view the order header.</span></span> 
6. <span data-ttu-id="b932a-230">Indstil stedet til **Central** og lagerstedet til **Houston** på siden **Ordrehoved**.</span><span class="sxs-lookup"><span data-stu-id="b932a-230">On the **Order header** page, set the site to **Central** and the warehouse to **Houston**.</span></span>
7. <span data-ttu-id="b932a-231">Indstil feltet **Leveringsmåde** til **60** for kundeafhentning under fanen **Levér**.</span><span class="sxs-lookup"><span data-stu-id="b932a-231">On the **Deliver** tab, set the **Mode of delivery** field to **60** for customer pickup.</span></span>
8. <span data-ttu-id="b932a-232">Vælg **Linjer**, og føj derefter en eller flere linjer til ordren.</span><span class="sxs-lookup"><span data-stu-id="b932a-232">Select **Lines**, and then add one or more lines to the order.</span></span> 
9. <span data-ttu-id="b932a-233">Vælg **Fuldført** for at angive forløbet for færdiggørelse af ordren.</span><span class="sxs-lookup"><span data-stu-id="b932a-233">Select **Complete** to enter the order completion flow.</span></span>
10. <span data-ttu-id="b932a-234">Rul ned til betalingsafsnittet, vælg **Tilføj**, og vælg derefter en linje, hvor betalingsmetodetypen er indstillet til **Kort**.</span><span class="sxs-lookup"><span data-stu-id="b932a-234">Scroll down to the payments section, select **Add**, and then select a line where the payment method type is set to **Cards**.</span></span> 
11. <span data-ttu-id="b932a-235">Vælg plustegnet (**+**) for at tilføje en kortbetaling.</span><span class="sxs-lookup"><span data-stu-id="b932a-235">Select the plus sign (**+**) to add a card payment.</span></span> 
12. <span data-ttu-id="b932a-236">Angiv detaljerne for et prøvekreditkortnummer, som du fandt på [siden med Adyen-prøvekortnumre](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), og vælg derefter **OK**.</span><span class="sxs-lookup"><span data-stu-id="b932a-236">Enter the details for a test credit card number that you found on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), and then select **OK**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="b932a-237">Betalingen gennemføres, selvom kortmærket for det angivne kortnummer er forskelligt fra det mærke, der blev valgt, da betalingen blev startet.</span><span class="sxs-lookup"><span data-stu-id="b932a-237">If the card brand for the card number that you entered differs from the brand that was selected when the payment was initiated, the payment will still go through.</span></span> <span data-ttu-id="b932a-238">Den vil dog blive bogført på de konti, der er knyttet til det kortmærke, du valgte i trin 10.</span><span class="sxs-lookup"><span data-stu-id="b932a-238">However, it will be posted to the accounts that are mapped to the card brand that you selected in step 10.</span></span>

12. <span data-ttu-id="b932a-239">Vælg **OK** igen for at lukke dialogboksen **Betalinger til ordrefuldførelse**.</span><span class="sxs-lookup"><span data-stu-id="b932a-239">Select **OK** again to close the **Order completion payments** dialog box.</span></span>
13. <span data-ttu-id="b932a-240">Vælg **Send** på siden **Salgsordreoversigt**.</span><span class="sxs-lookup"><span data-stu-id="b932a-240">On the **Sales order summary** page, select **Submit**.</span></span>
14. <span data-ttu-id="b932a-241">Vælg handlingen **Ordrer til afhentning** på velkomstsiden i POS for at se ordrerne til afhentning i butik.</span><span class="sxs-lookup"><span data-stu-id="b932a-241">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="b932a-242">Vælg en eller flere linjer fra den ordre, der blev oprettet i referencebutikken, og vælg derefter **Hent**.</span><span class="sxs-lookup"><span data-stu-id="b932a-242">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="b932a-243">Ordren hentes fra administrationskontoret.</span><span class="sxs-lookup"><span data-stu-id="b932a-243">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="b932a-244">Når ordrelinjeoplysningerne er hentet fra kontoret, og der er registreret en kortbetaling, der kan bruges til omni-kanal, får du besked om, at der findes en betalingsmetode.</span><span class="sxs-lookup"><span data-stu-id="b932a-244">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="b932a-245">Vælg **Brug tilgængelig betalingsmetode** til at fuldføre transaktionen ved hjælp af de kortdetaljer, der blev angivet i referencebutikken.</span><span class="sxs-lookup"><span data-stu-id="b932a-245">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="b932a-246">Ordrelinjerne indlæses på transaktionssiden, og den forfaldne saldo er 0 (nul).</span><span class="sxs-lookup"><span data-stu-id="b932a-246">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="b932a-247">Vælg fanen **Betalinger** for at få vist den betalingsmiddellinje, der blev hentet fra onlineordren.</span><span class="sxs-lookup"><span data-stu-id="b932a-247">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="b932a-248">Vælg en betalingsmåde for at fuldføre transaktionen.</span><span class="sxs-lookup"><span data-stu-id="b932a-248">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-pick-up-in-store-b"></a><span data-ttu-id="b932a-249">Køb i butik A, og afhent i butik B</span><span class="sxs-lookup"><span data-stu-id="b932a-249">Buy in store A, pick up in store B</span></span>

1. <span data-ttu-id="b932a-250">Start POS for Houston-butikken.</span><span class="sxs-lookup"><span data-stu-id="b932a-250">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="b932a-251">På siden **Transaktion** skal du føje Karen Berg til transaktionen ved at bruge det numeriske tastatur til at skrive **2001**.</span><span class="sxs-lookup"><span data-stu-id="b932a-251">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="b932a-252">Føj en eller flere linjer til transaktionen.</span><span class="sxs-lookup"><span data-stu-id="b932a-252">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="b932a-253">Vælg **Ordrer** for at få vist ordreindstillingerne.</span><span class="sxs-lookup"><span data-stu-id="b932a-253">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="b932a-254">Vælg **Afhent alle**, og når du bliver bedt om det, skal du vælge **Kundeordre**.</span><span class="sxs-lookup"><span data-stu-id="b932a-254">Select **Pick up all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="b932a-255">Skriv **Seattle** i søgepanelet, og vælg derefter afhenting i **Seattle**-butikken.</span><span class="sxs-lookup"><span data-stu-id="b932a-255">In the search bar, enter **Seattle**, and then select the **Seattle** store for pickup.</span></span> 
7. <span data-ttu-id="b932a-256">Vælg **OK** for at acceptere dags dato som datoen for afhentning.</span><span class="sxs-lookup"><span data-stu-id="b932a-256">Select **OK** to accept the current date as the date of pickup.</span></span>
9. <span data-ttu-id="b932a-257">Vælg **Kortbetaling** for at starte betalingen.</span><span class="sxs-lookup"><span data-stu-id="b932a-257">Select **Pay card** to initiate the payment.</span></span>
10. <span data-ttu-id="b932a-258">Betal det beløb, der er forfaldent for indbetalingen, via kortbetalingen.</span><span class="sxs-lookup"><span data-stu-id="b932a-258">Tender the card payment for the amount that is due for the deposit.</span></span> 
11. <span data-ttu-id="b932a-259">Fuldfør betalingen af indbetalingen på betalingsterminalen.</span><span class="sxs-lookup"><span data-stu-id="b932a-259">Complete the deposit payment on the payment terminal.</span></span> 
12. <span data-ttu-id="b932a-260">Når indbetalingen er foretaget, skal du vælge indstillingen for at bruge samme kort til opfyldelse og vente på, at ordren færdiggøres.</span><span class="sxs-lookup"><span data-stu-id="b932a-260">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span> 
13. <span data-ttu-id="b932a-261">Start POS for Seattle-butikken.</span><span class="sxs-lookup"><span data-stu-id="b932a-261">Start the POS for the Seattle store.</span></span>
14. <span data-ttu-id="b932a-262">Vælg handlingen **Ordrer til afhentning** på velkomstsiden i POS for at se ordrerne til afhentning i butik.</span><span class="sxs-lookup"><span data-stu-id="b932a-262">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="b932a-263">Vælg en eller flere linjer fra den ordre, der blev oprettet i referencebutikken, og vælg derefter **Hent**.</span><span class="sxs-lookup"><span data-stu-id="b932a-263">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="b932a-264">Ordren hentes fra administrationskontoret.</span><span class="sxs-lookup"><span data-stu-id="b932a-264">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="b932a-265">Når ordrelinjeoplysningerne er hentet fra kontoret, og der er registreret en kortbetaling, der kan bruges til omni-kanal, får du besked om, at der findes en betalingsmetode.</span><span class="sxs-lookup"><span data-stu-id="b932a-265">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="b932a-266">Vælg **Brug tilgængelig betalingsmetode** til at fuldføre transaktionen ved hjælp af de kortdetaljer, der blev angivet i referencebutikken.</span><span class="sxs-lookup"><span data-stu-id="b932a-266">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="b932a-267">Ordrelinjerne indlæses på transaktionssiden, og den forfaldne saldo er 0 (nul).</span><span class="sxs-lookup"><span data-stu-id="b932a-267">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="b932a-268">Vælg fanen **Betalinger** for at få vist den betalingsmiddellinje, der blev hentet fra onlineordren.</span><span class="sxs-lookup"><span data-stu-id="b932a-268">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="b932a-269">Vælg en betalingsmåde for at fuldføre transaktionen.</span><span class="sxs-lookup"><span data-stu-id="b932a-269">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-ship-to-customer"></a><span data-ttu-id="b932a-270">Køb i butik A, og levér til kunde</span><span class="sxs-lookup"><span data-stu-id="b932a-270">Buy in store A, ship to customer</span></span>

1. <span data-ttu-id="b932a-271">Start POS for Houston-butikken.</span><span class="sxs-lookup"><span data-stu-id="b932a-271">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="b932a-272">På siden **Transaktion** skal du føje Karen Berg til transaktionen ved at bruge det numeriske tastatur til at skrive **2001**.</span><span class="sxs-lookup"><span data-stu-id="b932a-272">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="b932a-273">Føj en eller flere linjer til transaktionen.</span><span class="sxs-lookup"><span data-stu-id="b932a-273">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="b932a-274">Vælg **Ordrer** for at få vist ordreindstillingerne.</span><span class="sxs-lookup"><span data-stu-id="b932a-274">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="b932a-275">Vælg **Send alle**, og vælg derefter **Kundeordre**, når du bliver bedt om det.</span><span class="sxs-lookup"><span data-stu-id="b932a-275">Select **Ship all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="b932a-276">Vælg **Om natten som standard** på siden med forsendelsesmetode, og vælg derefter **OK** for at acceptere dags dato som forsendelsesdato.</span><span class="sxs-lookup"><span data-stu-id="b932a-276">In the shipping method page, select **Standard overnight**, and then select **OK** to accept today's date as the shipping date.</span></span> 
7. <span data-ttu-id="b932a-277">Vælg **OK** for at acceptere dags dato som datoen for afhentning.</span><span class="sxs-lookup"><span data-stu-id="b932a-277">Select **OK** to accept the current date as the date of pickup.</span></span>
8. <span data-ttu-id="b932a-278">Vælg **Kortbetaling** for at starte betalingen.</span><span class="sxs-lookup"><span data-stu-id="b932a-278">Select **Pay card** to initiate the payment.</span></span>
9. <span data-ttu-id="b932a-279">Betal det beløb, der er forfaldent for indbetalingen, via kortbetalingen.</span><span class="sxs-lookup"><span data-stu-id="b932a-279">Tender the card payment for the amount that is due for the deposit.</span></span> 
10. <span data-ttu-id="b932a-280">Fuldfør betalingen af indbetalingen på betalingsterminalen.</span><span class="sxs-lookup"><span data-stu-id="b932a-280">Complete the deposit payment on the payment terminal.</span></span> 
11. <span data-ttu-id="b932a-281">Når indbetalingen er foretaget, skal du vælge indstillingen for at bruge samme kort til opfyldelse og vente på, at ordren færdiggøres.</span><span class="sxs-lookup"><span data-stu-id="b932a-281">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span>

<span data-ttu-id="b932a-282">Når ordren er plukket, pakket og faktureret på administrationskontoret, bruges de betalingsoplysninger, der findes på POS, til at registrere betalingsmidlerne for de varer, der skal leveres til kunden.</span><span class="sxs-lookup"><span data-stu-id="b932a-282">When the order is picked, packed, and invoiced in the back office, the payment details that are provided at the POS will be used to capture the funds for the goods that are being shipped to the customer.</span></span> 

## <a name="scenario-details"></a><span data-ttu-id="b932a-283">Scenariedetaljer</span><span class="sxs-lookup"><span data-stu-id="b932a-283">Scenario details</span></span>

<span data-ttu-id="b932a-284">Ud over de grundlæggende scenarier, der netop er beskrevet, er der foretaget adskillige forbedringer af betalings-SDK'et for at understøtte omni-kanalbetalinger.</span><span class="sxs-lookup"><span data-stu-id="b932a-284">In addition to the basic scenarios that were just described, several enhancements have been made to the Payments SDK to support omni-channel payments.</span></span> 

### <a name="pos"></a><span data-ttu-id="b932a-285">POS</span><span class="sxs-lookup"><span data-stu-id="b932a-285">POS</span></span>

#### <a name="single-swipedip-for-customer-orders"></a><span data-ttu-id="b932a-286">Føre kort gennem kortlæser én gang for kundeordrer</span><span class="sxs-lookup"><span data-stu-id="b932a-286">Single swipe/dip for customer orders</span></span>

<span data-ttu-id="b932a-287">Før funktionen Omni-kanalbetalinger blev implementeret, da kundeordrer, som indeholdt indbetalinger, blev oprettet ved POS, var kunderne nødt til at føre deres kort gennem kortlæseren to gange: én gang for at betale indbetalingen og én gang for at opdele kortet i tokens til efterfølgende ordreopfyldning.</span><span class="sxs-lookup"><span data-stu-id="b932a-287">Before the omni-channel payments feature was implemented, when customer orders that included deposits were created at the POS, customers were required to swipe (or dip) their card two times: one time to pay the deposit and one time to tokenize the card for subsequent order fulfillment.</span></span> <span data-ttu-id="b932a-288">Når funktionen til opdeling i tokens for omni-kanaler er slået til, skal kunderne kun føre kortet gennem kortlæseren én gang for at foretage både indbetalingen og autorisere det beløb, der er forfaldent for varer, der skal opfyldes senere.</span><span class="sxs-lookup"><span data-stu-id="b932a-288">When the omni-channel tokenization feature is turned on, customers must swipe their card only one time to both pay the deposit and authorize the amount that is due for goods that will be fulfilled later.</span></span> <span data-ttu-id="b932a-289">På tidspunktet for opfyldelse registreres de godkendte midler.</span><span class="sxs-lookup"><span data-stu-id="b932a-289">At the time of fulfillment, the authorized funds are captured.</span></span> <span data-ttu-id="b932a-290">Før funktionen til opdeling i tokens for omni-kanaler blev implementeret, blev der kun oprettet et gentagent korttoken til efterfølgende ordreopfyldelse.</span><span class="sxs-lookup"><span data-stu-id="b932a-290">Before the omni-channel tokenization feature was implemented, only a recurring card token was created for subsequent order fulfillment.</span></span> <span data-ttu-id="b932a-291">Derfor blev betalingsmidlerne til den ventende opfyldelse ikke godkendt, og da disse midler endnu ikke var modtageren i hænde for det pågældende indkøb, var det mindre sandsynligt, at de kunne indhentes senere.</span><span class="sxs-lookup"><span data-stu-id="b932a-291">Therefore, the funds for the pending fulfillment weren't authorized, and because those funds weren't being held for that specific purchase, it was less likely that they could be captured later.</span></span>

> [!NOTE]
> <span data-ttu-id="b932a-292">At føre kort gennem kortlæseren én gang understøttes ikke i Retail version 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="b932a-292">Single swipe isn't supported in Retail version 8.1.3.</span></span> <span data-ttu-id="b932a-293">Kundeordrer i version 8.1.3 bruger samme flow, som blev brugt, før funktionen til opdeling i tokens for omni-kanaler blev implementeret.</span><span class="sxs-lookup"><span data-stu-id="b932a-293">Customer orders in version 8.1.3 use the same flow that was used before the omni-channel tokenization feature was implemented.</span></span> 

### <a name="cards-that-cant-issue-recurring-card-tokens"></a><span data-ttu-id="b932a-294">Kort, som ikke kan udstede gentagende korttokens</span><span class="sxs-lookup"><span data-stu-id="b932a-294">Cards that can't issue recurring card tokens</span></span>

<span data-ttu-id="b932a-295">Nogle kort kan ikke bruges til Omni-kanalbetalinger, da de ikke understøtter udstedelse af gentagende korttokens.</span><span class="sxs-lookup"><span data-stu-id="b932a-295">Some cards can't be used for omni-channel payments, because they don't support issuing recurring card tokens.</span></span> <span data-ttu-id="b932a-296">Når en ordre oprettes ved POS, og indbetalingen foretages ved hjælp af et kort, der ikke understøtter gentagende korttokens, bruges det forrige korts flow for opdeling i tokens.</span><span class="sxs-lookup"><span data-stu-id="b932a-296">When an order is created at the POS, if the deposit is paid by using a card that doesn't support recurring card tokens, the previous card tokenization flow is used.</span></span> <span data-ttu-id="b932a-297">Derfor skal en kunde, der vil lægge en betaling, som skal bruges til efterfølgende ordreopfyldning, have et andet kort.</span><span class="sxs-lookup"><span data-stu-id="b932a-297">Therefore, a customer who wants to provide a payment that will be used for subsequent order fulfillment must present a second card.</span></span> <span data-ttu-id="b932a-298">Hvis dette andet kort ikke understøtter gentagende korttokens, vil handlingen til opdeling i tokens blive afvist, og kassereren må bede kunden om at benytte et andet kort.</span><span class="sxs-lookup"><span data-stu-id="b932a-298">If the second card doesn't support recurring card tokens, the tokenization action will be declined, and the cashier will be prompted to ask the customer to provide a different card.</span></span> 

### <a name="using-a-different-card"></a><span data-ttu-id="b932a-299">Bruge et andet kort</span><span class="sxs-lookup"><span data-stu-id="b932a-299">Using a different card</span></span>

<span data-ttu-id="b932a-300">En kunde, der kommer med butikken for at afhente sin ordre, har mulighed for at bruge et andet kort.</span><span class="sxs-lookup"><span data-stu-id="b932a-300">A customer who comes to the store for order pickup has the option to use a different card.</span></span> <span data-ttu-id="b932a-301">Når kassereren får vist en prompten **Brug tilgængelig betalingsmetode** på tidspunktet for afhentning af ordren, kan han eller hun spørge, om kunden ønsker at bruge det samme kort.</span><span class="sxs-lookup"><span data-stu-id="b932a-301">When the cashier receives the **Use available payment method** prompt at the time of order pickup, he or she can ask whether the customer wants to use the same card.</span></span> <span data-ttu-id="b932a-302">Hvis kunden har mistet det kort, der blev brugt til at oprette ordren, og ønsker at betale ordren ved hjælp af et andet kort, kan kassereren vælge **Brug en anden betalingsmetode**.</span><span class="sxs-lookup"><span data-stu-id="b932a-302">If the customer has lost the card that was used to create the order and wants to pay for the order by using a different card, the cashier can select **Use a different payment method**.</span></span> <span data-ttu-id="b932a-303">Hvis kunden senere kommer for at hente flere varer til samme ordre, og hvis den oprindelige kortgodkendelse stadig er gyldig, kan kassereren igen spørge, om kunden ønsker at bruge det pågældende kort.</span><span class="sxs-lookup"><span data-stu-id="b932a-303">If the customer comes back later to pick up more items for the same order, if the original card authorization is still valid, the cashier can again ask whether the customer wants to use that card.</span></span>

### <a name="invalid-authorizations"></a><span data-ttu-id="b932a-304">Ugyldige godkendelser</span><span class="sxs-lookup"><span data-stu-id="b932a-304">Invalid authorizations</span></span>

<span data-ttu-id="b932a-305">Hvis det kort, der blev brugt til at oprette en ordre, ikke længere er gyldigt, når der er valgt produkter til afhentning, vil anmodningen om hentning af betaling mislykkes.</span><span class="sxs-lookup"><span data-stu-id="b932a-305">If the card that was used to create an order is no longer valid, when products are selected for pickup, the payment capture request will fail.</span></span> <span data-ttu-id="b932a-306">POS-betalingsconnectoren vil derefter forsøge at oprette en ny godkendelse og hentning ved hjælp af de samme kortdetaljer.</span><span class="sxs-lookup"><span data-stu-id="b932a-306">The POS payment connector will then try to create a new authorization and capture by using the same card details.</span></span> <span data-ttu-id="b932a-307">Hvis den nye godkendelse eller hentning mislykkes, bliver kassereren informeret om, at betalingen ikke kan behandles.</span><span class="sxs-lookup"><span data-stu-id="b932a-307">If the new authorization or capture fails, the cashier will be informed that the payment could not be processed.</span></span> <span data-ttu-id="b932a-308">Kassereren skal derefter få en ny betaling fra kunden.</span><span class="sxs-lookup"><span data-stu-id="b932a-308">The cashier must then get a new payment from the customer.</span></span> 

### <a name="multiple-available-payments"></a><span data-ttu-id="b932a-309">Flere tilgængelige betalinger</span><span class="sxs-lookup"><span data-stu-id="b932a-309">Multiple available payments</span></span>

<span data-ttu-id="b932a-310">Når en ordre med flere betalingsmidler og flere linjer afhentes, modtager kassereren først en prompten **Brug tilgængelig betalingsmetode**.</span><span class="sxs-lookup"><span data-stu-id="b932a-310">When an order that has multiple tenders and multiple lines is picked up, the cashier first receives the **Use available payment method** prompt.</span></span> <span data-ttu-id="b932a-311">Hvis der er flere kort, når kassereren vælger **Brug tilgængelig betalingsmetode**, hentes eksisterende kortudbetalingslinjer, indtil saldoen er opfyldt for de varer, der afhentes i øjeblikket.</span><span class="sxs-lookup"><span data-stu-id="b932a-311">If there are multiple cards, when the cashier selects **Use available payment method**, existing card tender lines will be captured until the balance is met for the goods that are currently being picked up.</span></span> <span data-ttu-id="b932a-312">Kassereren har ikke mulighed for at vælge det kort, der skal bruges til de varer, der afhentes.</span><span class="sxs-lookup"><span data-stu-id="b932a-312">The cashier won't have the option to select the card that should be used for the goods that are being picked up.</span></span> 

## <a name="related-topics"></a><span data-ttu-id="b932a-313">Relaterede emner</span><span class="sxs-lookup"><span data-stu-id="b932a-313">Related topics</span></span>

- [<span data-ttu-id="b932a-314">Ofte stillede spørgsmål om betalinger</span><span class="sxs-lookup"><span data-stu-id="b932a-314">Payments FAQ</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/payments-retail)
- [<span data-ttu-id="b932a-315">Dynamics 365-betalingsconnector til Adyen</span><span class="sxs-lookup"><span data-stu-id="b932a-315">Dynamics 365 Payment Connector for Adyen</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3)
- [<span data-ttu-id="b932a-316">Konfigurere BOPIS i et Dynamics 365 Commerce-evalueringsmiljø</span><span class="sxs-lookup"><span data-stu-id="b932a-316">Configure BOPIS in a Dynamics 365 Commerce evaluation environment</span></span>](https://docs.microsoft.com/dynamics365/commerce/cpe-bopis)

