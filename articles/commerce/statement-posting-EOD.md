---
title: Forbedringer til funktioner til bogføring af opgørelse
description: I dette emne beskrives de forbedringer, der er foretaget af funktionen til bogføring af opgørelsen.
author: josaw1
manager: AnnBe
ms.date: 05/14/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: retail
ms.author: anpurush
ms.search.validFrom: 2018-04-30
ms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update
ms.openlocfilehash: 68abef8f28c04a4f6f88e638c8abf944d06a32c4
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: da-DK
ms.lasthandoff: 10/13/2020
ms.locfileid: "4411151"
---
# <a name="improvements-to-statement-posting-functionality"></a><span data-ttu-id="0c771-103">Forbedringer til funktioner til bogføring af opgørelse</span><span class="sxs-lookup"><span data-stu-id="0c771-103">Improvements to statement posting functionality</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="0c771-104">I dette emne beskrives det første sæt af forbedringer, der er foretaget af funktionen til bogføring af opgørelsen.</span><span class="sxs-lookup"><span data-stu-id="0c771-104">This topic describes the first set of improvements that have been made to the statement posting feature.</span></span> <span data-ttu-id="0c771-105">Disse forbedringer er tilgængelige i Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span><span class="sxs-lookup"><span data-stu-id="0c771-105">These improvements are available in Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span></span>

## <a name="activation"></a><span data-ttu-id="0c771-106">Aktivering</span><span class="sxs-lookup"><span data-stu-id="0c771-106">Activation</span></span>

<span data-ttu-id="0c771-107">Som standard under installationen af Finance and Operations 7.3.2 konfigureres programmet til at bruge den tidligere funktion til bogføring af opgørelser.</span><span class="sxs-lookup"><span data-stu-id="0c771-107">By default, during deployment of Finance and Operations 7.3.2, the program is set up to use the legacy feature for statement postings.</span></span> <span data-ttu-id="0c771-108">Hvis du vil aktivere den forbedrede funktionen til bogføring af opgørelsen, skal du aktivere konfigurationsnøglen til den.</span><span class="sxs-lookup"><span data-stu-id="0c771-108">To enable the improved statement posting feature, you must turn on the configuration key for it.</span></span>

- <span data-ttu-id="0c771-109">Gå til **Systemadministration** \> **Opsætning** \> **Licenskonfiguration**, og ryd derefter afkrydsningsfeltet **Opgørelser (ældre)** under noden **Retail og Commerce**, og markér afkrydsningsfeltet **Opgørelser**.</span><span class="sxs-lookup"><span data-stu-id="0c771-109">Go to **System administration** \> **Setup** \> **License configuration**, and then, under the **Retail and Commerce** node, clear the **Statements (legacy)** check box, and select the **Statements** check box.</span></span>

<span data-ttu-id="0c771-110">Når den nye konfigurationsnøgle **Opgørelser** er aktiveret, bliver et nyt menupunkt, **Opgørelser**, tilgængeligt.</span><span class="sxs-lookup"><span data-stu-id="0c771-110">When the new **Statements** configuration key is turned on, a new menu item that is named **Statements** is available.</span></span> <span data-ttu-id="0c771-111">I dette menupunkt kan du manuelt kan oprette, beregne og bogføre opgørelser.</span><span class="sxs-lookup"><span data-stu-id="0c771-111">This menu item lets you manually create, calculate, and post statements.</span></span> <span data-ttu-id="0c771-112">Enhver opgørelse, der medfører en fejl, når batchposteringsprocessen bruges, vil også være tilgængelig via dette menupunkt.</span><span class="sxs-lookup"><span data-stu-id="0c771-112">Any statement that causes an error when the batch posting process is used will also be available through this menu item.</span></span> <span data-ttu-id="0c771-113">(Når den nye konfigurationsnøgle **Opgørelser (ældre)** aktiveres, får menupunktet navnet **Åbne opgørelser**.)</span><span class="sxs-lookup"><span data-stu-id="0c771-113">(When the **Statements (legacy)** configuration key is turned on, the menu item is named **Open statements**.)</span></span>

<span data-ttu-id="0c771-114">Commerce indeholder følgende valideringer, der vedrører disse konfigurationsnøgler:</span><span class="sxs-lookup"><span data-stu-id="0c771-114">Commerce includes the following validations that are related to these configuration keys:</span></span>

- <span data-ttu-id="0c771-115">Begge konfigurationsnøgler kan ikke aktiveres på samme tid.</span><span class="sxs-lookup"><span data-stu-id="0c771-115">Both configuration keys can't be turned on at the same time.</span></span>
- <span data-ttu-id="0c771-116">De samme konfigurationsnøgler skal bruges til alle de operationer, der udføres på en given opgørelse i dens livscyklus (oprette, beregne, fjerne, bogføre osv).</span><span class="sxs-lookup"><span data-stu-id="0c771-116">The same configuration keys must be used for all the operations that are performed on a given statement during its lifecycle (Create, Calculate, Clear, Post, and so on).</span></span> <span data-ttu-id="0c771-117">Du kan f.eks. ikke oprette og beregne en opgørelse, mens konfigurationsnøglen **Opgørelser (ældre)** er slået til, og derefter prøve at bogføre den samme opgørelse, mens konfigurationsnøglen **Opgørelse** er slået til.</span><span class="sxs-lookup"><span data-stu-id="0c771-117">For example, you can't create and calculate a statement while the **Statement (legacy)** configuration key is turned on, and then try to post the same statement while the **Statement** configuration key is turned on.</span></span>

> [!NOTE]
> <span data-ttu-id="0c771-118">Det anbefales, at du bruger konfigurationsnøglen **Opgørelser** til den forbedrede funktion til bogføring af opgørelsen, medmindre der er tvingende årsager til at bruge konfigurationsnøglen **Opgørelser (ældre)** i stedet.</span><span class="sxs-lookup"><span data-stu-id="0c771-118">We recommend that you use the **Statements** configuration key for the improved statement posting feature, unless you have compelling reasons to use the **Statements (legacy)** configuration key instead.</span></span> <span data-ttu-id="0c771-119">Microsoft fortsætter med at investere i den nye og forbedrede bogføringsfunktion, og det er vigtigt, at du hurtigst muligt skifter til den for at få fordel af den.</span><span class="sxs-lookup"><span data-stu-id="0c771-119">Microsoft will continue to invest in the new and improved statement posting feature, and it's important that you switch to it at the earliest opportunity to benefit from it.</span></span> <span data-ttu-id="0c771-120">Den ældre opgørelsesbogføringsfunktion er blevet udfaset fra og med version 8.0.</span><span class="sxs-lookup"><span data-stu-id="0c771-120">The legacy statement posting feature is deprecated starting in 8.0 release.</span></span>

## <a name="setup"></a><span data-ttu-id="0c771-121">Konfiguration</span><span class="sxs-lookup"><span data-stu-id="0c771-121">Setup</span></span>

<span data-ttu-id="0c771-122">Som en del af forbedringerne af funktionen til bogføring af opgørelser er der introduceret tre nye parametre i oversigtspanelet **Opgørelse** under fanen **Bogføring** på siden **Commerce-parametre**:</span><span class="sxs-lookup"><span data-stu-id="0c771-122">As part of the improvements to the statement posting feature, three new parameters have been introduced on the **Statement** FastTab on the **Posting** tab of the **Commerce parameters** page:</span></span>

- <span data-ttu-id="0c771-123">**Deaktiver rydning af opgørelse** – Denne indstilling gælder kun for den ældre funktionen til bogføring af opgørelser.</span><span class="sxs-lookup"><span data-stu-id="0c771-123">**Disable clear statement** – This option is applicable only for the legacy statement posting feature.</span></span> <span data-ttu-id="0c771-124">Vi anbefaler, at du vælger **Nej** i denne indstilling for at forhindre, at brugere fjerner opgørelser, der er delvist bogført.</span><span class="sxs-lookup"><span data-stu-id="0c771-124">We recommend that you set this option to **No** to prevent users from clearing statements that are in a semi-posted state.</span></span> <span data-ttu-id="0c771-125">Hvis opgørelser, der er delvist bogførte, fjernes, beskadiges dataene.</span><span class="sxs-lookup"><span data-stu-id="0c771-125">If statements that are in a semi-posted state are cleared, data becomes corrupted.</span></span> <span data-ttu-id="0c771-126">Du skal kun vælge **Ja** i denne indstilling under ekstraordinære omstændigheder.</span><span class="sxs-lookup"><span data-stu-id="0c771-126">You should set this option to **Yes** only in exceptional circumstances.</span></span>
- <span data-ttu-id="0c771-127">**Reservér lager under beregning** – Vi anbefaler, at du bruger batchjobbet **Bogfør lager** til lagerreservation, og at du vælger **Nej** i denne indstilling.</span><span class="sxs-lookup"><span data-stu-id="0c771-127">**Reserve inventory during calculation** – We recommend that you use the **Post inventory** batch job for inventory reservation, and that you set this option to **No**.</span></span> <span data-ttu-id="0c771-128">Når denne indstilling er sat til **Nej**, forsøger den forbedrede bogføringsfunktion ikke at oprette lagerreservationsposteringer på tidspunktet for beregningen (hvis posteringerne ikke allerede er oprettet via batchjobbet **Bogfør lager**).</span><span class="sxs-lookup"><span data-stu-id="0c771-128">When this option is set to **No**, the improved statement posting feature doesn't try to create inventory reservation entries at the time of calculation (if entries weren't already created through the **Post inventory** batch job).</span></span> <span data-ttu-id="0c771-129">I stedet opretter funktionen kun lagerreservationsposter på bogføringstidspunktet.</span><span class="sxs-lookup"><span data-stu-id="0c771-129">Instead, the feature creates inventory reservation entries only at the time of posting.</span></span> <span data-ttu-id="0c771-130">Denne implementering er baseret på, at tidsvinduet mellem beregningsprocessen og bogføringsprocessen er typisk lille.</span><span class="sxs-lookup"><span data-stu-id="0c771-130">This implementation was a design choice and was based on the fact that the time window between the calculation process and the posting process is typically small.</span></span> <span data-ttu-id="0c771-131">Men hvis du vil reservere lager på beregningstidspunktet, kan du vælge **Ja** i denne indstilling.</span><span class="sxs-lookup"><span data-stu-id="0c771-131">However, if you want to reserve inventory at the time of calculation, you can set this option to **Yes**.</span></span>

    <span data-ttu-id="0c771-132">Den ældre bogføringsfunktion reserverer altid lager under opgørelsesberegningsprocessen (hvis reservationen ikke var allerede er blevet foretaget via batchjobbet **Bogfør lager**), uanset hvad der er valgt i denne indstilling.</span><span class="sxs-lookup"><span data-stu-id="0c771-132">The legacy statement posting feature always reserves inventory during the statement calculation process (if reservation wasn't already done through the **Post inventory** batch job), regardless of the setting of this option.</span></span>

- <span data-ttu-id="0c771-133">**Deaktivering af optælling er påkrævet** – Når denne indstilling er sat til **Ja**, fortsætter bogføringsprocessen for en opgørelse, selvom forskellen mellem det optalte beløb og transaktionsbeløbet i opgørelsen er uden for grænsen, der er defineret i oversigtspanelet **Opgørelse** for butikker.</span><span class="sxs-lookup"><span data-stu-id="0c771-133">**Disable counting required** – When this option is set to **Yes**, the posting process for a statement continues, even if the difference between the counted amount and the transaction amount on the statement is outside the threshold that is defined on the **Statement** FastTab for stores.</span></span>

<span data-ttu-id="0c771-134">Derudover er følgende parametre introduceret i oversigtspanelet **Batchbehandling** under fanen **Bogføring** på siden **Commerce-parametre**:</span><span class="sxs-lookup"><span data-stu-id="0c771-134">Additionally, the following parameters have been introduced on the **Batch processing** FastTab on the **Posting** tab of the **Commerce parameters** page:</span></span> 

- <span data-ttu-id="0c771-135">**Det maksimale antal parallelle opgørelsesbogføringer** – Dette felt definerer antallet af batchopgaver, der skal bruges til at bogføre flere opgørelser.</span><span class="sxs-lookup"><span data-stu-id="0c771-135">**Maximum number of parallel statement posting** – This field defines the number of batch tasks that will be used to post multiple statements.</span></span> 
- <span data-ttu-id="0c771-136">**Maks. antal tråde til ordrebehandling pr. opgørelse** – Dette felt repræsenterer det maksimale antal tråde, der bruges af batchjobbet for opgørelsesbogføringen til at oprette og fakturere salgsordrer for en enkelt opgørelse.</span><span class="sxs-lookup"><span data-stu-id="0c771-136">**Max thread for order processing per statement** – This field represents the maximum number of threads used by the statement posting batch job to create and invoice sales orders for a single statement.</span></span> <span data-ttu-id="0c771-137">Det samlede antal tråde, der bruges af bogføringsprocessen for opgørelser, beregnes på basis af værdien i denne parameter ganget med værdien i parameteren **Det maksimale antal parallelle opgørelsesbogføringer**.</span><span class="sxs-lookup"><span data-stu-id="0c771-137">The total number of threads that will be used by the statement posting process will be computed based on the value in this parameter multiplied by the value in the **Maximum number of parallel statement posting** parameter.</span></span> <span data-ttu-id="0c771-138">Hvis værdien af denne parameter er for høj, kan det have en negativ indvirkning på ydeevnen for opgørelsesprocessen.</span><span class="sxs-lookup"><span data-stu-id="0c771-138">Setting the value of this parameter too high can negatively impact the performance of the statement posting process.</span></span>
- <span data-ttu-id="0c771-139">**Maks. antal posteringslinjer, der er inkluderet i aggregeringen** – Dette felt definerer antallet af posteringslinjer, som skal medtages i en enkelt aggregeret transaktion, før der oprettes en ny.</span><span class="sxs-lookup"><span data-stu-id="0c771-139">**Max transaction lines included in aggregation** – This field defines the number of transaction lines that will be included in a single aggregated transaction before a new one is created.</span></span> <span data-ttu-id="0c771-140">Aggregerede posteringer oprettes på basis af forskellige aggregeringskriterier, f.eks. debitor, forretningsdato eller økonomiske dimensioner.</span><span class="sxs-lookup"><span data-stu-id="0c771-140">Aggregated transactions are created based on different aggregation criteria such as customer, business date, or financial dimensions.</span></span> <span data-ttu-id="0c771-141">Det er vigtigt at bemærke, at linjerne fra en enkelt transaktion ikke bliver opdelt på tværs af forskellige aggregerede transaktioner.</span><span class="sxs-lookup"><span data-stu-id="0c771-141">It is important to note that the lines from a single transaction will not be split across different aggregated transactions.</span></span> <span data-ttu-id="0c771-142">Det betyder, at der er mulighed for, at antallet af linjer i en aggregeret transaktion er lidt højere eller lavere baseret på faktorer som antallet af specifikke produkter.</span><span class="sxs-lookup"><span data-stu-id="0c771-142">This means that there is a possibility that the number of lines in a aggregated transaction is slightly higher or lower based on factors such as number of distinct products.</span></span>
- <span data-ttu-id="0c771-143">**Maksimale antal tråde til at validere butikstransaktioner** – Dette felt definerer antallet af tråde, der skal bruges til validering af transaktioner.</span><span class="sxs-lookup"><span data-stu-id="0c771-143">**Maximum number of threads to validate store transactions** – This field defines the number of threads that will be used to validate transactions.</span></span> <span data-ttu-id="0c771-144">Validering af transaktioner er et påkrævet trin, der skal udføres, før transaktionerne kan trækkes ind i opgørelserne.</span><span class="sxs-lookup"><span data-stu-id="0c771-144">Validating transactions is a required step that needs to occur before the transactions can be pulled into the statements.</span></span> <span data-ttu-id="0c771-145">Desuden skal du også definere et **gavekortprodukt** på oversigtspanelet **Gavekort** under fanen **Bogføring** på siden **Commerce-parametre**.</span><span class="sxs-lookup"><span data-stu-id="0c771-145">You also need to define a **Gift card product** on the **Gift card** FastTab on the **Posting** tab of the **Commerce parameters** page.</span></span> <span data-ttu-id="0c771-146">Det skal defineres, selvom gavekort ikke bruges af organisationen.</span><span class="sxs-lookup"><span data-stu-id="0c771-146">This needs to defined even if gift cards are not used by the organization.</span></span>

> [!NOTE]
> <span data-ttu-id="0c771-147">Alle indstillinger og parametre, der er relateret til bogføring af opgørelsen, og som er defineret i butikker og på siden **Commerce-parametre**, gælder for funktionen til forbedret bogføring af opgørelser.</span><span class="sxs-lookup"><span data-stu-id="0c771-147">All settings and parameters that are related to statement postings, and that are defined on stores and on the **Commerce parameters** page, are applicable to the improved statement posting feature.</span></span>

## <a name="processing"></a><span data-ttu-id="0c771-148">Afvikling</span><span class="sxs-lookup"><span data-stu-id="0c771-148">Processing</span></span>

<span data-ttu-id="0c771-149">Opgørelser kan beregnes og bogføres i batches ved hjælp af menupunkterne i **Beregn opgørelser i batch** og **Bogfør opgørelser i batch**.</span><span class="sxs-lookup"><span data-stu-id="0c771-149">Statements can be calculated and posted in batch using the menu items **Calculate statements in batch** and **Post statements in batch**.</span></span> <span data-ttu-id="0c771-150">Alternativt kan opgørelser beregnes og bogføres manuelt ved hjælp af menupunktet **Opgørelser**, som funktionen til forbedret opgørelsesbogføring indeholder.</span><span class="sxs-lookup"><span data-stu-id="0c771-150">Alternatively, statements can be manually calculated and posted by using the **Statements** menu item that the improved statement posting feature provides.</span></span>

<span data-ttu-id="0c771-151">Processen og fremgangsmåden til beregning og bogføring af opgørelser i et batch er den samme, som de var i den ældre bogføringsfunktion.</span><span class="sxs-lookup"><span data-stu-id="0c771-151">The process and steps for calculating and posting statements in a batch are the same as they were in the legacy statement posting feature.</span></span> <span data-ttu-id="0c771-152">Dog er der sket betydelige forbedringer i kerne-backend-behandlingen af opgørelser.</span><span class="sxs-lookup"><span data-stu-id="0c771-152">However, significant improvements have been made in the core back-end processing of the statements.</span></span> <span data-ttu-id="0c771-153">Disse forbedringer gør det mere fleksibel og giver bedre indsigt i tilstands- og fejloplysninger.</span><span class="sxs-lookup"><span data-stu-id="0c771-153">These improvements make the process more resilient, and provide for better visibility into the states and error information.</span></span> <span data-ttu-id="0c771-154">Brugerne kan derfor fokusere på hovedårsagen til fejl og derefter fortsætte bogføringsprocessen uden at forårsage beskadigelse af data og uden, at det kræver datarettelser.</span><span class="sxs-lookup"><span data-stu-id="0c771-154">Therefore, users can address the root cause of errors and then continue the posting process without causing data corruption and without causing data fixes to be required.</span></span>

<span data-ttu-id="0c771-155">I følgende afsnit beskrives nogle af de vigtigste forbedringer af opgørelsesbogføringsfunktionen, som findes i brugergrænsefladen for opgørelser og bogførte opgørelser.</span><span class="sxs-lookup"><span data-stu-id="0c771-155">The following sections describe some of the major improvements for the statement posting feature that appear in the user interface for statements and posted statements.</span></span>

### <a name="status-details"></a><span data-ttu-id="0c771-156">Statusoplysninger</span><span class="sxs-lookup"><span data-stu-id="0c771-156">Status details</span></span>

<span data-ttu-id="0c771-157">Der er indført en ny tilstandsmodel i opgørelsesbogføringsrutinen på tværs af beregning og bogføring.</span><span class="sxs-lookup"><span data-stu-id="0c771-157">A new state model has been introduced in the statement posting routine across the calculation and posting processes.</span></span>

<span data-ttu-id="0c771-158">I følgende tabel beskrives de forskellige tilstande og deres rækkefølge under beregningsprocessen.</span><span class="sxs-lookup"><span data-stu-id="0c771-158">The following table describes the various states and their order during the calculation process.</span></span>

| <span data-ttu-id="0c771-159">Tilstandsrækkefølge</span><span class="sxs-lookup"><span data-stu-id="0c771-159">State order</span></span> | <span data-ttu-id="0c771-160">Status</span><span class="sxs-lookup"><span data-stu-id="0c771-160">State</span></span>      | <span data-ttu-id="0c771-161">Betegnelse</span><span class="sxs-lookup"><span data-stu-id="0c771-161">Description</span></span> |
|-------------|------------|-------------|
| <span data-ttu-id="0c771-162">1</span><span class="sxs-lookup"><span data-stu-id="0c771-162">1</span></span>           | <span data-ttu-id="0c771-163">Igangsat</span><span class="sxs-lookup"><span data-stu-id="0c771-163">Started</span></span>    | <span data-ttu-id="0c771-164">Opgørelsen er oprettet og er klar til at blive beregnet.</span><span class="sxs-lookup"><span data-stu-id="0c771-164">The statement was created and is ready to be calculated.</span></span> |
| <span data-ttu-id="0c771-165">2</span><span class="sxs-lookup"><span data-stu-id="0c771-165">2</span></span>           | <span data-ttu-id="0c771-166">Afmærket</span><span class="sxs-lookup"><span data-stu-id="0c771-166">Marked</span></span>     | <span data-ttu-id="0c771-167">De posteringer, der er relevante for opgørelsen, identificeres baseret på parameterindstillingerne i opgørelsen, og de er markeret med opgørelses-id'et.</span><span class="sxs-lookup"><span data-stu-id="0c771-167">The transactions that are in scope for the statement are identified based on the statement parameters, and they are marked with the statement ID.</span></span> |
| <span data-ttu-id="0c771-168">3</span><span class="sxs-lookup"><span data-stu-id="0c771-168">3</span></span>           | <span data-ttu-id="0c771-169">Beregnet</span><span class="sxs-lookup"><span data-stu-id="0c771-169">Calculated</span></span> | <span data-ttu-id="0c771-170">Opgørelseslinjerne beregnes og vises.</span><span class="sxs-lookup"><span data-stu-id="0c771-170">The statement lines are computed and shown.</span></span> |

<span data-ttu-id="0c771-171">I følgende tabel beskrives de forskellige tilstande og deres rækkefølge under bogføringsprocessen.</span><span class="sxs-lookup"><span data-stu-id="0c771-171">The following table describes the various states and their order during the posting process.</span></span>

| <span data-ttu-id="0c771-172">Tilstandsrækkefølge</span><span class="sxs-lookup"><span data-stu-id="0c771-172">State order</span></span> | <span data-ttu-id="0c771-173">Status</span><span class="sxs-lookup"><span data-stu-id="0c771-173">State</span></span>                   | <span data-ttu-id="0c771-174">Betegnelse</span><span class="sxs-lookup"><span data-stu-id="0c771-174">Description</span></span> |
|-------------|-------------------------|-------------|
| <span data-ttu-id="0c771-175">1</span><span class="sxs-lookup"><span data-stu-id="0c771-175">1</span></span>           | <span data-ttu-id="0c771-176">Markeret</span><span class="sxs-lookup"><span data-stu-id="0c771-176">Checked</span></span>                 | <span data-ttu-id="0c771-177">Der udføres flere valideringer, der er relateret til parametre (f.eks. dispositionsgebyret) og til opgørelsen og opgørelseslinjerne (f.eks. forskellen mellem det optalte beløb og transaktionsbeløbet).</span><span class="sxs-lookup"><span data-stu-id="0c771-177">Multiple validations are done that are related to parameters (for example, the disposition charge), and to the statement and statement lines (for example, the difference between the counted amount and the transaction amount).</span></span> |
| <span data-ttu-id="0c771-178">2</span><span class="sxs-lookup"><span data-stu-id="0c771-178">2</span></span>           | <span data-ttu-id="0c771-179">Aggregeret</span><span class="sxs-lookup"><span data-stu-id="0c771-179">Aggregated</span></span>              | <span data-ttu-id="0c771-180">Salgstransaktioner for navngivne og unavngivne kunder aggregeres baseret på konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="0c771-180">Sales transactions for named and unnamed customers are aggregated based on the configuration.</span></span> <span data-ttu-id="0c771-181">Hver aggregeret transaktion konverteres til sidst til en salgsordre.</span><span class="sxs-lookup"><span data-stu-id="0c771-181">Every aggregated transaction is eventually converted to a sales order.</span></span> |
| <span data-ttu-id="0c771-182">3</span><span class="sxs-lookup"><span data-stu-id="0c771-182">3</span></span>           | <span data-ttu-id="0c771-183">Kundeordre oprettet</span><span class="sxs-lookup"><span data-stu-id="0c771-183">Customer order created</span></span>  | <span data-ttu-id="0c771-184">Baseret på den aggregerede transaktion oprettes der salgsordrer i systemet.</span><span class="sxs-lookup"><span data-stu-id="0c771-184">Based on the aggregated transaction, sales orders are created in the system.</span></span> |
| <span data-ttu-id="0c771-185">4</span><span class="sxs-lookup"><span data-stu-id="0c771-185">4</span></span>           | <span data-ttu-id="0c771-186">Kundeordre faktureret</span><span class="sxs-lookup"><span data-stu-id="0c771-186">Customer order invoiced</span></span> | <span data-ttu-id="0c771-187">Salgsordrer faktureres.</span><span class="sxs-lookup"><span data-stu-id="0c771-187">Sales orders are invoiced.</span></span> |
| <span data-ttu-id="0c771-188">5</span><span class="sxs-lookup"><span data-stu-id="0c771-188">5</span></span>           | <span data-ttu-id="0c771-189">Bogførte rabatter</span><span class="sxs-lookup"><span data-stu-id="0c771-189">Discounts posted</span></span>        | <span data-ttu-id="0c771-190">Periodiske rabatkladder bogføres ud fra konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="0c771-190">Periodic discount journals are posted based on the configuration.</span></span> |
| <span data-ttu-id="0c771-191">6</span><span class="sxs-lookup"><span data-stu-id="0c771-191">6</span></span>           | <span data-ttu-id="0c771-192">Bogført indtægt/udgift</span><span class="sxs-lookup"><span data-stu-id="0c771-192">Income/expense posted</span></span>   | <span data-ttu-id="0c771-193">Indtægts-/ udgiftstransaktioner bogføres som bilag.</span><span class="sxs-lookup"><span data-stu-id="0c771-193">Income/expense transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="0c771-194">7</span><span class="sxs-lookup"><span data-stu-id="0c771-194">7</span></span>           | <span data-ttu-id="0c771-195">Tilknyttede bilag</span><span class="sxs-lookup"><span data-stu-id="0c771-195">Vouchers linked</span></span>         | <span data-ttu-id="0c771-196">Betalingskladder oprettes og sammenkædes med den tilsvarende faktura.</span><span class="sxs-lookup"><span data-stu-id="0c771-196">Payment journals are created and linked to the corresponding invoice.</span></span> |
| <span data-ttu-id="0c771-197">8</span><span class="sxs-lookup"><span data-stu-id="0c771-197">8</span></span>           | <span data-ttu-id="0c771-198">Bogførte betalinger</span><span class="sxs-lookup"><span data-stu-id="0c771-198">Payments posted</span></span>         | <span data-ttu-id="0c771-199">Betalingskladder bogførtes.</span><span class="sxs-lookup"><span data-stu-id="0c771-199">Payment journals are posted.</span></span> |
| <span data-ttu-id="0c771-200">9</span><span class="sxs-lookup"><span data-stu-id="0c771-200">9</span></span>           | <span data-ttu-id="0c771-201">Bogførte gavekort</span><span class="sxs-lookup"><span data-stu-id="0c771-201">Gift cards posted</span></span>       | <span data-ttu-id="0c771-202">Gavekorttransaktioner bogføres som bilag.</span><span class="sxs-lookup"><span data-stu-id="0c771-202">Gift card transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="0c771-203">10</span><span class="sxs-lookup"><span data-stu-id="0c771-203">10</span></span>          | <span data-ttu-id="0c771-204">Opslået</span><span class="sxs-lookup"><span data-stu-id="0c771-204">Posted</span></span>                  | <span data-ttu-id="0c771-205">Opgørelsen markeres som bogført.</span><span class="sxs-lookup"><span data-stu-id="0c771-205">The statement is marked as posted.</span></span> |

<span data-ttu-id="0c771-206">Hver tilstand i de foregående tabeller er af natur uafhængig, og der opbygges en hierarkisk afhængighed mellem tilstandene.</span><span class="sxs-lookup"><span data-stu-id="0c771-206">Every state in the preceding tables is independent in nature, and a hierarchical dependency is built between the states.</span></span> <span data-ttu-id="0c771-207">Denne afhængighed løber fra top til bund.</span><span class="sxs-lookup"><span data-stu-id="0c771-207">This dependency flows from top to bottom.</span></span> <span data-ttu-id="0c771-208">Hvis der opstår fejl i systemet, mens det behandler en tilstand, vender status for tilstanden tilbage til den foregående tilstand.</span><span class="sxs-lookup"><span data-stu-id="0c771-208">If the system encounters any errors while it's processing a state, the status of the statement is reverted to the previous state.</span></span> <span data-ttu-id="0c771-209">Alle efterfølgende forsøg, der foretages af processen, fortsætter fra den tilstand, der mislykkedes, og flytter fortsat fremad i processen.</span><span class="sxs-lookup"><span data-stu-id="0c771-209">Any subsequent reattempt of the process resumes from the state that failed and continues to move forward.</span></span> <span data-ttu-id="0c771-210">Denne metode har følgende fordele:</span><span class="sxs-lookup"><span data-stu-id="0c771-210">This approach has the following benefits:</span></span>

- <span data-ttu-id="0c771-211">Brugeren har fuldstændig synlighed i den tilstand, hvor fejlen opstod.</span><span class="sxs-lookup"><span data-stu-id="0c771-211">The user has complete visibility into the state where the error occurred.</span></span>
- <span data-ttu-id="0c771-212">Beskadigelse af data undgås.</span><span class="sxs-lookup"><span data-stu-id="0c771-212">Data corruption is avoided.</span></span> <span data-ttu-id="0c771-213">Der var f.eks. forekomster i den ældre funktion til bogføring af opgørelser, hvor nogle af slagordrerne blev faktureret, mens andre forblev åbne.</span><span class="sxs-lookup"><span data-stu-id="0c771-213">For example, in the legacy statement posting feature, there were instances where some sales orders were invoiced but others were left open.</span></span> <span data-ttu-id="0c771-214">Der var også forekomster, hvor nogle betalingskladder ikke havde en tilhørende faktura at udligne, fordi der opstod en fejl i fakturabogføringen.</span><span class="sxs-lookup"><span data-stu-id="0c771-214">There were also instances where some payment journals didn't have a corresponding invoice to settle, because the invoice posting had an error.</span></span>
- <span data-ttu-id="0c771-215">Brugere kan se den aktuelle tilstand for en opgørelse ved hjælp af knappen **Statusoplysninger** i gruppen **Detaljer om udførelse** i opgørelsen.</span><span class="sxs-lookup"><span data-stu-id="0c771-215">Users can see the current state of a statement by using the **Status details** button in the **Execution details** group of the statement.</span></span> <span data-ttu-id="0c771-216">Siden med statusdetaljer består af tre sektioner:</span><span class="sxs-lookup"><span data-stu-id="0c771-216">The status details page has three sections:</span></span>

    - <span data-ttu-id="0c771-217">Den første sektion viser den aktuelle status for opgørelsen sammen med fejlkoden og en detaljeret fejlmeddelelse, hvis der opstod en fejl.</span><span class="sxs-lookup"><span data-stu-id="0c771-217">The first section shows the current status of the statement, together with the error code and a detailed error message, if an error occurred.</span></span>
    - <span data-ttu-id="0c771-218">Den anden sektion viser beregningsprocessens forskellige tilstande.</span><span class="sxs-lookup"><span data-stu-id="0c771-218">The second section shows the various states of the calculation process.</span></span> <span data-ttu-id="0c771-219">Visuelle tegn angiver tilstande, der er blevet udført, tilstande, der ikke kunne køres på grund af fejl, og tilstande, der endnu ikke er udført.</span><span class="sxs-lookup"><span data-stu-id="0c771-219">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>
    - <span data-ttu-id="0c771-220">Den tredje sektion viser bogføringsprocessens forskellige tilstande.</span><span class="sxs-lookup"><span data-stu-id="0c771-220">The third section shows the various states of the posting process.</span></span> <span data-ttu-id="0c771-221">Visuelle tegn angiver tilstande, der er blevet udført, tilstande, der ikke kunne køres på grund af fejl, og tilstande, der endnu ikke er udført.</span><span class="sxs-lookup"><span data-stu-id="0c771-221">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>

<span data-ttu-id="0c771-222">Hovedet i den anden og tredje sektion viser derudover den samlede status for den relevante proces.</span><span class="sxs-lookup"><span data-stu-id="0c771-222">Additionally, the header of the second and third sections shows the overall status of the relevant process.</span></span>

### <a name="event-logs"></a><span data-ttu-id="0c771-223">Hændelseslogge</span><span class="sxs-lookup"><span data-stu-id="0c771-223">Event logs</span></span>

<span data-ttu-id="0c771-224">En opgørelse, gennemgår forskellige handlinger (for eksempel Opret, Beregn, Fjern og Bogfør), og flere forekomster af den samme handling kan kaldes under opgørelsens livscyklus.</span><span class="sxs-lookup"><span data-stu-id="0c771-224">A statement goes through various operations (for example, Create, Calculate, Clear, and Post), and multiple instances of the same operation might be called during the statement's lifecycle.</span></span> <span data-ttu-id="0c771-225">F.eks. efter en opgørelse er oprettet og beregnet, kan en bruger fjerne opgørelsen og beregne den igen.</span><span class="sxs-lookup"><span data-stu-id="0c771-225">For example, after a statement is created and calculated, a user can clear the statement and calculate it again.</span></span> <span data-ttu-id="0c771-226">Knappen **Hændelseslogge** i gruppen **Detaljer om udførelse** i opgørelsen indeholder et fuldstændigt revisionsspor for de forskellige handlinger, der blev kaldt i en opgørelse, sammen med oplysninger om, hvornår disse handlinger blev kaldt.</span><span class="sxs-lookup"><span data-stu-id="0c771-226">The **Event logs** button in the **Execution details** group of the statement provides a complete audit trail of the various operations that were called on a statement, together with information about when those operations were called.</span></span>

### <a name="aggregated-transactions"></a><span data-ttu-id="0c771-227">Aggregerede transaktioner</span><span class="sxs-lookup"><span data-stu-id="0c771-227">Aggregated transactions</span></span>

<span data-ttu-id="0c771-228">Under bogføringsprocessen aggregeres salgsposteringerne baseret på konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="0c771-228">During the posting process, the sales transactions are aggregated based on the configuration.</span></span> <span data-ttu-id="0c771-229">Disse aggregerede transaktioner gemmes i systemet og bruges til at oprette salgsordrer.</span><span class="sxs-lookup"><span data-stu-id="0c771-229">These aggregated transactions are stored in the system and used to create sales orders.</span></span> <span data-ttu-id="0c771-230">Hver aggregerede transaktion opretter én tilsvarende salgsordre i systemet.</span><span class="sxs-lookup"><span data-stu-id="0c771-230">Every aggregated transaction creates one corresponding sales order in the system.</span></span> <span data-ttu-id="0c771-231">Du kan se de aggregerede tilstande ved hjælp af knappen **Aggregerede transaktioner** i gruppen **Detaljer om udførelse** i opgørelsen.</span><span class="sxs-lookup"><span data-stu-id="0c771-231">You can view the aggregated transactions by using the **Aggregated transactions** button in the **Execution details** group of the statement.</span></span>

<span data-ttu-id="0c771-232">Fanen **Oplysninger om salgsordre** i en aggregeret transaktion indeholder følgende oplysninger:</span><span class="sxs-lookup"><span data-stu-id="0c771-232">The **Sales order detail** tab of an aggregated transaction shows the following information:</span></span>

- <span data-ttu-id="0c771-233">**Post-id** – Id'et for den aggregerede transaktion.</span><span class="sxs-lookup"><span data-stu-id="0c771-233">**Record ID** – The ID of the aggregated transaction.</span></span>
- <span data-ttu-id="0c771-234">**Opgørelsesnummer** – Den opgørelse, som den aggregerede transaktion tilhører.</span><span class="sxs-lookup"><span data-stu-id="0c771-234">**Statement number** – The statement that the aggregated transaction belongs to.</span></span>
- <span data-ttu-id="0c771-235">**Dato** – Den dato, hvor den aggregerede transaktion blev oprettet.</span><span class="sxs-lookup"><span data-stu-id="0c771-235">**Date** – The date when the aggregated transaction was created.</span></span>
- <span data-ttu-id="0c771-236">**Salgs-id** – Når der oprettes en salgsordre fra den aggregerede transaktion, er dette salgsordre-id'et.</span><span class="sxs-lookup"><span data-stu-id="0c771-236">**Sales ID** – When a sales order is created from the aggregated transaction, the sales order ID.</span></span> <span data-ttu-id="0c771-237">Hvis dette felt er tomt, er den tilsvarende salgsordre ikke blevet oprettet.</span><span class="sxs-lookup"><span data-stu-id="0c771-237">If this field is blank, the corresponding sales order hasn't been created.</span></span>
- <span data-ttu-id="0c771-238">**Antal aggregerede linjer** – Det samlede antal linjer til den aggregerede transaktion og salgsordre.</span><span class="sxs-lookup"><span data-stu-id="0c771-238">**Number of aggregated lines** – The total number of lines for the aggregated transaction and sales order.</span></span>
- <span data-ttu-id="0c771-239">**Status** – Den sidste status for den aggregerede transaktion.</span><span class="sxs-lookup"><span data-stu-id="0c771-239">**Status** – The last status of the aggregated transaction.</span></span>
- <span data-ttu-id="0c771-240">**Faktura-id** – Når salgsordren for den aggregerede transaktion er faktureret, er dette salgsfaktura-id'et.</span><span class="sxs-lookup"><span data-stu-id="0c771-240">**Invoice ID** – When the sales order for the aggregated transaction is invoiced, the sales invoice ID.</span></span> <span data-ttu-id="0c771-241">Hvis dette felt er tomt, er fakturaen for salgsordren ikke blevet bogført.</span><span class="sxs-lookup"><span data-stu-id="0c771-241">If this field is blank, the invoice for the sales order hasn't been posted.</span></span>

<span data-ttu-id="0c771-242">Fanen **Transaktionsdetaljer** i en aggregeret transaktion viser alle transaktioner, der er trukket ind i den aggregerede transaktion.</span><span class="sxs-lookup"><span data-stu-id="0c771-242">The **Transaction details** tab of an aggregated transaction shows all the transactions that have been pulled into the aggregated transaction.</span></span> <span data-ttu-id="0c771-243">De aggregerede linjer i den aggregerede transaktion viser alle de poster, der er aggregeret fra transaktionerne.</span><span class="sxs-lookup"><span data-stu-id="0c771-243">The aggregated lines on the aggregated transaction show all the aggregated records from the transactions.</span></span> <span data-ttu-id="0c771-244">De aggregerede linjer viser også oplysninger om f.eks. vare, variant, antal, pris, nettobeløb, enhed og lagersted.</span><span class="sxs-lookup"><span data-stu-id="0c771-244">The aggregated lines also show details such as the item, variant, quantity, price, net amount, unit, and warehouse.</span></span> <span data-ttu-id="0c771-245">Grundlæggende svarer hver aggregerede linje til én salgsordrelinje.</span><span class="sxs-lookup"><span data-stu-id="0c771-245">Basically, each aggregated line corresponds to one sales order line.</span></span>

<span data-ttu-id="0c771-246">Fra siden **Aggregerede transaktioner** kan du hente XML-filen til en bestemt aggregeret transaktion ved hjælp af knappen **Eksportér salgsordre-XML**.</span><span class="sxs-lookup"><span data-stu-id="0c771-246">From the **Aggregated transactions** page, you can download the XML for a specific aggregated transaction by using the **Export sales order XML** button.</span></span> <span data-ttu-id="0c771-247">Du kan bruge XML-filen til fejlfinding af problemer, der vedrører oprettelse af salgsordrer og bogføring.</span><span class="sxs-lookup"><span data-stu-id="0c771-247">You can use the XML to debug issues that involve sales order creation and posting.</span></span> <span data-ttu-id="0c771-248">Hent XML-filen, overfør den til et testmiljø, og foretag fejlfinding af problemet i testmiljøet.</span><span class="sxs-lookup"><span data-stu-id="0c771-248">Just download the XML, upload it to a test environment, and debug the issue in the test environment.</span></span> <span data-ttu-id="0c771-249">Funktionen til hentning af XML-filen til aggregerede transaktioner er ikke tilgængelig for opgørelser, der er bogført.</span><span class="sxs-lookup"><span data-stu-id="0c771-249">The functionality for downloading the XML for aggregated transactions isn't available for statements that have been posted.</span></span>

<span data-ttu-id="0c771-250">Den aggregerede transaktionsvisning giver følgende fordele:</span><span class="sxs-lookup"><span data-stu-id="0c771-250">The aggregated transaction view provides the following benefits:</span></span>

- <span data-ttu-id="0c771-251">Brugeren har indsigt i de aggregerede transaktioner, der mislykkedes under oprettelse af salgsordren, og de salgsordrer, der mislykkedes under faktureringen.</span><span class="sxs-lookup"><span data-stu-id="0c771-251">The user has visibility into the aggregated transactions that failed during sales order creation and the sales orders that failed during invoicing.</span></span>
- <span data-ttu-id="0c771-252">Brugeren har indsigt i, hvordan transaktioner bliver aggregeret.</span><span class="sxs-lookup"><span data-stu-id="0c771-252">The user has visibility into how transactions are aggregated.</span></span>
- <span data-ttu-id="0c771-253">Brugeren har et fuldstændigt revisionsspor, fra transaktioner til salgsordrer til salgsfakturaer.</span><span class="sxs-lookup"><span data-stu-id="0c771-253">The user has a complete audit trail, from transactions, to sales orders, to sales invoices.</span></span> <span data-ttu-id="0c771-254">Dette revisionsspor var ikke tilgængeligt i den ældre funktionen til bogføring af opgørelser.</span><span class="sxs-lookup"><span data-stu-id="0c771-254">This audit trail wasn't available in the legacy statement posting feature.</span></span>
- <span data-ttu-id="0c771-255">Den aggregerede XML-fil gør det nemmere at identificere problemer under oprettelse af salgsordrer og fakturering.</span><span class="sxs-lookup"><span data-stu-id="0c771-255">Aggregated XML file make it easier to identify issues during sales order creation and invoicing.</span></span>

### <a name="journal-vouchers"></a><span data-ttu-id="0c771-256">Kladdebilag</span><span class="sxs-lookup"><span data-stu-id="0c771-256">Journal vouchers</span></span>

<span data-ttu-id="0c771-257">Knappen **Kladdebilag** i gruppen **Detaljer om udførelse** i opgørelsen viser alle de forskellige bilagsposteringer, der er oprettet for en opgørelse, og som vedrører rabatter, indtægts- eller udgiftskonti, gavekort osv.</span><span class="sxs-lookup"><span data-stu-id="0c771-257">The **Journal vouchers** button in the **Execution details** group of the statement shows all the various voucher transactions that are created for a statement, and that are related to discounts, income/expense accounts, gift cards, and so on.</span></span>

<span data-ttu-id="0c771-258">I øjeblikket vises disse data kun for bogførte opgørelser.</span><span class="sxs-lookup"><span data-stu-id="0c771-258">Currently, the program shows this data only for posted statements.</span></span>

### <a name="payment-journals"></a><span data-ttu-id="0c771-259">Betalingskladder</span><span class="sxs-lookup"><span data-stu-id="0c771-259">Payment journals</span></span>

<span data-ttu-id="0c771-260">Knappen **Betalingskladder** i gruppen **Detaljer om udførelse** i opgørelsen viser alle de forskellige betalingskladder, der er oprettet for en opgørelse.</span><span class="sxs-lookup"><span data-stu-id="0c771-260">The **Payment journals** button in the **Execution details** group of the statement shows all the various payment journals that are created for a statement.</span></span>

<span data-ttu-id="0c771-261">I øjeblikket vises disse data kun for bogførte opgørelser.</span><span class="sxs-lookup"><span data-stu-id="0c771-261">Currently, the program shows this data only for posted statements.</span></span>

## <a name="other-improvements"></a><span data-ttu-id="0c771-262">Andre forbedringer</span><span class="sxs-lookup"><span data-stu-id="0c771-262">Other improvements</span></span>

<span data-ttu-id="0c771-263">Der er foretaget andre backend-forbedringer, som brugerne kan se, af funktionen til bogføring af opgørelsen.</span><span class="sxs-lookup"><span data-stu-id="0c771-263">Other, back-end improvements that users can see have been made to the statement posting feature.</span></span> <span data-ttu-id="0c771-264">Her er nogle eksempler:</span><span class="sxs-lookup"><span data-stu-id="0c771-264">Here are some examples:</span></span>

- <span data-ttu-id="0c771-265">I aggregering indgår ikke overveje medarbejdere, terminal og skift af enheder.</span><span class="sxs-lookup"><span data-stu-id="0c771-265">The aggregation doesn't consider the staff, terminal, and shift entities.</span></span> <span data-ttu-id="0c771-266">Da der er færre aggregeringsparametre, skal der behandles færre salgsordrelinjer.</span><span class="sxs-lookup"><span data-stu-id="0c771-266">Because there are fewer aggregation parameters, fewer sales order lines must be processed.</span></span>
- <span data-ttu-id="0c771-267">Forekomsten af deadlock i transaktionstabeller reduceres ved at anvende yderligere udvidelsestabeller og ved at benytte indsættelser i stedet for opdateringshandlinger i transaktionstabeller.</span><span class="sxs-lookup"><span data-stu-id="0c771-267">The occurrence of deadlock on transaction tables is reduced by introducing additional extension tables and by doing insert operations instead of update operations on the transaction tables.</span></span>
- <span data-ttu-id="0c771-268">Antallet af igangværende batchopgaver er parameteriseret og begrænset.</span><span class="sxs-lookup"><span data-stu-id="0c771-268">The number of running batch tasks has been parameterized and limited.</span></span> <span data-ttu-id="0c771-269">Dette nummer kan derfor finjusteres specifikt til en kundes miljø.</span><span class="sxs-lookup"><span data-stu-id="0c771-269">Therefore, this number can be fine-tuned specifically to a customer's environment.</span></span> <span data-ttu-id="0c771-270">I den ældre funktionen til bogføring af opgørelser blev der oprettet et ubegrænset antal batchopgaver ad gangen.</span><span class="sxs-lookup"><span data-stu-id="0c771-270">In the legacy statement posting feature, an unlimited number of batch tasks was created at the same time.</span></span> <span data-ttu-id="0c771-271">Resultatet var uhåndterlige belastninger, omkostninger og flaskehalse på batchserveren.</span><span class="sxs-lookup"><span data-stu-id="0c771-271">The results were unmanageable loads, overhead, and bottlenecks on the batch server.</span></span>
- <span data-ttu-id="0c771-272">Opgørelser kan effektivt sættes i kø til behandling ved at prioritere de sætninger, der har det maksimale antal transaktioner.</span><span class="sxs-lookup"><span data-stu-id="0c771-272">Statements are efficiently queued for processing by prioritizing the statements that have the maximum number of transactions.</span></span>
- <span data-ttu-id="0c771-273">Batchprocesser, f.eks. **Beregn opgørelser i batch** og **Bogfør opgørelser i batch**, køres kun i batchtilstand.</span><span class="sxs-lookup"><span data-stu-id="0c771-273">Batch processes such as **Calculate statements in batch** and **Post statements in batch** are run only in batch mode.</span></span> <span data-ttu-id="0c771-274">I den ældre funktionen til bogføring af opgørelsen kunne brugerne vælge at køre disse batchprocesser i en interaktiv tilstand, som er en enkelttrådet handling i modsætning til batchprocesser, som er flertrådede.</span><span class="sxs-lookup"><span data-stu-id="0c771-274">In the legacy statement posting feature, users could choose to run these batch processes in an interactive mode which is s single threaded operation unlike batch processes which are multi-threaded.</span></span>
- <span data-ttu-id="0c771-275">I den ældre opgørelsesbogføringsfunktion placerede en fejl ved en batchopgave hele batchjobbet i fejltilstand.</span><span class="sxs-lookup"><span data-stu-id="0c771-275">In the legacy statement posting feature, any failure of a batch task put the whole batch job in an error state.</span></span> <span data-ttu-id="0c771-276">I den forbedrede funktion forårsager fejl i batchopgaver ikke, at batchjobbet sættes i fejltilstand, hvis andre batchopgaver fuldføres.</span><span class="sxs-lookup"><span data-stu-id="0c771-276">In the improved feature, batch task failures don't put the batch job in an error state if other batch tasks are successfully completed.</span></span> <span data-ttu-id="0c771-277">Du skal vurdere bogføringsstatussen for en batchkørsel, der kører ved hjælp af siden **Opgørelser**, hvor alle opgørelser, der ikke er blevet bogført på grund af fejl, vises.</span><span class="sxs-lookup"><span data-stu-id="0c771-277">You should assess the posting status for a batch execution run by using the **Statements** page, where you can see any statements that weren't posted because of errors.</span></span>
- <span data-ttu-id="0c771-278">I den ældre bogføringsfunktion får den første forekomst af en opgørelsesfejl hele batchen til at mislykkes.</span><span class="sxs-lookup"><span data-stu-id="0c771-278">In the legacy statement posting feature, the first occurrence of a statement failure causes the whole batch to fail.</span></span> <span data-ttu-id="0c771-279">De resterende opgørelser behandles ikke.</span><span class="sxs-lookup"><span data-stu-id="0c771-279">The remaining statements aren't processed.</span></span> <span data-ttu-id="0c771-280">I den forbedrede funktion fortsætter batchprocessen med at behandle alle opgørelser, selvom nogle af dem mislykkes.</span><span class="sxs-lookup"><span data-stu-id="0c771-280">In the improved feature, the batch process continues to process all statements, even if some of the statements fail.</span></span> <span data-ttu-id="0c771-281">En fordel er, at brugerne får indblik i, nøjagtigt hvor mange opgørelser der indeholder fejl.</span><span class="sxs-lookup"><span data-stu-id="0c771-281">One benefit is that users gain visibility into the exact number of statements that have errors.</span></span> <span data-ttu-id="0c771-282">Derfor behøver brugerne ikke at hænge fast i en uafbrudt fejlretningsløkke og kørsel af efteropgørelsesprocessen, indtil alle opgørelser er bogført.</span><span class="sxs-lookup"><span data-stu-id="0c771-282">Therefore, users don't have to be stuck in a continuous loop of fixing the errors and running the post statement process till all statements are posted.</span></span>

## <a name="general-guidance-about-the-statement-posting-process"></a><span data-ttu-id="0c771-283">Generel vejledning om processen til bogføring af opgørelsen</span><span class="sxs-lookup"><span data-stu-id="0c771-283">General guidance about the statement posting process</span></span>

- <span data-ttu-id="0c771-284">Vi anbefaler, at du kører opgørelsesbogføringsprocessen i et batch, fordi batchkørsler udnytter multitrådsfunktionerne i batchstrukturen.</span><span class="sxs-lookup"><span data-stu-id="0c771-284">We recommend that you run the statement posting process in a batch, because batch runs take advantage of the power of the batch framework in terms of multithreading.</span></span> <span data-ttu-id="0c771-285">Multi-trådning er nødvendig for at håndtere de store mængder af transaktioner, der normalt ses i bogføringer af opgørelser.</span><span class="sxs-lookup"><span data-stu-id="0c771-285">Multithreading is required in order to handle the huge volumes of transactions that are normally seen in statement postings.</span></span>
- <span data-ttu-id="0c771-286">Vi anbefaler, at du slår negativt fysisk lager til i varemodelgruppen, så du får en problemfri bogføringsoplevelse.</span><span class="sxs-lookup"><span data-stu-id="0c771-286">We recommend that you turn on negative physical inventory on the item model group, so that you have a seamless posting experience.</span></span> <span data-ttu-id="0c771-287">I visse scenarier kan negative opgørelser ikke bogføres, medmindre der er negativt fysisk lager.</span><span class="sxs-lookup"><span data-stu-id="0c771-287">In some scenarios, negative statements might not be able to be posted unless there is negative physical inventory.</span></span> <span data-ttu-id="0c771-288">Teoretisk set hvis der f.eks. findes kun én enhed af en vare på lager, og der har været en salgstransaktion og en returtransaktion for varen, skal transaktionen kunne bogføres, selv hvis negativt lager ikke er aktiveret.</span><span class="sxs-lookup"><span data-stu-id="0c771-288">For example, in theory, if there is only one unit of an item in inventory, and there have been a sales transaction and a return transaction for the item, the transaction should be able to be posted even if negative inventory isn't turned on.</span></span> <span data-ttu-id="0c771-289">Da processen til bogføring af opgørelsen henter både salgstransaktionen og returtransaktionen i en enkelt kundeordre, er der ingen garanti for, at salgslinjen bogføres først, efterfulgt af returlinjen.</span><span class="sxs-lookup"><span data-stu-id="0c771-289">However, because the statement posting process pulls both the sales transaction and the return transaction in a single customer order, there is no guarantee that the sales line will be posted first, followed by the return line.</span></span> <span data-ttu-id="0c771-290">Derfor kan der opstå fejl.</span><span class="sxs-lookup"><span data-stu-id="0c771-290">Therefore, errors can occur.</span></span> <span data-ttu-id="0c771-291">Hvis negativt lager er aktiveret i dette scenario, påvirkes bogføringen af transaktionen ikke negativt, og systemet afspejler lageret korrekt.</span><span class="sxs-lookup"><span data-stu-id="0c771-291">If negative inventory is turned on in this scenario, the transaction posting isn't negatively affected, and the system will correctly reflect the inventory.</span></span>
- <span data-ttu-id="0c771-292">Vi anbefaler, at du bruger aggregering, mens du beregner og bogfører opgørelser.</span><span class="sxs-lookup"><span data-stu-id="0c771-292">We recommend that you use aggregation while you calculate and post statements.</span></span> <span data-ttu-id="0c771-293">Derfor anbefales følgende indstillinger til nogle af aggregeringsparametrene:</span><span class="sxs-lookup"><span data-stu-id="0c771-293">Therefore, the following settings are recommended for some of the aggregation parameters:</span></span>

    - <span data-ttu-id="0c771-294">Gå til **Retail og Commerce** \> **Konfiguration af hovedkontor** \> **Parametre** \> **Commerce-parametre**.</span><span class="sxs-lookup"><span data-stu-id="0c771-294">Go to **Retail and Commerce** \> **Headquarters setup** \> **Parameters** \> **Commerce parameters**.</span></span> <span data-ttu-id="0c771-295">Vælg derefter **Oversigt** i feltet **Detaljeringsniveau** i oversigtspanelet **Opdatering af lager** under fanen **Bogføring**.</span><span class="sxs-lookup"><span data-stu-id="0c771-295">Then, on the **Posting** tab, on the **Inventory update** FastTab, in the **Detail level** field, select **Summary**.</span></span>
    - <span data-ttu-id="0c771-296">Gå til **Retail og Commerce** \> **Konfiguration af hovedkontor** \> **Parametre** \> **Commerce-parametre**.</span><span class="sxs-lookup"><span data-stu-id="0c771-296">Go to **Retail and Commerce** \> **Headquarters setup** \> **Parameters** \> **Commerce parameters**.</span></span> <span data-ttu-id="0c771-297">Under fanen **Bogføring** i oversigtspanelet **Aggregering** skal du derefter vælge **Ja** i indstillingen **Posteringer på bilag**.</span><span class="sxs-lookup"><span data-stu-id="0c771-297">Then, on the **Posting** tab, on the **Aggregation** FastTab, set the **Voucher transactions** option to **Yes**.</span></span>
