---
title: Oversigt over regnskabsintegration for Commerce-kanaler
description: Dette emne indeholder en oversigt over de regnskabsintegrationsfunktioner, der findes i Dynamics 365 Commerce.
author: josaw
manager: annbe
ms.date: 02/01/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.region: Global
ms.search.industry: Retail
ms.author: epopov
ms.search.validFrom: 2019-1-16
ms.dyn365.ops.version: 10
ms.openlocfilehash: 2f1abf29058e773f1645301fcd7a960df488d92b
ms.sourcegitcommit: deac22ba5377a912d93fe408c5ae875706378c2d
ms.translationtype: HT
ms.contentlocale: da-DK
ms.lasthandoff: 01/16/2021
ms.locfileid: "5017461"
---
# <a name="overview-of-fiscal-integration-for-commerce-channels"></a><span data-ttu-id="77850-103">Oversigt over regnskabsintegration for Commerce-kanaler</span><span class="sxs-lookup"><span data-stu-id="77850-103">Overview of fiscal integration for Commerce channels</span></span>

[!include [banner](../includes/banner.md)]

## <a name="introduction"></a><span data-ttu-id="77850-104">Introduktion</span><span class="sxs-lookup"><span data-stu-id="77850-104">Introduction</span></span>

<span data-ttu-id="77850-105">Dette emne indeholder en oversigt over de regnskabsintegrationsfunktioner, der findes i Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="77850-105">This topic is an overview of the fiscal integration capabilities that are available in Dynamics 365 Commerce.</span></span> <span data-ttu-id="77850-106">Regnskabsintegration omfatter integration med forskellige regnskabsenheder og -tjenester, der muliggør regnskabsregistrering af salg i overensstemmelse med lokal regnskabslovgivning, som har til formål at forhindre momssvindel i detailbranchen.</span><span class="sxs-lookup"><span data-stu-id="77850-106">Fiscal integration includes integration with various fiscal devices and services that enable fiscal registration of sales in accordance with local fiscal laws that are aimed at preventing tax fraud in the retail industry.</span></span> <span data-ttu-id="77850-107">Her er nogle typiske scenarier, som kan adresseres ved hjælp af regnskabsintegrationen:</span><span class="sxs-lookup"><span data-stu-id="77850-107">Here are some typical scenarios that can be covered by using fiscal integration:</span></span>

- <span data-ttu-id="77850-108">Registrere et salg på en regnskabsenhed, der er knyttet til POS, f.eks. en bonprinter, og udskrive en regnskabskvittering til kunden.</span><span class="sxs-lookup"><span data-stu-id="77850-108">Register a sale on a fiscal device that is connected to point of sale (POS), such as a fiscal printer, and print a fiscal receipt for the customer.</span></span>
- <span data-ttu-id="77850-109">Sende oplysninger, der er relateret til salg og returvarer, som er behandlet i Retail POS, sikkert til en ekstern webtjeneste, der styres af skattemyndighederne.</span><span class="sxs-lookup"><span data-stu-id="77850-109">Securely submit information that is related to sales and returns that are completed in Retail POS to an external web-service that is operated by the tax authority.</span></span>
- <span data-ttu-id="77850-110">Hjælpe med at sikre, at salgstransaktionsdata ikke kan ændres, ved hjælp af digitale signaturer.</span><span class="sxs-lookup"><span data-stu-id="77850-110">Help guarantee inalterability of sales transaction data through digital signatures.</span></span>

<span data-ttu-id="77850-111">Regnskabsintegrationsfunktionen er en struktur, der indeholder en almindelig løsning til yderligere udvikling og tilpasning af integrationen mellem Retail POS og regnskabsenheder og -tjenester.</span><span class="sxs-lookup"><span data-stu-id="77850-111">The fiscal integration functionality is a framework that provides a common solution for further development and customization of the integration between Retail POS and fiscal devices and services.</span></span> <span data-ttu-id="77850-112">Funktionen indeholder også eksempler på regnskabsintegration, der understøtter grundlæggende scenarier for bestemte lande eller områder, og som kan bruges sammen med bestemte regnskabsenheder eller -tjenester.</span><span class="sxs-lookup"><span data-stu-id="77850-112">The functionality also includes fiscal integration samples that support basic scenarios for specific countries or regions, and that work with specific fiscal devices or services.</span></span> <span data-ttu-id="77850-113">Et eksempel på regnskabsintegration består af flere udvidelser af Commerce-komponenter og er medtaget i SDK'et (Software Development Kit).</span><span class="sxs-lookup"><span data-stu-id="77850-113">A fiscal integration sample consists of several extensions of Commerce components and is included in the software development kit (SDK).</span></span> <span data-ttu-id="77850-114">Du kan finde flere oplysninger om regnskabsintegrationseksempler i [Eksempler på regnskabsintegration i Retail SDK](#fiscal-integration-samples-in-the-retail-sdk).</span><span class="sxs-lookup"><span data-stu-id="77850-114">For more information about the fiscal integration samples, see [Fiscal integration samples in the Retail SDK](#fiscal-integration-samples-in-the-retail-sdk).</span></span> <span data-ttu-id="77850-115">Du kan finde oplysninger om, hvordan du installerer og bruger Retail SDK'et, i [Arkitektur for udviklingsværktøjskasse (SDK) til Retail](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span><span class="sxs-lookup"><span data-stu-id="77850-115">For information about how to install and use the Retail SDK, see [Retail software development kit (SDK) architecture](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span></span>

<span data-ttu-id="77850-116">For at understøtte andre scenarier, der ikke understøttes af et regnskabsintegrationseksempel, for at integrere Retail POS med andre regnskabsenheder eller -tjenester eller for at opfylde kravene i andre lande eller områder, skal du enten udvide et eksisterende regnskabsintegrationseksempel eller oprette et nyt eksempel ved hjælp af et eksisterende eksempel.</span><span class="sxs-lookup"><span data-stu-id="77850-116">To support other scenarios that aren't supported by a fiscal integration sample, to integrate Retail POS with other fiscal devices or services, or to cover requirements of other countries or regions, you must either extend an existing fiscal integration sample or create a new sample by using an existing sample as an example.</span></span>

## <a name="fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices"></a><span data-ttu-id="77850-117">Regnskabsregistreringsprocessen og eksempler på regnskabsintegration for regnskabsenheder</span><span class="sxs-lookup"><span data-stu-id="77850-117">Fiscal registration process and fiscal integration samples for fiscal devices</span></span>

<span data-ttu-id="77850-118">En regnskabsregistreringsproces i Retail POS kan bestå af et eller flere trin.</span><span class="sxs-lookup"><span data-stu-id="77850-118">A fiscal registration process in Retail POS can consist of one or more steps.</span></span> <span data-ttu-id="77850-119">Hvert trin omfatter regnskabsregistrering af bestemte transaktioner eller -hændelser i én regnskabsenhed eller -tjeneste.</span><span class="sxs-lookup"><span data-stu-id="77850-119">Each step involves fiscal registration of specific transactions or events in one fiscal device or service.</span></span> <span data-ttu-id="77850-120">Følgende løsningskomponenter deltager i regnskabsregistreringen i en regnskabsenhed, der er forbundet med en hardwarestation:</span><span class="sxs-lookup"><span data-stu-id="77850-120">The following solution components participate in the fiscal registration in a fiscal device that is connected to a Hardware station:</span></span>

- <span data-ttu-id="77850-121">**Udvidelse til Commerce Runtime (CRT)** – Denne komponent serialiserer transaktions-/hændelsesdata i det format, der også bruges til interaktion med regnskabsenheden, analyserer svar fra regnskabsenheden og lagrer svarene i kanaldatabasen.</span><span class="sxs-lookup"><span data-stu-id="77850-121">**Commerce runtime (CRT) extension** – This component serializes transaction/event data in the format that is also used for interaction with the fiscal device, parses responses from the fiscal device, and stores the responses in the channel database.</span></span> <span data-ttu-id="77850-122">Filtypenavnet definerer også bestemte transaktioner og hændelser, der skal registreres.</span><span class="sxs-lookup"><span data-stu-id="77850-122">The extension also defines the specific transactions and events that must be registered.</span></span> <span data-ttu-id="77850-123">Denne komponent omtales ofte som en *regnskabsdokumentudbyder*.</span><span class="sxs-lookup"><span data-stu-id="77850-123">This component is often referred to as a *fiscal document provider*.</span></span>
- <span data-ttu-id="77850-124">**Udvidelse til hardwarestation** – Denne komponent initialiserer kommunikationen med regnskabsenheden, sender anmodninger og direkte kommandoer til regnskabsenheden ud fra transaktions-/hændelsesdata, der er hentet fra regnskabsdokument, og modtager svar fra regnskabsenheden.</span><span class="sxs-lookup"><span data-stu-id="77850-124">**Hardware station extension** – This component initializes the communication with the fiscal device, sends requests and direct commands to the fiscal device based on the transaction/event data that is extracted from the fiscal document, and receives responses from the fiscal device.</span></span> <span data-ttu-id="77850-125">Denne komponent omtales ofte som en *regnskabsconnector*.</span><span class="sxs-lookup"><span data-stu-id="77850-125">This component is often referred to as a *fiscal connector*.</span></span>

<span data-ttu-id="77850-126">Et eksempel på regnskabsintegration for en regnskabsenhed indeholder CRT- og hardwarestationsudvidelser for henholdsvis en udbyder af regnskabsdokumenter og en regnskabsconnector.</span><span class="sxs-lookup"><span data-stu-id="77850-126">A fiscal integration sample for a fiscal device contains the CRT and Hardware station extensions for a fiscal document provider and a fiscal connector, respectively.</span></span> <span data-ttu-id="77850-127">Det indeholder også følgende komponentkonfigurationer:</span><span class="sxs-lookup"><span data-stu-id="77850-127">It also contains the following component configurations:</span></span>

- <span data-ttu-id="77850-128">**Konfiguration af udbydere af regnskabsdokumenter** – Denne konfiguration definerer en outputmetode til og et format for regnskabsdokumenter.</span><span class="sxs-lookup"><span data-stu-id="77850-128">**Fiscal document provider configuration** – This configuration defines an output method and a format for fiscal documents.</span></span> <span data-ttu-id="77850-129">Den indeholder også en datatilknytning til moms og betalingsmetoder for at gøre data fra Retail POS kompatible med de værdier, der er foruddefineret i regnskabsenhedens firmware.</span><span class="sxs-lookup"><span data-stu-id="77850-129">It also contains a data mapping for taxes and payment methods, to make data from Retail POS compatible with the values that are predefined in the fiscal device firmware.</span></span>
- <span data-ttu-id="77850-130">**Konfiguration af regnskabsconnectoren** – Denne konfiguration definerer den fysiske kommunikation med den ønskede regnskabsenhed.</span><span class="sxs-lookup"><span data-stu-id="77850-130">**Fiscal connector configuration** – This configuration defines the physical communication with the specific fiscal device.</span></span>

<span data-ttu-id="77850-131">En regnskabsregistreringsproces for et bestemt POS-kasseapparat er defineret af en tilsvarende indstilling i POS-funktionalitetsprofilen.</span><span class="sxs-lookup"><span data-stu-id="77850-131">A fiscal registration process for a specific POS register is defined by a corresponding setting in the POS functionality profile.</span></span> <span data-ttu-id="77850-132">Du kan finde flere oplysninger om, hvordan du kan konfigurere en regnskabsregistreringsproces, overføre konfigurationer for regnskabsdokumentudbyderen og regnskabsconnectoren og ændre deres parametre, under [Konfigurere en regnskabsregistreringsproces](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span><span class="sxs-lookup"><span data-stu-id="77850-132">For more details about how to configure a fiscal registration process, upload fiscal document provider and fiscal connector configurations, and change their parameters, see [Set up a fiscal registration process](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span></span>

<span data-ttu-id="77850-133">Følgende eksempel viser en typisk regnskabsregistreringskørsel af processen for en regnskabsenhed.</span><span class="sxs-lookup"><span data-stu-id="77850-133">The following example shows a typical fiscal registration execution flow for a fiscal device.</span></span> <span data-ttu-id="77850-134">Processen starter med en hændelse i POS (f.eks. afslutning af en salgstransaktion) og implementerer følgende sekvens af trin:</span><span class="sxs-lookup"><span data-stu-id="77850-134">The flow starts with an event in the POS (for example, finalization of a sales transaction) and implements the following sequence of steps:</span></span>

1. <span data-ttu-id="77850-135">POS anmoder om et regnskabsdokument fra CRT.</span><span class="sxs-lookup"><span data-stu-id="77850-135">The POS requests a fiscal document from CRT.</span></span>
2. <span data-ttu-id="77850-136">CRT bestemmer, om den aktuelle hændelse kræver regnskabsregistrering.</span><span class="sxs-lookup"><span data-stu-id="77850-136">CRT determines whether the current event requires fiscal registration.</span></span>
3. <span data-ttu-id="77850-137">CRT identificerer, baseret på indstillingerne for regnskabsregistreringsprocessen, en regnskabsconnector og tilsvarende regnskabsdokumentudbyder, der skal bruges til regnskabsregistreringen.</span><span class="sxs-lookup"><span data-stu-id="77850-137">Based on the fiscal registration process settings, CRT identifies a fiscal connector and corresponding fiscal document provider to use for the fiscal registration.</span></span>
4. <span data-ttu-id="77850-138">CRT kører regnskabsdokumentudbyderen, der genererer et regnskabsdokument (f.eks. et XML-dokument), der repræsenterer transaktionen eller -hændelsen.</span><span class="sxs-lookup"><span data-stu-id="77850-138">CRT runs the fiscal document provider that generates a fiscal document (for example, an XML document) that represents the transaction or event.</span></span>
5. <span data-ttu-id="77850-139">POS sender regnskabsdokumentet, som CRT forbereder til en hardwarestation.</span><span class="sxs-lookup"><span data-stu-id="77850-139">The POS sends the fiscal document that CRT prepares to a Hardware station.</span></span>
6. <span data-ttu-id="77850-140">Hardwarestationen kører regnskabsconnectoren, der behandler regnskabsdokumentet og oplyser regnskabsenheden eller -tjenesten om det.</span><span class="sxs-lookup"><span data-stu-id="77850-140">The Hardware station runs the fiscal connector that processes the fiscal document and communicates it to the fiscal device or service.</span></span>
7. <span data-ttu-id="77850-141">POS analyserer svaret fra regnskabsenheden eller -tjenesten for at afgøre, om regnskabsregistreringen blev udført korrekt.</span><span class="sxs-lookup"><span data-stu-id="77850-141">The POS analyzes the response from the fiscal device or service to determine whether the fiscal registration was successful.</span></span>
8. <span data-ttu-id="77850-142">CRT gemmer svaret i kanaldatabasen.</span><span class="sxs-lookup"><span data-stu-id="77850-142">CRT saves the response to the channel database.</span></span>

<span data-ttu-id="77850-143">![Løsningsskema](media/emea-fiscal-integration-solution.png "Løsningsskema")</span><span class="sxs-lookup"><span data-stu-id="77850-143">![Solution schema](media/emea-fiscal-integration-solution.png "Solution schema")</span></span>

## <a name="error-handling"></a><span data-ttu-id="77850-144">Fejlhåndtering</span><span class="sxs-lookup"><span data-stu-id="77850-144">Error handling</span></span>

<span data-ttu-id="77850-145">Regnskabsintegrationen struktur indeholder følgende indstillinger til håndtering af fejl under regnskabsregistreringen:</span><span class="sxs-lookup"><span data-stu-id="77850-145">The fiscal integration framework provides the following options to handle failures during fiscal registration:</span></span>

- <span data-ttu-id="77850-146">**Prøv igen** – Operatører kan bruge denne indstilling, så fejlen kan rettes hurtigt og regnskabsregistreringen kan køre igen.</span><span class="sxs-lookup"><span data-stu-id="77850-146">**Retry** – Operators can use this option when the failure can be resolved quickly, and the fiscal registration can be rerun.</span></span> <span data-ttu-id="77850-147">Denne indstilling kan f.eks. bruges, når regnskabsenheden ikke er tilsluttet, bonprinteren mangler papir, eller der er papirstop i bonprinteren.</span><span class="sxs-lookup"><span data-stu-id="77850-147">For example, this option can be used when the fiscal device isn't connected, the fiscal printer is out of paper, or there is a paper jam in the fiscal printer.</span></span>
- <span data-ttu-id="77850-148">**Annuller** – Med denne indstilling kan operatører udskyde regnskabsregistreringen af den aktuelle transaktion eller hændelse, hvis noget mislykkes.</span><span class="sxs-lookup"><span data-stu-id="77850-148">**Cancel** – This option lets operators postpone the fiscal registration of the current transaction or event if it fails.</span></span> <span data-ttu-id="77850-149">Når registreringen udsættes, kan operatøren fortsat arbejde på POS og kan udføre alle handlinger, som regnskabsregistreringen ikke indgår i.</span><span class="sxs-lookup"><span data-stu-id="77850-149">After the registration is postponed, the operator can continue to work on the POS and can complete any operation that the fiscal registration isn't required for.</span></span> <span data-ttu-id="77850-150">Når en hændelse, der kræver brug af regnskabsregistreringen, indtræffer i POS (f.eks. når en ny transaktion åbnes), åbnes dialogboksen til håndtering af fejlen automatisk med besked til operatøren om, at den tidligere transaktion ikke blev registreret korrekt, og at fejlhåndteringsindstillingerne skal angives.</span><span class="sxs-lookup"><span data-stu-id="77850-150">When any event that requires the fiscal registration occurs in the POS (for example, a new transaction is opened), the error handling dialog box automatically appears to notify the operator that the previous transaction wasn't correctly registered and to provide the error handling options.</span></span>
- <span data-ttu-id="77850-151">**Spring over** – Operatører kan bruge denne indstilling, når regnskabsregistreringen kan udelades under bestemte betingelser og normal drift kan fortsættes på POS.</span><span class="sxs-lookup"><span data-stu-id="77850-151">**Skip** – Operators can use this option when the fiscal registration can be omitted under specific conditions and regular operations can be continued on the POS.</span></span> <span data-ttu-id="77850-152">F.eks. kan denne indstilling bruges, når en salgstransaktion, som regnskabsregistreringen mislykkedes for, kan registreres i en særlig papirkladde.</span><span class="sxs-lookup"><span data-stu-id="77850-152">For example, this option can be used when a sales transaction that the fiscal registration failed for can be registered in a special paper journal.</span></span>
- <span data-ttu-id="77850-153">**Markér som registreret** – Operatører kan bruge denne indstilling, når transaktionen er blevet registreret i regnskabsenheden (f.eks. når en regnskabskvittering et blevet udskrevet), men der opstod en fejl, da regnskabssvaret blev gemt i kanaldatabasen.</span><span class="sxs-lookup"><span data-stu-id="77850-153">**Mark as registered** – Operators can use this option when the transaction was actually registered in the fiscal device (for example, a fiscal receipt was printed), but a failure occurred when the fiscal response was being saved to the channel database.</span></span>

> [!NOTE]
> <span data-ttu-id="77850-154">Indstillingerne **Spring over** og **Markér som registreret** skal aktiveres i regnskabsregistreringsprocessen, før de bruges.</span><span class="sxs-lookup"><span data-stu-id="77850-154">The **Skip** and **Mark as registered** options must be activated in the fiscal registration process before they are used.</span></span> <span data-ttu-id="77850-155">Desuden skal operatørerne have tildelt tilsvarende rettigheder.</span><span class="sxs-lookup"><span data-stu-id="77850-155">In addition, corresponding permissions must be granted to operators.</span></span>

<span data-ttu-id="77850-156">Indstillingerne **Spring over** og **Markér som registreret** gør det muligt for infokoder at hente nogle specifikke oplysninger om fejlen, f.eks. årsagen til fejlen eller en begrundelse for at springe regnskabsregistreringen over eller markere transaktionen som registreret.</span><span class="sxs-lookup"><span data-stu-id="77850-156">The **Skip** and **Mark as registered** options enable info codes to capture some specific information about the failure, such as the reason for the failure or a justification for skipping the fiscal registration or marking the transaction as registered.</span></span> <span data-ttu-id="77850-157">Du kan finde flere oplysninger om, hvordan du konfigurerer fejlhåndteringsparametre, i [Angive indstillinger for fejlhåndtering](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="77850-157">For more details about how to set up error handling parameters, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

### <a name="optional-fiscal-registration"></a><span data-ttu-id="77850-158">Valgfri regnskabsregistrering</span><span class="sxs-lookup"><span data-stu-id="77850-158">Optional fiscal registration</span></span>

<span data-ttu-id="77850-159">Regnskabsregistrering kan være obligatorisk for visse operationer, men valgfri for andre.</span><span class="sxs-lookup"><span data-stu-id="77850-159">Fiscal registration might be mandatory for some operations but optional for others.</span></span> <span data-ttu-id="77850-160">Regnskabsregistreringen af almindelige salg og returneringer kan eksempelvis være obligatorisk, mens regnskabsregistreringen af operationer, der er relateret til kunders indbetalinger, kan være valgfri.</span><span class="sxs-lookup"><span data-stu-id="77850-160">For example, the fiscal registration of regular sales and returns might be mandatory, but the fiscal registration of operations that are related to customer deposits might be optional.</span></span> <span data-ttu-id="77850-161">I dette tilfælde bør manglende regnskabsregistrering af et salg blokere for fremtidige salg, mens manglende regnskabsregistrering af en kundeindbetaling ikke bør blokere fremtidige salg.</span><span class="sxs-lookup"><span data-stu-id="77850-161">In this case, failure to complete the fiscal registration of a sale should block further sales, but failure to complete the fiscal registration of a customer deposit should not block further sales.</span></span> <span data-ttu-id="77850-162">For at kunne skelne mellem obligatoriske og valgfrie operationer anbefaler vi, at du behandler dem via forskellige dokumentudbydere, og at du i processen for regnskabsregistrering fastsætter separate fremgangsmåder for de pågældende udbydere.</span><span class="sxs-lookup"><span data-stu-id="77850-162">To distinguish mandatory and optional operations, we recommend that you handle them through different document providers, and that you set up separate steps in the fiscal registration process for those providers.</span></span> <span data-ttu-id="77850-163">Parametret **Fortsæt ved fejl** bør være aktiveret for enhver fremgangsmåde, der er relateret til valgfri regnskabsregistrering.</span><span class="sxs-lookup"><span data-stu-id="77850-163">The **Continue on error** parameter should be enabled for any step that is related to optional fiscal registration.</span></span> <span data-ttu-id="77850-164">Du kan finde flere oplysninger om, hvordan du konfigurerer fejlhåndteringsparametre, i [Angive indstillinger for fejlhåndtering](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="77850-164">For more details about how to set up error handling parameters, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

### <a name="manually-running-fiscal-registration"></a><span data-ttu-id="77850-165">Manuel kørsel af regnskabsregistrering</span><span class="sxs-lookup"><span data-stu-id="77850-165">Manually running fiscal registration</span></span>

<span data-ttu-id="77850-166">Såfremt regnskabsregistreringen af en transaktion eller hændelse er blevet udsat som følge af en fejl (eksempelvis hvis operatøren har valgt **Annuller** i dialogboksen til fejlhåndtering), kan du manuelt køre regnskabsregistreringen igen ved at anvende en tilsvarende operation.</span><span class="sxs-lookup"><span data-stu-id="77850-166">If the fiscal registration of a transaction or event has been postponed after a failure (for example, if the operator selected **Cancel** in the error handling dialog box), you can manually rerun the fiscal registration by invoking a corresponding operation.</span></span> <span data-ttu-id="77850-167">Du kan finde flere oplysninger under [Aktiver manuel udførelse af udsatte regnskabsregistreringer](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span><span class="sxs-lookup"><span data-stu-id="77850-167">For more details, see [Enable manual execution of postponed fiscal registration](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span></span>

### <a name="fiscal-registration-health-check"></a><span data-ttu-id="77850-168">Sundhedskontrol af regnskabsregistreringen</span><span class="sxs-lookup"><span data-stu-id="77850-168">Fiscal registration health check</span></span>

<span data-ttu-id="77850-169">Proceduren for sundhedskontrol af regnskabsregistreringer verificerer regnskabsenhedens eller -tjenestens tilgængelighed, når visse hændelser finder sted.</span><span class="sxs-lookup"><span data-stu-id="77850-169">The health check procedure for fiscal registrations verifies the availability of the fiscal device or service when specific events occur.</span></span> <span data-ttu-id="77850-170">Såfremt regnskabsregistreringen ikke kan fuldførelse på nuværende tidspunkt, bliver operatøren adviseret herom på forhånd.</span><span class="sxs-lookup"><span data-stu-id="77850-170">If the fiscal registration can't currently be completed, the operator is notified in advance.</span></span>

<span data-ttu-id="77850-171">POS kører sundhedskontrollen, når følgende hændelser finder sted:</span><span class="sxs-lookup"><span data-stu-id="77850-171">The POS runs the health check when the following events occur:</span></span>

- <span data-ttu-id="77850-172">Der åbnes en ny transaktion.</span><span class="sxs-lookup"><span data-stu-id="77850-172">A new transaction is opened.</span></span>
- <span data-ttu-id="77850-173">En suspenderet transaktion kaldes tilbage.</span><span class="sxs-lookup"><span data-stu-id="77850-173">A suspended transaction is recalled.</span></span>
- <span data-ttu-id="77850-174">En salgs- eller returtransaktion færdiggøres.</span><span class="sxs-lookup"><span data-stu-id="77850-174">A sales or return transaction is finalized.</span></span>

<span data-ttu-id="77850-175">Hvis sundhedskontrollen er mangelfuld, viser POS dialogboksen for sundhedskontrollen.</span><span class="sxs-lookup"><span data-stu-id="77850-175">If the health check fails, the POS shows the health check dialog box.</span></span> <span data-ttu-id="77850-176">Den pågældende dialogboks indeholder følgende knapper:</span><span class="sxs-lookup"><span data-stu-id="77850-176">This dialog box provides the following buttons:</span></span>

- <span data-ttu-id="77850-177">**OK** – Denne knap tillader operatøren at se bort fra en fejl i sundhedskontrollen og fortsætte med at behandle operationen.</span><span class="sxs-lookup"><span data-stu-id="77850-177">**OK** – This button lets the operator ignore a health check error and continue to process the operation.</span></span> <span data-ttu-id="77850-178">Operatører kan alene vælge denne knap, såfremt rettigheden **Tillad, at springe sundhedskontrolfejl over** er aktiveret for dem.</span><span class="sxs-lookup"><span data-stu-id="77850-178">Operators can select this button only if the **Allow skip health check error** permission is enabled for them.</span></span>
- <span data-ttu-id="77850-179">**Annuller** – Hvis operatøren vælger denne knap, annullerer POS den seneste handling (der tilføjes eksempelvis ikke et element til en ny transaktion).</span><span class="sxs-lookup"><span data-stu-id="77850-179">**Cancel** – If the operator selects this button, the POS cancels the last action (for example, an item isn't added to a new transaction).</span></span>

> [!NOTE]
> <span data-ttu-id="77850-180">Sundhedskontrollen køres udelukkende, hvis den nuværende operation kræver regnskabsregistrering, og parametret **Fortsæt ved fejl** er deaktiveret for det aktuelle trin i regnskabsregistreringsprocessen.</span><span class="sxs-lookup"><span data-stu-id="77850-180">The health check is run only if the current operation requires fiscal registration, and if  the **Continue on error** parameter is disabled for the current step of the fiscal registration process.</span></span> <span data-ttu-id="77850-181">Du kan finde flere oplysninger under [Angiv indstillinger for fejlhåndtering](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="77850-181">For more details, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

## <a name="storing-fiscal-response-in-fiscal-transaction"></a><span data-ttu-id="77850-182">Lagring af regnskabssvar i regnskabstransaktion</span><span class="sxs-lookup"><span data-stu-id="77850-182">Storing fiscal response in fiscal transaction</span></span>

<span data-ttu-id="77850-183">Når regnskabsregistrering af en transaktion eller en hændelse er foretaget, oprettes en regnskabstransaktion i kanaldatabasen og knyttes til den oprindelige transaktion eller hændelse.</span><span class="sxs-lookup"><span data-stu-id="77850-183">When fiscal registration of a transaction or event is successful, a fiscal transaction is created in the channel database and linked to the original transaction or event.</span></span> <span data-ttu-id="77850-184">På samme måde, hvis indstillingen **Spring over** eller **Markér som registreret** er valgt for en mislykket regnskabsregistrering, gemmes disse oplysninger i en regnskabstransaktion.</span><span class="sxs-lookup"><span data-stu-id="77850-184">Similarly, if the **Skip** or **Mark as registered** option is selected for a failed fiscal registration, this information is stored in a fiscal transaction.</span></span> <span data-ttu-id="77850-185">En regnskabstransaktion indeholder regnskabssvaret fra regnskabsenheden eller -tjenesten.</span><span class="sxs-lookup"><span data-stu-id="77850-185">A fiscal transaction holds the fiscal response of the fiscal device or service.</span></span> <span data-ttu-id="77850-186">Hvis regnskabsregistreringsprocessen består af flere trin, oprettes der en regnskabstransaktion for hvert trin i processen, der resulterede i en fuldført eller mislykket regnskabsregistrering.</span><span class="sxs-lookup"><span data-stu-id="77850-186">If the fiscal registration process consists of several steps, a fiscal transaction is created for each step of the process that resulted in a successful or failed registration.</span></span>

<span data-ttu-id="77850-187">Regnskabstransaktionerne overføres til Headquarters af *P-job*, sammen med transaktioner.</span><span class="sxs-lookup"><span data-stu-id="77850-187">Fiscal transactions are transferred to Headquarters by the *P-job*, together with transactions.</span></span> <span data-ttu-id="77850-188">I oversigtspanelet **Regnskabstransaktioner** på siden **Transaktioner i butik** kan du se de regnskabstransaktioner, der er knyttet til detailtransaktioner.</span><span class="sxs-lookup"><span data-stu-id="77850-188">On the **Fiscal transactions** FastTab of the **Store transactions** page, you can view the fiscal transactions that are linked to transactions.</span></span>

<span data-ttu-id="77850-189">En regnskabstransaktion indeholder følgende oplysninger:</span><span class="sxs-lookup"><span data-stu-id="77850-189">A fiscal transaction stores the following details:</span></span>

- <span data-ttu-id="77850-190">Detaljer om regnskabsregistreringsprocessen (proces, connectorgruppe, connector osv.).</span><span class="sxs-lookup"><span data-stu-id="77850-190">Fiscal registration process details (process, connector group, connector, and so on).</span></span> <span data-ttu-id="77850-191">Serienummeret for regnskabsenheden gemmes også i feltet **Kassenummer**, hvis disse oplysninger er inkluderet i regnskabssvaret.</span><span class="sxs-lookup"><span data-stu-id="77850-191">It also stores the serial number of the fiscal device in the **Register number** field, if this information is included in the fiscal response.</span></span>
- <span data-ttu-id="77850-192">Status for regnskabsregistreringen: **Fuldført** for fuldført registrering, **Sprunget over**, hvis operatøren har valgt indstillingen **Spring over** for en mislykket registrering eller **Markeret som registreret**, hvis operatøren har valgt indstillingen **Markér som registreret**.</span><span class="sxs-lookup"><span data-stu-id="77850-192">The status of the fiscal registration: **Completed** for successful registration, **Skipped** if the operator selected the **Skip** option for a failed registration, or **Marked as registered** if the operator selected the **Mark as registered** option.</span></span>
- <span data-ttu-id="77850-193">Infokodetransaktioner, der er relateret til en valgt regnskabstransaktion.</span><span class="sxs-lookup"><span data-stu-id="77850-193">Info code transactions that are related to a selected fiscal transaction.</span></span> <span data-ttu-id="77850-194">Hvis du vil se infokodetransaktioner, skal du i oversigtspanelet **Regnskabstransaktioner** vælge en regnskabstransaktion, der har statussen **Sprunget over** eller **Markeret som registreret**, og derefter vælge **Infokodetransaktioner**.</span><span class="sxs-lookup"><span data-stu-id="77850-194">To view the info code transactions, on the **Fiscal transactions** FastTab, select a fiscal transaction that has a status of **Skipped** or **Marked as registered**, and then select **Info code transactions**.</span></span>

## <a name="fiscal-texts-for-discounts"></a><span data-ttu-id="77850-195">Regnskabstekster for rabatter</span><span class="sxs-lookup"><span data-stu-id="77850-195">Fiscal texts for discounts</span></span>

<span data-ttu-id="77850-196">Nogle lande eller områder har særlige krav om yderligere tekster, der skal udskrives på regnskabskvitteringer, når der anvendes forskellige rabatter.</span><span class="sxs-lookup"><span data-stu-id="77850-196">Some countries or regions have special requirements about additional texts that must be printed on fiscal receipts when different kinds of discounts are applied.</span></span> <span data-ttu-id="77850-197">Med regnskabsintegrationsfunktionen kan du oprette en særlig tekst for en rabat, der udskrives efter en rabatlinje på en regnskabskvittering.</span><span class="sxs-lookup"><span data-stu-id="77850-197">The fiscal integration functionality lets you set up a special text for a discount that is printed after a discount line on a fiscal receipt.</span></span> <span data-ttu-id="77850-198">For manuelle rabatter kan du konfigurere en regnskabstekst for den infokode, der er angivet som **Produktrabat**-infokoden i POS-funktionalitetsprofilen.</span><span class="sxs-lookup"><span data-stu-id="77850-198">For manual discounts, you can configure a fiscal text for the info code that is specified as the **Product discount** info code in the POS functionality profile.</span></span> <span data-ttu-id="77850-199">Du kan finde flere oplysninger om, hvordan du opretter regnskabstekster for rabatter, i [Oprette regnskabstekster for rabatter](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-texts-for-discounts).</span><span class="sxs-lookup"><span data-stu-id="77850-199">For more details about how to set up fiscal texts for discounts, see [Set up fiscal texts for discounts](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-texts-for-discounts).</span></span>

## <a name="printing-fiscal-x-and-fiscal-z-reports"></a><span data-ttu-id="77850-200">Udskrivning af X- og Z-regnskabsrapporter</span><span class="sxs-lookup"><span data-stu-id="77850-200">Printing fiscal X and fiscal Z reports</span></span>

<span data-ttu-id="77850-201">Funktionen til regnskabsintegration understøtter generering af kasseoptællingsopgørelser, der er specifikke for den integrerede regnskabsenhed eller -tjeneste:</span><span class="sxs-lookup"><span data-stu-id="77850-201">Fiscal integration functionality supports generation of end-of-day statements that are specific to the integrated fiscal device or service:</span></span>

- <span data-ttu-id="77850-202">Nye knapper, der kører tilsvarende operationer, skal føjes til POS-skærmlayoutet.</span><span class="sxs-lookup"><span data-stu-id="77850-202">New buttons that run corresponding operations should be added to the POS screen layout.</span></span> <span data-ttu-id="77850-203">Du kan finde flere oplysninger i [Konfigurere X/Z-regnskabsrapporter fra POS](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos).</span><span class="sxs-lookup"><span data-stu-id="77850-203">For more details, see [Set up fiscal X/Z reports from the POS](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos).</span></span>
- <span data-ttu-id="77850-204">I regnskabsintegrationseksemplet skal disse operationer sammenholdes med de tilsvarende handlinger for regnskabsenheden.</span><span class="sxs-lookup"><span data-stu-id="77850-204">In the fiscal integration sample, these operations should be matched to the corresponding operations of the fiscal device.</span></span>

## <a name="fiscal-integration-samples-in-the-retail-sdk"></a><span data-ttu-id="77850-205">Eksempler på regnskabsintegration i Retail SDK</span><span class="sxs-lookup"><span data-stu-id="77850-205">Fiscal integration samples in the Retail SDK</span></span>

<span data-ttu-id="77850-206">Følgende regnskabsintegrationseksempler er aktuelt tilgængelige i Retail SDK:</span><span class="sxs-lookup"><span data-stu-id="77850-206">The following fiscal integration samples are currently available in the Retail SDK:</span></span>

- [<span data-ttu-id="77850-207">Eksempel på integration af bonprinter for Italien</span><span class="sxs-lookup"><span data-stu-id="77850-207">Fiscal printer integration sample for Italy</span></span>](emea-ita-fpi-sample.md)
- [<span data-ttu-id="77850-208">Eksempel på integration af bonprinter for Polen</span><span class="sxs-lookup"><span data-stu-id="77850-208">Fiscal printer integration sample for Poland</span></span>](emea-pol-fpi-sample.md)
- [<span data-ttu-id="77850-209">Eksempel på integration af regnskabsregistreringstjeneste for Østrig</span><span class="sxs-lookup"><span data-stu-id="77850-209">Fiscal registration service integration sample for Austria</span></span>](emea-aut-fi-sample.md)
- [<span data-ttu-id="77850-210">Eksempel på integration af regnskabsregistreringstjeneste i Tjekkiet</span><span class="sxs-lookup"><span data-stu-id="77850-210">Fiscal registration service integration sample for Czech Republic</span></span>](emea-cze-fi-sample.md)
- [<span data-ttu-id="77850-211">Eksempel på integration med kontrolenhed for Sverige</span><span class="sxs-lookup"><span data-stu-id="77850-211">Control unit integration sample for Sweden</span></span>](./emea-swe-fi-sample.md)
- [<span data-ttu-id="77850-212">Eksempel på integration af regnskabsregistreringstjeneste i Tyskland</span><span class="sxs-lookup"><span data-stu-id="77850-212">Fiscal registration service integration sample for Germany</span></span>](./emea-deu-fi-sample.md)

<span data-ttu-id="77850-213">Følgende regnskabsintegrationsfunktioner er også tilgængelige i Retail SDK, men kan i øjeblikket ikke udnytte regnskabsintegrationsstrukturen.</span><span class="sxs-lookup"><span data-stu-id="77850-213">The following fiscal integration functionality is also available in the Retail SDK but doesn't currently take advantage of the fiscal integration framework.</span></span> <span data-ttu-id="77850-214">Overførsel af denne funktion til regnskabsintegrationsstrukturen er planlagt til senere opdateringer.</span><span class="sxs-lookup"><span data-stu-id="77850-214">Migration of this functionality to the fiscal integration framework is planned for later updates.</span></span>


- [<span data-ttu-id="77850-215">Digital signatur for Frankrig</span><span class="sxs-lookup"><span data-stu-id="77850-215">Digital signature for France</span></span>](emea-fra-cash-registers.md)
- [<span data-ttu-id="77850-216">Digital signatur for Norge</span><span class="sxs-lookup"><span data-stu-id="77850-216">Digital signature for Norway</span></span>](emea-nor-cash-registers.md)

<span data-ttu-id="77850-217">Følgende ældre finansintegrationsfunktioner, der er tilgængelige i Retail SDK, bruger ikke strukturen for finansintegration og vil blive udfaset i senere opdateringer:</span><span class="sxs-lookup"><span data-stu-id="77850-217">The following legacy fiscal integration functionality that is available in Retail SDK does not use the fiscal integration framework and will be deprecated in later updates:</span></span>

- [<span data-ttu-id="77850-218">Eksempel på integration med kontrolenhed for Sverige (forældet)</span><span class="sxs-lookup"><span data-stu-id="77850-218">Control unit integration sample for Sweden (legacy)</span></span>](./retail-sdk-control-unit-sample.md)
