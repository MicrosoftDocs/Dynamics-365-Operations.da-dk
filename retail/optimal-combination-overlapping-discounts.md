---
title: "Fastslå den optimale kombination af overlappende rabatter"
description: "Når rabatter overlapper hinanden, skal du bestemme den kombination af overlappende rabatter, der resulterer i den laveste samlede transaktion eller den højeste samlede rabat. Når rabatbeløbet afhænger af prisen på de produkter, der købes, f.eks. i den almindelige detailrabat (BOGO) 'køb 1, og få 1 X procent i rabat' (BOGO), bliver denne proces et problem med optimering af kombinationer."
author: kfend
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-365-retail
ms.technology: 
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, AX 7.0.0, Operations, UnifiedOperations, Retail
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
ms.translationtype: Human Translation
ms.sourcegitcommit: 20d28e22e4e89d0d864a0cbeaadeb568e73e223e
ms.openlocfilehash: af31f0c4cb5304a213f883e3d076731f7cee468e
ms.contentlocale: da-dk
ms.lasthandoff: 06/29/2017


---

# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a><span data-ttu-id="234f6-104">Fastslå den optimale kombination af overlappende rabatter</span><span class="sxs-lookup"><span data-stu-id="234f6-104">Determine the optimal combination of overlapping discounts</span></span>

[!include[banner](includes/banner.md)]


<span data-ttu-id="234f6-105">Når rabatter overlapper hinanden, skal du bestemme den kombination af overlappende rabatter, der resulterer i den laveste samlede transaktion eller den højeste samlede rabat.</span><span class="sxs-lookup"><span data-stu-id="234f6-105">When discounts overlap, you must determine the combination of overlapping discounts that will produce the lowest transaction total or the highest total discount.</span></span> <span data-ttu-id="234f6-106">Når rabatbeløbet afhænger af prisen på de produkter, der købes, f.eks. i den almindelige detailrabat (BOGO) "køb 1, og få 1 X procent i rabat" (BOGO), bliver denne proces et problem med optimering af kombinationer.</span><span class="sxs-lookup"><span data-stu-id="234f6-106">When the discount amount varies according to the price of the products that are purchased, such as in the common “Buy 1, get 1 X percent off” (BOGO) retail discount, this process becomes an issue of combinatorial optimization.</span></span>

<span data-ttu-id="234f6-107">Denne artikel gælder for Microsoft Dynamics AX 2012 R3 med KB 3105973 (udgivet 2. november 2015) eller nyere, og for Microsoft Dynamics 365 for Retail.</span><span class="sxs-lookup"><span data-stu-id="234f6-107">This article applies to Microsoft Dynamics AX 2012 R3 with KB 3105973 (released November 2, 2015) or later, and to Microsoft Dynamics 365 for Retail.</span></span> <span data-ttu-id="234f6-108">For hurtigt at kunne bestemme den kombinationen af overlappende rabatter, der skal anvendes, har vi introduceret en metode til anvendelse af overlappende rabatter.</span><span class="sxs-lookup"><span data-stu-id="234f6-108">To determine the combination overlapping discounts to apply in a timely manner, we have introduced a method for applying overlapping discounts.</span></span> <span data-ttu-id="234f6-109">Vi kalder denne nye metode **rangordning af marginal værdi**.</span><span class="sxs-lookup"><span data-stu-id="234f6-109">We call this new method **marginal value ranking**.</span></span> <span data-ttu-id="234f6-110">Rangordning af marginal værdi bruges, når den tid, der kræves for at vurdere de mulige kombinationer af overlappende rabatter, overstiger en tærskel, der konfigureres på siden **Detailparametre**.</span><span class="sxs-lookup"><span data-stu-id="234f6-110">Marginal value ranking is used when the time that is required in order to evaluate the possible combinations of overlapping discounts exceeds a threshold that is configurable on the **Retail parameters** page.</span></span> <span data-ttu-id="234f6-111">I metoden rangordning af marginal værdi beregnes en værdi for hver overlappende rabat ved hjælp af rabatværdien for de delte produkter.</span><span class="sxs-lookup"><span data-stu-id="234f6-111">In the marginal value ranking method, a value is calculated for each overlapping discount by using the discount’s value on the shared products.</span></span> <span data-ttu-id="234f6-112">De overlappende rabatter anvendes derefter fra den højeste relative værdi til den laveste relative værdi.</span><span class="sxs-lookup"><span data-stu-id="234f6-112">The overlapped discounts are then applied from the highest relative value to the lowest relative value.</span></span> <span data-ttu-id="234f6-113">Se afsnittet "Marginal værdi" senere i denne artikel for at få oplysninger om den nye metode.</span><span class="sxs-lookup"><span data-stu-id="234f6-113">For details about the new method, see the “Marginal value” section, later in this article.</span></span> <span data-ttu-id="234f6-114">Rangordning af marginal værdi bruges ikke, når rabatbeløbene for et produkt ikke er berørt af et andet produkt i transaktionen.</span><span class="sxs-lookup"><span data-stu-id="234f6-114">Marginal value ranking isn’t used when the discount amounts for a product aren’t affected by another product in the transaction.</span></span> <span data-ttu-id="234f6-115">Denne metode bruges f.eks. ikke til to enkle rabatter eller til en enkel rabat og mængderabat for et enkelt produkt.</span><span class="sxs-lookup"><span data-stu-id="234f6-115">For example, this method isn’t used for two simple discounts, or for a simple discount and a single product quantity discount.</span></span>

## <a name="discount-examples"></a><span data-ttu-id="234f6-116">Rabateksempler</span><span class="sxs-lookup"><span data-stu-id="234f6-116">Discount examples</span></span>
<span data-ttu-id="234f6-117">Du kan oprette et ubegrænset antal detailrabatter på et fælles sæt produkter.</span><span class="sxs-lookup"><span data-stu-id="234f6-117">You can create an unlimited number of retail discounts on a common set of products.</span></span> <span data-ttu-id="234f6-118">Men fordi der ikke er nogen grænse, kan der opstå problemer med ydeevnen, når du forsøger at beregne de rabatter, der skal bruges på de forskellige produkter.</span><span class="sxs-lookup"><span data-stu-id="234f6-118">However, because there is no limit, performance issues can occur when you try to calculate the discounts that should be used on the various products.</span></span> <span data-ttu-id="234f6-119">Følgende eksempler illustrerer problemet mere detaljeret.</span><span class="sxs-lookup"><span data-stu-id="234f6-119">The following examples illustrate this issue in more detail.</span></span> <span data-ttu-id="234f6-120">Vi starter med to produkter og to overlappende rabatter i eksempel 1.</span><span class="sxs-lookup"><span data-stu-id="234f6-120">In example 1, we start with two products and two overlapping discounts.</span></span> <span data-ttu-id="234f6-121">Derefter viser vi i eksempel 2, hvordan problemet udvikles, når der tilføjes flere produkter.</span><span class="sxs-lookup"><span data-stu-id="234f6-121">Then, in example 2, we show how the issue evolves as more products are added.</span></span>

### <a name="example-1-two-products-and-two-discounts"></a><span data-ttu-id="234f6-122">Eksempel 1: To produkter og to rabatter</span><span class="sxs-lookup"><span data-stu-id="234f6-122">Example 1: Two products and two discounts</span></span>

<span data-ttu-id="234f6-123">I dette eksempel er to produkter nødvendige for at kunne opnå hver rabat, og rabatter kan ikke kombineres.</span><span class="sxs-lookup"><span data-stu-id="234f6-123">In this example, two products are required in order to qualify for each discount, and the discounts can’t be combined.</span></span> <span data-ttu-id="234f6-124">Rabatterne i dette eksempel er rabatter af typen **bedste pris**.</span><span class="sxs-lookup"><span data-stu-id="234f6-124">The discounts in this example are **Best price** discounts.</span></span> <span data-ttu-id="234f6-125">Begge produkter opfylder betingelserne for begge rabatter.</span><span class="sxs-lookup"><span data-stu-id="234f6-125">Both products qualify for both discounts.</span></span> <span data-ttu-id="234f6-126">Her er de to rabatter.</span><span class="sxs-lookup"><span data-stu-id="234f6-126">Here are the two discounts.</span></span>
<span data-ttu-id="234f6-127">![Overlappende rabatkombination 01](./media/overlapping-discount-combo-01.jpg)</span><span class="sxs-lookup"><span data-stu-id="234f6-127">![Overlapping discount combo 01](./media/overlapping-discount-combo-01.jpg)</span></span>

<span data-ttu-id="234f6-128">For to tilfældige produkter afhænger den bedste af disse to rabatter af priserne på de to produkter.</span><span class="sxs-lookup"><span data-stu-id="234f6-128">For any two products, the better of these two discounts depends on the prices of the two products.</span></span> <span data-ttu-id="234f6-129">Når prisen på begge produkter er ens eller næsten ens, er rabat 1 den bedste.</span><span class="sxs-lookup"><span data-stu-id="234f6-129">When the price of both products is equal or almost equal, discount 1 is better.</span></span> <span data-ttu-id="234f6-130">Når prisen på én vare er betydeligt mindre end prisen på det andet produkt, er rabatten 2 bedre.</span><span class="sxs-lookup"><span data-stu-id="234f6-130">When the price of one product is significantly less than the price of the other product, discount 2 is better.</span></span> <span data-ttu-id="234f6-131">Her er den matematiske regel for evaluering af disse to rabatter mod hinanden: ![Overlappende rabatkombination 02](./media/overlapping-discount-combo-02.jpg)</span><span class="sxs-lookup"><span data-stu-id="234f6-131">Here is the mathematical rule for evaluating these two discounts against each other: ![Overlapping discount combo 02](./media/overlapping-discount-combo-02.jpg)</span></span>

<span data-ttu-id="234f6-132">**Bemærk!** Når prisen på produkt 1 er lig med to tredjedele af prisen på produkt 2, er de to rabatter lig hinanden.</span><span class="sxs-lookup"><span data-stu-id="234f6-132">**Note:** When the price of product 1 is equal to two-thirds of the price of product 2, the two discounts are equal.</span></span> <span data-ttu-id="234f6-133">I dette eksempel varierer effektive rabatprocent for rabat 1 f.eks. fra et par procent (når priserne på de to produkter er langt fra hinanden) til maksimalt 25 procent (når de to produkter har den samme pris).</span><span class="sxs-lookup"><span data-stu-id="234f6-133">In this example, the effective discount percentage for discount 1 varies from a few percent (when the prices of the two products are far apart) to a maximum of 25 percent (when the two products have the same price).</span></span> <span data-ttu-id="234f6-134">Effektiv rabatprocent for rabat 2 er fast.</span><span class="sxs-lookup"><span data-stu-id="234f6-134">The effective discount percentage for discount 2 is fixed.</span></span> <span data-ttu-id="234f6-135">Den er altid 20 procent.</span><span class="sxs-lookup"><span data-stu-id="234f6-135">It’s always 20 percent.</span></span> <span data-ttu-id="234f6-136">Da den effektive rabatprocent for rabat 1 har et interval, der kan være større eller mindre end rabat 2, afhænger den bedste rabat af priserne på de to produkter, der skal gives rabat på.</span><span class="sxs-lookup"><span data-stu-id="234f6-136">Because the effective discount percentage for discount 1 has a range that can be more than or less than discount 2, the best discount depends on the prices of the two products that must be discounted.</span></span> <span data-ttu-id="234f6-137">I dette eksempel udføres beregningen hurtigt, fordi der kun anvendes to rabatter på kun to produkter.</span><span class="sxs-lookup"><span data-stu-id="234f6-137">In this example, the calculation is completed quickly, because only two discounts are applied on only two products.</span></span> <span data-ttu-id="234f6-138">Der er kun to mulige kombinationer: én anvendelse af rabat 1 eller én anvendelse af rabat 2.</span><span class="sxs-lookup"><span data-stu-id="234f6-138">There are only two possible combinations: one application of discount 1 or one application of discount 2.</span></span> <span data-ttu-id="234f6-139">Der er ingen kombinationsmuligheder, der skal beregnes.</span><span class="sxs-lookup"><span data-stu-id="234f6-139">There are no permutations to calculate.</span></span> <span data-ttu-id="234f6-140">Værdien af hver rabat beregnes ved hjælp af begge produkter, og den bedste rabat bruges.</span><span class="sxs-lookup"><span data-stu-id="234f6-140">The value of each discount is calculated by using both products, and the best discount is used.</span></span>

### <a name="example-2-four-products-and-two-discounts"></a><span data-ttu-id="234f6-141">Eksempel 2: Fire produkter og to rabatter</span><span class="sxs-lookup"><span data-stu-id="234f6-141">Example 2: Four products and two discounts</span></span>

<span data-ttu-id="234f6-142">Derefter skal bruge vi fire produkter og de samme to rabatter.</span><span class="sxs-lookup"><span data-stu-id="234f6-142">Next, we will use four products and the same two discounts.</span></span> <span data-ttu-id="234f6-143">Alle fire produkter opfylder betingelserne for begge rabatter.</span><span class="sxs-lookup"><span data-stu-id="234f6-143">All four products qualify for both discounts.</span></span> <span data-ttu-id="234f6-144">Der er tolv mulige kombinationer.</span><span class="sxs-lookup"><span data-stu-id="234f6-144">There are twelve possible combinations.</span></span> <span data-ttu-id="234f6-145">I sidste ende anvendes to rabatter på transaktionen i en af tre kombinationer: to anvendelser af rabat 1, to programmer af rabat 2 eller en anvendelse af rabat 1 og en anvendelse af rabat 2.</span><span class="sxs-lookup"><span data-stu-id="234f6-145">In the end, two discounts will be applied to the transaction in one of three combinations: two applications of discount 1, two applications of discount 2, or one application of discount 1 and one application of discount 2.</span></span> <span data-ttu-id="234f6-146">For at illustrere de mulige kombinationer ser vi nærmere på to forskellige sæt af fire produkter, der har forskellige priser:</span><span class="sxs-lookup"><span data-stu-id="234f6-146">To illustrate the possible combinations, we will look at two different sets of four products that have different prices:</span></span>

-   <span data-ttu-id="234f6-147">Alle fire produkter har den samme pris, $15,00.</span><span class="sxs-lookup"><span data-stu-id="234f6-147">All four products have the same price, $15.00.</span></span> <span data-ttu-id="234f6-148">I dette tilfælde er den bedste rabatkombination to anvendelser af rabat 1.</span><span class="sxs-lookup"><span data-stu-id="234f6-148">In this case, the best discount combination is two applications of discount 1.</span></span> <span data-ttu-id="234f6-149">To produkter vil være til fuld pris, og to vil være med 50 procent rabat.</span><span class="sxs-lookup"><span data-stu-id="234f6-149">Two products will be full price, and two will be 50 percent off.</span></span> <span data-ttu-id="234f6-150">Totalbeløbet med rabat for transaktionen er $45 (15 + 15 + 7,50 + 7,50), hvilket er $15 (25 procent) i rabat fra totalprisen uden rabat på $60.</span><span class="sxs-lookup"><span data-stu-id="234f6-150">The discounted total for the transaction is $45 (15 + 15 + 7.50 + 7.50), which is $15 (25 percent) off the undiscounted total of $60.</span></span> <span data-ttu-id="234f6-151">Rabat 2 er kun $12 (20 procent).</span><span class="sxs-lookup"><span data-stu-id="234f6-151">Discount 2 is only $12 (20 percent).</span></span>
-   <span data-ttu-id="234f6-152">To produkter koster $20 pr. stk., ét produkt koster $15, og et produkt koster $5.</span><span class="sxs-lookup"><span data-stu-id="234f6-152">Two products are $20 each, one product is $15, and one product is $5.</span></span> <span data-ttu-id="234f6-153">I dette tilfælde er den bedste rabatkombination én anvendelse af rabat 2 og én anvendelse af rabat 1.</span><span class="sxs-lookup"><span data-stu-id="234f6-153">In this case, the best discount combination is one application of discount 2 and one application of discount 1.</span></span> <span data-ttu-id="234f6-154">Nedenstående tabeller viser rabatterne.</span><span class="sxs-lookup"><span data-stu-id="234f6-154">The following tables illustrates the discounts.</span></span>

<span data-ttu-id="234f6-155">For at læse tabellerne, skal du bruge et produkt fra en række og ét produkt fra en kolonne.</span><span class="sxs-lookup"><span data-stu-id="234f6-155">To read the tables, use one product from a row and one product from a column.</span></span> <span data-ttu-id="234f6-156">I tabellen til rabat 1 får du f.eks. $10 i rabat, når du kombinerer de to produkter til $20.</span><span class="sxs-lookup"><span data-stu-id="234f6-156">For example, in the table for discount 1, when you combine the two $20 products, you get $10 off.</span></span> <span data-ttu-id="234f6-157">I tabellen til rabat 2 får du $4 i rabat, når du kombinerer produktet til $15 og produktet til $5.</span><span class="sxs-lookup"><span data-stu-id="234f6-157">In the table for discount 2, when you combine the $15 product and the $5 product, you get $4 off.</span></span>
<span data-ttu-id="234f6-158">![Overlappende rabatkombination 03](./media/overlapping-discount-combo-03.jpg)</span><span class="sxs-lookup"><span data-stu-id="234f6-158">![Overlapping discount combo 03](./media/overlapping-discount-combo-03.jpg)</span></span>

<span data-ttu-id="234f6-159">Først skal vi finde den største rabat, der er tilgængelig for to vilkårlige produkter ved hjælp af begge rabatter.</span><span class="sxs-lookup"><span data-stu-id="234f6-159">First, we find the largest discount that is available from any two products by using either discount.</span></span> <span data-ttu-id="234f6-160">De to tabeller vises rabatbeløbet for alle kombinationer af de to produkter.</span><span class="sxs-lookup"><span data-stu-id="234f6-160">The two tables show the discount amount for all combinations of the two products.</span></span> <span data-ttu-id="234f6-161">De nedtonede dele af tabellerne repræsenterer enten tilfælde, hvor et produkt er parret med sig selv, hvilket vi ikke kan gøre, eller omvendt parring af to produkter, der giver det samme rabatbeløb og kan ignoreres.</span><span class="sxs-lookup"><span data-stu-id="234f6-161">The shaded portions of the tables represent either cases where a product is paired with itself, which we can’t do, or a reverse pairing of two products that produces the same discount amount and can be ignored.</span></span> <span data-ttu-id="234f6-162">Ved at kigge på tabellerne, kan du se, at rabat 1 for de to $20 varer er den største rabat, der er tilgængelig for begge rabatter på alle fire produkter.</span><span class="sxs-lookup"><span data-stu-id="234f6-162">By looking at the tables, you can see that discount 1 for the two $20 items is the largest discount that is available for either discount on all four products.</span></span> <span data-ttu-id="234f6-163">(Denne rabat er fremhævet med grønt i den første tabel.) Det efterlader kun $15 produktet og $5 produktet.</span><span class="sxs-lookup"><span data-stu-id="234f6-163">(This discount is highlighted in green in the first table.) That leaves only the $15 product and the $5 product.</span></span> <span data-ttu-id="234f6-164">Ved at kigge på de to tabeller igen, kan du se, at for disse to produkter giver rabat 1 en rabat på $2,50, hvorimod rabat 2 giver en rabat på $4.</span><span class="sxs-lookup"><span data-stu-id="234f6-164">By looking at the two tables again, you can see that, for these two products, discount 1 gives a $2.50 discount, whereas discount 2 gives a $4 discount.</span></span> <span data-ttu-id="234f6-165">Derfor vælger vi rabat 2.</span><span class="sxs-lookup"><span data-stu-id="234f6-165">Therefore, we select discount 2.</span></span> <span data-ttu-id="234f6-166">Den totale rabat er $14.</span><span class="sxs-lookup"><span data-stu-id="234f6-166">The total discount is $14.</span></span> <span data-ttu-id="234f6-167">For at gøre det nemmere at visualisere denne diskussion, er her to yderligere tabeller, der vises den effektive rabatprocent for alle mulige kombinationer af to produkter for både rabat 1 og rabat 2.</span><span class="sxs-lookup"><span data-stu-id="234f6-167">To make this discussion easier to visualize, here are two additional tables that show the effective discount percentage for all possible two-product combinations for both discount 1 and discount 2.</span></span> <span data-ttu-id="234f6-168">Kun halvdelen oversigten over kombinationer er inkluderet, fordi den rækkefølge, hvori de to produkter er anbragt, ikke har nogen betydning.</span><span class="sxs-lookup"><span data-stu-id="234f6-168">Only half the list of combinations is included, because, for these two discounts, the order in which the two products are put into the discount doesn’t matter.</span></span> <span data-ttu-id="234f6-169">Den højeste effektive rabat (25 procent) er fremhævet med grønt og den laveste effektive rabat (10 procent) er fremhævet med rødt.</span><span class="sxs-lookup"><span data-stu-id="234f6-169">The highest effective discount (25 percent) is highlighted in green, and the lowest effective discount (10 percent) is highlighted in red.</span></span> 

![Overlappende rabatkombination 04](./media/overlapping-discount-combo-04.jpg)

<span data-ttu-id="234f6-171">**Bemærk!** Når priser varierer, og to eller flere rabatter konkurrerer, er den eneste måde til at sikre den bedste kombination af rabatter at evaluere begge rabatter og sammenligne dem.</span><span class="sxs-lookup"><span data-stu-id="234f6-171">**Note:** When prices vary, and two or more discount compete, the only way to guarantee the best combination of discounts is to evaluate both discounts and compare them.</span></span>

## <a name="total-possible-combinations"></a><span data-ttu-id="234f6-172">Antal mulige kombinationer i alt</span><span class="sxs-lookup"><span data-stu-id="234f6-172">Total possible combinations</span></span>
<span data-ttu-id="234f6-173">Dette afsnit fortsætter med eksemplet fra den forrige sektion.</span><span class="sxs-lookup"><span data-stu-id="234f6-173">This section continues the example from the previous section.</span></span> <span data-ttu-id="234f6-174">Vi vil tilføje flere produkter og en anden rabat og se, hvor mange kombinationer der skal beregnes og sammenlignes.</span><span class="sxs-lookup"><span data-stu-id="234f6-174">We will add more products and another discount, and see how many combinations must be calculated and compared.</span></span> <span data-ttu-id="234f6-175">Nedenstående tabel viser antallet af mulige rabatkombinationer, når produktantallet øges.</span><span class="sxs-lookup"><span data-stu-id="234f6-175">The following table shows the number of possible discount combinations as the product quantity increases.</span></span> <span data-ttu-id="234f6-176">I tabel vises, hvad der sker, både når der er to overlappende rabatter, som i forrige eksempel, og når der er tre overlappende rabatter.</span><span class="sxs-lookup"><span data-stu-id="234f6-176">The table shows what happens both when there are two overlapping discounts, as in the previous example, and when there are three overlapping discounts.</span></span> <span data-ttu-id="234f6-177">Antallet af mulige rabatkombinationer, der skal evalueres, overstiger hurtigt, hvad selv en hurtig computer kan beregne og sammenligne hurtigt nok, til at det er acceptabelt for detailtransaktioner.</span><span class="sxs-lookup"><span data-stu-id="234f6-177">The number of possible discount combinations that must be evaluated soon exceeds what even a fast computer can calculate and compare quickly enough to be acceptable for retail transactions.</span></span>

![Overlappende rabatkombination 05](./media/overlapping-discount-combo-05.jpg)

<span data-ttu-id="234f6-179">Når der anvendes større mængder eller flere overlappende rabatter, når det samlede antal mulige rabatkombinationer hurtigt op i millioner, og den tid, der kræves for at vurdere og vælge den bedste mulige kombination, bliver hurtigt mærkbar.</span><span class="sxs-lookup"><span data-stu-id="234f6-179">When even larger quantities or more overlapping discounts are applied, the total number of possible discount combinations quickly goes into the millions, and the time that is required in order to evaluate and select the best possible combination quickly becomes noticeable.</span></span> <span data-ttu-id="234f6-180">Der skal foretages nogle optimeringer i detailprisprogrammet for at reducere det samlede antal kombinationer, der skal evalueres.</span><span class="sxs-lookup"><span data-stu-id="234f6-180">Some optimizations have been done in the retail price engine to reduce the total number of combinations that must be evaluated.</span></span> <span data-ttu-id="234f6-181">Men fordi antallet af overlappende rabatter og mængderne i en transaktion ikke er begrænset, skal et stort antal kombinationer altid evalueres, når der er overlappende rabatter.</span><span class="sxs-lookup"><span data-stu-id="234f6-181">However, because the number overlapping discounts and the quantities in a transaction aren’t limited, a large number of combinations will always have to be evaluated whenever there are overlapping discounts.</span></span> <span data-ttu-id="234f6-182">Det er dette problem, som metoden rangordning af marginal værdi løser.</span><span class="sxs-lookup"><span data-stu-id="234f6-182">This issue is the issue that the marginal value ranking method addresses.</span></span>

## <a name="marginal-value-method"></a><span data-ttu-id="234f6-183">Metoden marginal værdi</span><span class="sxs-lookup"><span data-stu-id="234f6-183">Marginal value method</span></span>
<span data-ttu-id="234f6-184">Til at løse problemet med et eksponentielt stigende antal kombinationer, der skal evalueres, findes der en optimering, der beregner værdien pr. delt produkt for hver rabat på det sæt af produkter, hvor der kan anvendes to eller flere rabatter.</span><span class="sxs-lookup"><span data-stu-id="234f6-184">To resolve the issue of an exponentially increasing number of combinations that must be evaluated, an optimization exists that calculates the value per shared product of each discount on the set of products that two or more discounts can be applied to.</span></span> <span data-ttu-id="234f6-185">Vi kalder denne værdi den **marginale værdi** af rabatten for de delte produkter.</span><span class="sxs-lookup"><span data-stu-id="234f6-185">We refer to this value as the **marginal value** of the discount for the shared products.</span></span> <span data-ttu-id="234f6-186">Den marginale værdi er den gennemsnitlige stigning pr. produkt stigning i det samlede rabatbeløb, når de delte produkter er inkluderet i hver rabat.</span><span class="sxs-lookup"><span data-stu-id="234f6-186">The marginal value is the average per product increase in the total discount amount when the shared products are included in each discount.</span></span> <span data-ttu-id="234f6-187">Den marginale værdi beregnes ved at tage det samlede rabatbeløb (DTotal) og fratrække rabatbeløbet uden delte produkter (DMinus\\ Shared), og dividere forskellen med antallet af delte produkter (ProductsShared).</span><span class="sxs-lookup"><span data-stu-id="234f6-187">The marginal value is calculated by taking the total discount amount (DTotal), subtracting the discount amount without the shared products (DMinus\\ Shared), and dividing that difference by the number of shared products (ProductsShared).</span></span> 
<span data-ttu-id="234f6-188">![Overlappende rabatkombination 06](./media/overlapping-discount-combo-06.jpg)</span><span class="sxs-lookup"><span data-stu-id="234f6-188">![Overlapping discount combo 06](./media/overlapping-discount-combo-06.jpg)</span></span>

<span data-ttu-id="234f6-189">Når den marginale værdi af hver rabat på et delt sæt produkter er beregnet, anvendes rabatterne på de delte produkter i rækkefølge, udtømmende, fra højeste marginale værdi til laveste marginale værdi.</span><span class="sxs-lookup"><span data-stu-id="234f6-189">After the marginal value of each discount on a shared set of products is calculated, the discounts are applied to the shared products in order, exhaustively, from highest marginal value to lowest marginal value.</span></span> <span data-ttu-id="234f6-190">I denne metode sammenlignes alle resterende rabatmuligheder ikke hver gang, når der anvendes en enkelt forekomst af en rabat.</span><span class="sxs-lookup"><span data-stu-id="234f6-190">For this method, all remaining discount possibilities aren’t compared every time after a single instance of a discount is applied.</span></span> <span data-ttu-id="234f6-191">I stedet sammenlignes de overlappende rabatter én gang og anvendes derefter i rækkefølge.</span><span class="sxs-lookup"><span data-stu-id="234f6-191">Instead, the overlapping discounts are compared one time and then applied in order.</span></span> <span data-ttu-id="234f6-192">Der foretages ingen yderligere sammenligninger.</span><span class="sxs-lookup"><span data-stu-id="234f6-192">No additional comparisons are done.</span></span> <span data-ttu-id="234f6-193">Du kan konfigurere tærsklen for at skifte til metoden for marginal værdi under fanen **Rabat** på siden **Detailparametre**.</span><span class="sxs-lookup"><span data-stu-id="234f6-193">You can configure the threshold to switch to the marginal value method on the **Discount** tab of the **Retail parameters** page.</span></span> <span data-ttu-id="234f6-194">Den acceptable tid til at beregne den samlede rabat varierer på tværs af detailbrancher.</span><span class="sxs-lookup"><span data-stu-id="234f6-194">The acceptable time to calculate the total discount varies across retail industries.</span></span> <span data-ttu-id="234f6-195">Men generelt ligger denne tid dog i intervallet fra nogle tiendedele af millisekunder til et sekund.</span><span class="sxs-lookup"><span data-stu-id="234f6-195">However, this time generally falls in the range of tens of milliseconds to one second.</span></span>




